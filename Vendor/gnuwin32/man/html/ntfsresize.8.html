   <!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>NTFSRESIZE(8) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
ntfsresize - resize an NTFS filesystem without data loss 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>ntfsresize</b>
[<b>OPTIONS</b>] <b>--info </b> <i>device</i> <br>
<b>ntfsresize</b> [<b>OPTIONS</b>] [<b>--size <i>size</i></b>[<b>k</b>|<b>M</b>|<b>G</b>]] <i>device</i> 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
The <b>ntfsresize</b>
program non-destructively resizes Windows XP/2000/NT4, Windows Server 2003
or Longhorn Beta NTFS filesystems. It can be used to shrink or enlarge 
any NTFS filesystem located on an unmounted <i>device</i> (usually a disk partition).
The new filesystem will have <i>size</i> bytes. The <i>size</i> parameter may have one
of the optional modifiers <b>k</b>, <b>M</b>, <b>G</b>, which means the <i>size</i> parameter is given
in kilo-, mega- or gigabytes respectively. <b>ntfsresize</b> conforms to the SI,
ATA, IEEE standards and the disk manufacturers by using k=10^3, M=10^6 and
G=10^9. 
<p> If both  <b>--info</b> and <b>--size</b> are omitted then the  NTFS filesystem will
be enlarged to the underlying device size. <p>
The <b>ntfsresize</b> program doesn&rsquo;t
manipulate the size of partitions. To do that you have to use a disk partitioning
tool, for example <a href='fdisk.8.html'><b>fdisk</b>(8)</a>
. <p>
<b>IMPORTANT!</b> Generally it&rsquo;s a good practice making
regular backups of your valuable data, especially before using any partitioning
tools. To do so  for NTFS, you could use <a href='ntfsclone.8.html'><b>ntfsclone</b>(8)</a>
. It&rsquo;s also included
in the  <a href='ntfsprogs.8.html'><b>ntfsprogs</b>(8)</a>
 package. 
<h2><a name='sect3' href='#toc3'>Shrinkage</a></h2>
If you wish to shrink an NTFS partition,
first use <b>ntfsresize</b> to shrink the size of the filesystem. Then you may
use <a href='fdisk.8.html'><b>fdisk</b>(8)</a>
 to shrink the size of the partition by deleting the partition
and recreating it with the smaller size. But be careful, do not make the
partition smaller than the new size of  the NTFS filesystem otherwise you
won&rsquo;t be able to boot and  you might lose your data. 
<h2><a name='sect4' href='#toc4'>Enlargement</a></h2>
To enlarge
an NTFS filesystem, first you must enlarge the size of the underlying partition.
This can be done using  <a href='fdisk.8.html'><b>fdisk</b>(8)</a>
 by deleting the partition and recreating
it with a larger size. Make sure it will not overlap with an other existing
partition. Then  you may use <b>ntfsresize</b> to enlarge the size of the filesystem.

<h2><a name='sect5' href='#toc5'>Partitioning</a></h2>
When recreating the partition by a disk partitioning tool,
make sure you create it with the same  starting disk cylinder (sector)
and partition type as before.  Otherwise you may lose your entire filesystem.

<p> Also make sure you set the bootable flag for the partition if it existed
before. Failing to do so you might not be able to boot your computer from
the disk. 
<h2><a name='sect6' href='#toc6'>Options</a></h2>
Below is a summary of all the options that <b>ntfsresize</b> accepts.
All options have two equivalent names. The short name is preceded by <b>-</b> and
the long name is preceded by <b>--</b>. Any single letter options, that don&rsquo;t take
an argument, can be combined into a single command, e.g. <b>-fi</b> is equivalent
to <b>-f -i</b>. 
<dl>

<dt><b>-i, --info</b> </dt>
<dd>By using this option ntfsresize will determine the theoretically
smallest  shrunken filesystem size supported. Most of the time the result
is the space  already used on the filesystem. Ntfsresize will refuse shrinking
to a  smaller size than what you got by this option and depending on several
 factors it might be unable to shrink very close to this theoretical size.
Although the integrity of your data should be never in risk, it&rsquo;s still
strongly recommended to make a test run by using the <b>--no-action</b> option before
real resizing.  
<p> Practically the smallest shrunken size generally is at
around "used space" + (20-200 MB). Please also take into account  that Windows
might need about 50-100 MB free space left to boot safely. 
<p> This option never
causes any changes to the filesystem, the partition is opened read-only.
</dd>

<dt><b>-s, --size <i>size</i>[<b>k</b>|<b>M</b>|<b>G</b>]</b> </dt>
<dd>Resize filesystem to <i>size</i>[<b>k</b>|<b>M</b>|<b>G</b>] bytes. The optional modifiers
<b>k</b>, <b>M</b>, <b>G</b> mean the <i>size</i> parameter is given in kilo-, mega- or gigabytes respectively.
Conforming to standards, k=10^3, M=10^6 and G=10^9. Use this option with <b>--no-action</b>
first. </dd>

<dt><b>-f, --force</b> </dt>
<dd>Forces ntfsresize to proceed with the resize operation if
the filesystem is marked "dirty" for consistency check.  
<p> Please note, ntfsresize
always marks the filesystem "dirty" before a real resize operation and
it leaves that way for extra  safety. Thus if NTFS was marked by ntfsresize
then it&rsquo;s safe to  use this option. If you need to resize several times without
booting into Windows between each resizing steps then you must use this
option. </dd>

<dt><b>-n, --no-action</b> </dt>
<dd>Use this option to make a test run before doing the
real resize operation. Volume will be opened read-only and <b>ntfsresize</b> displays
what it would do if it were to resize the filesystem.  Continue with the
real resizing only if the test run passed. </dd>

<dt><b>-P, --no-progress-bar</b> </dt>
<dd>Don&rsquo;t show progress
bars. </dd>

<dt><b>-v, --verbose</b> </dt>
<dd>More output. </dd>

<dt><b>-h, --help</b> </dt>
<dd>Display help and exit. </dd>
</dl>

<h2><a name='sect7' href='#toc7'>Exit Codes</a></h2>
The
exit code is 0 on success, non-zero otherwise.  
<h2><a name='sect8' href='#toc8'>Known Issues</a></h2>
No reliability
problems are known or has been reported. If you need  help please try the
ntfsresize FAQ first (see below) and if you  don&rsquo;t find your answer then
send your question, comment or bug report to  &lt;linux-ntfs-dev@lists.sourceforge.net&gt;.
 No subscription is needed  but the mailing list is moderated and it can
take some time to approve your post.  <p>
There are some very rarely met limitations
at present: filesystems having  bad sectors, highly fragmented Master File
Table (MFT), relocation  of the first MFT extent and resizing in the middle
of some metadata in some cases aren&rsquo;t supported yet. These cases are detected
and  resizing is refused, restricted to a safe size or the closest safe
 size is displayed. <p>
<b>ntfsresize</b> schedules an NTFS consistency check and after
the first boot into Windows you must see <b>chkdsk </b> running on a blue background.
This is intentional. Windows may force a quick reboot after the consistency
check. Moreover after repartitioning your disk and depending on the  hardware
configuration, the Windows message <b>System Settings Change</b> may also appear.
Just acknowledge it and reboot again. 
<h2><a name='sect9' href='#toc9'>Author</a></h2>
<b>ntfsresize</b> has been written
by Szabolcs Szakacsits &lt;szaka@sienet.hu&gt;. 
<h2><a name='sect10' href='#toc10'>Acknowledgement</a></h2>
Many thanks to Anton
Altaparmakov and Richard Russon for libntfs, the excellent documentation
and comments,  to Gergely Madarasz, Dewey M. Sasser and Miguel Lastra and
his colleagues  at the University of Granada for their continuous and highly
valuable help,  furthermore to Erik Meade, Martin Fick, Sandro Hawke, Dave
Croal,  Lorrin Nelson, Geert Hendrickx, Robert Bjorkman and Richard Burdick
 for beta testing and to Theodore Ts&rsquo;o whose  <a href='resize2fs.8.html'><b>resize2fs</b>(8)</a>
 man page formed
the basis of this page. 
<h2><a name='sect11' href='#toc11'>Availability</a></h2>
<b>ntfsresize</b> is part of the  <a href='ntfsprogs.8.html'><b>ntfsprogs</b>(8)<b></b></a>

package and is available from <a href='http://linux-ntfs.sourceforge.net/'>http://linux-ntfs.sourceforge.net/</a>
 as source
and precompiled binary. <b>ntfsresize</b> related news, example of usage, troubleshooting,
statically linked binary and  FAQ (frequently asked questions) is maintained
at <br>
<a href='http://mlf.linux.rulez.org/mlf/ezaz/ntfsresize.html'>http://mlf.linux.rulez.org/mlf/ezaz/ntfsresize.html</a>
 
<h2><a name='sect12' href='#toc12'>See Also</a></h2>
<a href='fdisk.8.html'><b>fdisk</b>(8)</a>
, <a href='cfdisk.8.html'><b>cfdisk</b>(8)</a>
,
<a href='sfdisk.8.html'><b>sfdisk</b>(8)</a>
, <a href='parted.8.html'><b>parted</b>(8)</a>
, <a href='mkntfs.8.html'><b>mkntfs</b>(8)</a>
, <a href='ntfsclone.8.html'><b>ntfsclone</b>(8)</a>
, <a href='ntfsprogs.8.html'><b>ntfsprogs</b>(8)</a>
 
<p> <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Shrinkage</a></li>
<li><a name='toc4' href='#sect4'>Enlargement</a></li>
<li><a name='toc5' href='#sect5'>Partitioning</a></li>
<li><a name='toc6' href='#sect6'>Options</a></li>
<li><a name='toc7' href='#sect7'>Exit Codes</a></li>
<li><a name='toc8' href='#sect8'>Known Issues</a></li>
<li><a name='toc9' href='#sect9'>Author</a></li>
<li><a name='toc10' href='#sect10'>Acknowledgement</a></li>
<li><a name='toc11' href='#sect11'>Availability</a></li>
<li><a name='toc12' href='#sect12'>See Also</a></li>
</ul>
</body>
</html>
