 <!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>RLE(5) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>
  
<h2><a name='sect0' href='#toc0'>Name</a></h2>
rle - Run length encoded file format produced by the rle library

<h2><a name='sect1' href='#toc1'>Description</a></h2>
The output file format is (note: all words are 16 bits, and
in PDP-11 byte  order): 
<dl>

<dt><b>Word 0</b> </dt>
<dd>A "magic" number 0xcc52.  (Byte order 0x52,
0xcc.) </dd>

<dt><b>Words 1-4</b> </dt>
<dd>The structure (chars saved in PDP-11 order) 
<p> <br>
<pre>{
    short   xpos,                       /* Lower left corner
            ypos,
            xsize,                      /* Size of saved box
            ysize;
}
</pre></dd>

<dt><b>Byte 10</b> </dt>
<dd><i>(flags)</i> The following flags are defined: <blockquote></dd>

<dt><i>H_CLEARFIRST</i> </dt>
<dd>(0x1) If
set, clear the frame buffer to background color before restoring. </dd>

<dt><i>H_NO_BACKGROUND</i>
</dt>
<dd>(0x2) If set, no background color is supplied.  If <i>H_CLEARFIRST</i> is also
set, it should be ignored (or alternatively, a clear-to-black operation could
be performed). </dd>

<dt><i>H_ALPHA</i> </dt>
<dd>(0x4) If set, an alpha channel is saved as color
channel -1.  The alpha channel does not contribute to the count of colors
in <i>ncolors</i>. </dd>

<dt><i>H_COMMENT</i> </dt>
<dd>(0x8) If set, comments will follow the color map in
the header. </dd>
</dl>
</blockquote>

<dl>

<dt><b>Byte 11</b> </dt>
<dd><i>(ncolors)</i> Number of color channels present.  0 means
load only the color map (if present), 1 means a B&amp;W image, 3 means a normal
color image. </dd>

<dt><b>Byte 12</b> </dt>
<dd><i>(pixelbits)</i> Number of bits per pixel, per color channel.
 Values greater than 8 currently will not work. </dd>

<dt><b>Byte 13</b> </dt>
<dd><i>(ncmap)</i> Number of
color map channels present.  Need not be identical to <i>ncolors</i>. If this is
non-zero, the color map follows immediately after the background colors.
</dd>

<dt><b>Byte 14</b> </dt>
<dd><i>(cmaplen)</i> Log base 2 of the number of entries in the color map
for each color channel. I.e., would be 8 for a color map with 256 entries.
</dd>

<dt><b>Bytes 15-...</b> </dt>
<dd>The background color.  There are  <i>ncolors</i> bytes of background color.
 If <i>ncolors</i> is even, an extra padding byte is inserted to end on a 16 bit
boundary. The background color is only present if <i>H_NO_BACKGROUND</i> is not
set in <i>flags</i>. IF <i>H_NO</i> BACKGROUND is set, there is a single filler byte. 
Background color is ignored, but present, if <i>H_CLEARFIRST</i> is not set in
<i>flags</i>. 
<p> If  <i>ncmap</i> is non-zero, then the color map will follow as <i>ncmap</i>*2^<i>cmaplen</i>
16 bit words.  The color map data is left justified in each word. 
<p> If the
<i>H_COMMENT</i> flag is set, a set of comments will follow.  The first 16 bit
word gives the length of the comments in bytes.  If this is odd, a filler
byte will be appended to the comments.  The comments are interpreted as
a sequence of null terminated strings which should be, by convention, of
the form <i>name</i>=<i>value</i>, or just <i>name</i>. 
<p> Following the setup information is the
Run Length Encoded image.  Each instruction consists of an opcode, a datum
and possibly one or more following words (all words are 16 bits).  The opcode
is encoded in the first byte of the instruction word.  Instructions come
in either a short or long form.  In the short form, the datum is in the
second byte of the instruction word; in the long form, the datum is a 16
bit value in the word following the instruction word.  Long form instructions
are distinguished by having the 0x40 bit set in the opcode byte. The instruction
opcodes are: </dd>

<dt><a href='SkipLines.1.html'><a href='SkipLines.1.html'><b>SkipLines (1)</b></a>
</a>
 </dt>
<dd>The datum is an unsigned number to be added
to the current Y position. </dd>

<dt><a href='SetColor.2.html'><a href='SetColor.2.html'><b>SetColor (2)</b></a>
</a>
 </dt>
<dd>The datum indicates which color
is to be loaded with the data described by the following ByteData and RunData
instructions.  Typically, 0-&gt;red, 1-&gt;green, 2-&gt;blue.  The operation also resets
the X position to the initial X (i.e. a carriage return operation is performed).
</dd>

<dt><a href='SkipPixels.3.html'><a href='SkipPixels.3.html'><b>SkipPixels (3)</b></a>
</a>
 </dt>
<dd>The datum is an unsigned number to be added to the current
X position. </dd>

<dt><a href='ByteData.5.html'><a href='ByteData.5.html'><b>ByteData (5)</b></a>
</a>
 </dt>
<dd>The datum is one less than the number of bytes
of color data following.  If the number of bytes is odd, a filler byte will
be appended to the end of the byte string to make an integral number of
16-bit words.  The X position is incremented to follow the last byte of data.
</dd>

<dt><a href='RunData.6.html'><a href='RunData.6.html'><b>RunData (6)</b></a>
</a>
 </dt>
<dd>The datum is one less than the run length.  The following word
contains (in its lower 8 bits) the color of the run.  The X position is
incremented to follow the last byte in the run. </dd>

<dt><a href='EOF.7.html'><a href='EOF.7.html'><b>EOF (7)</b></a>
</a>
 </dt>
<dd>This opcode indicates
the logical end of image data.  A physical end-of-file will also serve as
well.  The  <b>EOF</b> opcode may be used to concatenate several images in a single
file. </dd>
</dl>

<h2><a name='sect2' href='#toc2'>See Also</a></h2>
<a href='librle.3.html'><i>librle(3)</i></a>
 
<h2><a name='sect3' href='#toc3'>Author</a></h2>
<p>
Spencer W. Thomas, Todd Fuqua <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Description</a></li>
<li><a name='toc2' href='#sect2'>See Also</a></li>
<li><a name='toc3' href='#sect3'>Author</a></li>
</ul>
</body>
</html>
