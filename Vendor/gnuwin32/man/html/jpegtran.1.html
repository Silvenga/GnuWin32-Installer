<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>JPEGTRAN(1) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
jpegtran - lossless transformation of JPEG files 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>jpegtran</b> [
<i>options</i> ] [ <i>filename</i> ] <p>

<h2><a name='sect2' href='#toc2'>Description</a></h2>
<p>
<b>jpegtran</b> performs various useful transformations
of JPEG files. It can translate the coded representation from one variant
of JPEG to another, for example from baseline JPEG to progressive JPEG
or vice versa.  It can also perform some rearrangements of the image data,
for example turning an image from landscape to portrait format by rotation.
<p>
<b>jpegtran</b> works by rearranging the compressed data (DCT coefficients), without
ever fully decoding the image.  Therefore, its transformations are lossless:
there is no image degradation at all, which would not be true if you used
<b>djpeg</b> followed by <b>cjpeg</b> to accomplish the same conversion.  But by the same
token, <b>jpegtran</b> cannot perform lossy operations such as changing the image
quality. <p>
<b>jpegtran</b> reads the named JPEG/JFIF file, or the standard input
if no file is named, and produces a JPEG/JFIF file on the standard output.

<h2><a name='sect3' href='#toc3'>Options</a></h2>
All switch names may be abbreviated; for example, <b>-optimize</b> may be
written <b>-opt</b> or <b>-o</b>. Upper and lower case are equivalent. British spellings
are also accepted (e.g., <b>-optimise</b>), though for brevity these are not mentioned
below. <p>
To specify the coded JPEG representation used in the output file,
<b>jpegtran</b> accepts a subset of the switches recognized by <b>cjpeg</b>: 
<dl>

<dt><b>-optimize</b>
</dt>
<dd>Perform optimization of entropy encoding parameters. </dd>

<dt><b>-progressive</b> </dt>
<dd>Create
progressive JPEG file. </dd>

<dt><b>-restart</b><i> N</i> </dt>
<dd>Emit a JPEG restart marker every N MCU
rows, or every N MCU blocks if "B" is attached to the number. </dd>

<dt><b>-scans</b><i> file</i>
</dt>
<dd>Use the scan script given in the specified text file. </dd>
</dl>
<p>
See <a href='cjpeg.1.html'><b>cjpeg</b>(1)</a>
 for more
details about these switches. If you specify none of these switches, you
get a plain baseline-JPEG output file.  The quality setting and so forth
are determined by the input file. <p>
The image can be losslessly transformed
by giving one of these switches: 
<dl>

<dt><b>-crop WxH+X+Y</b> </dt>
<dd>Crop to a rectangular subarea
of width W, height H starting at point X,Y. Allows the Width and or Height
of the image to exceed the image. </dd>

<dt><b>-drop +X+Y</b> </dt>
<dd>Drop another image. Overlay part
of the source image at point width W + height H.  </dd>

<dt><b>-flip horizontal</b> </dt>
<dd>Mirror
image horizontally (left-right). </dd>

<dt><b>-flip vertical</b> </dt>
<dd>Mirror image vertically (top-bottom).
</dd>

<dt><b>-perfect</b> </dt>
<dd>Fails with an error if there is any loss durring the transformation.
</dd>

<dt><b>-rotate 90</b> </dt>
<dd>Rotate image 90 degrees clockwise. </dd>

<dt><b>-rotate 180</b> </dt>
<dd>Rotate image 180
degrees. </dd>

<dt><b>-rotate 270</b> </dt>
<dd>Rotate image 270 degrees clockwise (or 90 ccw). </dd>

<dt><b>-transpose</b>
</dt>
<dd>Transpose image (across UL-to-LR axis). </dd>

<dt><b>-transverse</b> </dt>
<dd>Transverse transpose (across
UR-to-LL axis). </dd>
</dl>
<p>
The transpose transformation has no restrictions regarding
image dimensions. The other transformations operate rather oddly if the
image dimensions are not a multiple of the iMCU size (usually 8 or 16 pixels),
because they can only transform complete blocks of DCT coefficient data
in the desired way. <p>
<b>jpegtran</b>&rsquo;s default behavior when transforming an odd-size
image is designed to preserve exact reversibility and mathematical consistency
of the transformation set.  As stated, transpose is able to flip the entire
image area.  Horizontal mirroring leaves any partial iMCU column at the
right edge untouched, but is able to flip all rows of the image.  Similarly,
vertical mirroring leaves any partial iMCU row at the bottom edge untouched,
but is able to flip all columns.  The other transforms can be built up as
sequences of transpose and flip operations; for consistency, their actions
on edge pixels are defined to be the same as the end result of the corresponding
transpose-and-flip sequence. <p>
For practical use, you may prefer to discard
any untransformable edge pixels rather than having a strange-looking strip
along the right and/or bottom edges of a transformed image.  To do this,
add the <b>-trim</b> switch: 
<dl>

<dt><b>-trim</b> </dt>
<dd>Drop non-transformable edge blocks. </dd>
</dl>
<p>
Obviously,
a transformation with <b>-trim</b> is not reversible, so strictly speaking <b>jpegtran</b>
with this switch is not lossless.  Also, the expected mathematical equivalences
between the transformations no longer hold.  For example, <b>-rot 270 -trim</b> trims
only the bottom edge, but <b>-rot 90 -trim</b> followed by <b>-rot 180 -trim</b> trims both
edges. <p>
If you are only interested by perfect transformation, add the <b>-perfect</b>
switch: 
<dl>

<dt><b>-perfect</b> </dt>
<dd>Fails with an error if the transformation is not perfect.
For example you may want to do </dd>

<dt><b>(jpegtran -rot 90 -perfect foo.jpg || djpeg foo.jpg|
pnmflip -r90 | cjpeg)</b> </dt>
<dd>to do a perfect rotation if available or an approximated
one if not. </dd>
</dl>
<p>
We also offer a lossless-crop option, which discards data outside
a given image region but losslessly preserves what is inside.  Like the
rotate and flip transforms, lossless crop is restricted by the JPEG format:
the upper left corner of the selected region must fall on an iMCU boundary.
 If this does not hold for the given crop parameters, we silently move
the upper left corner up and/or left to make it so, simultaneously increasing
the region dimensions to keep the lower right crop corner unchanged.  (Thus,
the output image covers at least the requested region, but may cover more.)

<p> Note:  <b>-perfect</b> and <b>lossless-crop</b> are enhancements from <a href='http://sylvana.net/jpegcrop/'>http://sylvana.net/jpegcrop/</a>

that may not be available on non-Debian systems. 
<p> The image can be losslessly
cropped by giving the switch: 
<dl>

<dt><b>-crop WxH+X+Y</b> </dt>
<dd>Crop to a rectangular subarea
of width W, height H starting at point X,Y. </dd>
</dl>
<p>
<p>
Another not-strictly-lossless
transformation switch is: 
<dl>

<dt><b>-grayscale</b> </dt>
<dd>Force grayscale output. </dd>
</dl>
<p>
This option
discards the chrominance channels if the input image is YCbCr (ie, a standard
color JPEG), resulting in a grayscale JPEG file.  The luminance channel
is preserved exactly, so this is a better method of reducing to grayscale
than decompression, conversion, and recompression.  This switch is particularly
handy for fixing a monochrome picture that was mistakenly encoded as a
color JPEG.  (In such a case, the space savings from getting rid of the
near-empty chroma channels won&rsquo;t be large; but the decoding time for a grayscale
JPEG is substantially less than that for a color JPEG.) <p>
<b>jpegtran</b> also recognizes
these switches that control what to do with "extra" markers, such as comment
blocks: 
<dl>

<dt><b>-copy none</b> </dt>
<dd>Copy no extra markers from source file.  This setting
suppresses all comments and other excess baggage present in the source
file. </dd>

<dt><b>-copy comments</b> </dt>
<dd>Copy only comment markers.  This setting copies comments
from the source file, but discards any other inessential data. </dd>

<dt><b>-copy all</b>
</dt>
<dd>Copy all extra markers.  This setting preserves miscellaneous markers found
in the source file, such as JFIF thumbnails and Photoshop settings. In some
files these extra markers can be sizable. See &rsquo;EXIF FILES&rsquo; for special tratement
of EXIF markers. </dd>

<dt><b>-copy exif</b> </dt>
<dd>This setting preserves the EXIF marker, commonly
found in JPEG files produced by digital cameras, in addition to any comment
markers.  If there is an EXIF marker it is copied and the JFIF marker (incompatible
with EXIF) is omitted. If there is no EXIF marker a JFIF one is emitted
as usual.  See &rsquo;EXIF FILES&rsquo; for special tratement of EXIF markers. </dd>
</dl>
<p>
The default
behavior is <b>-copy comments</b>. (Note: in IJG releases v6 and v6a, <b>jpegtran</b> always
did the equivalent of <b>-copy none</b>.) <p>
Additional switches recognized by jpegtran
are: 
<dl>

<dt><b>-maxmemory</b><i> N</i> </dt>
<dd>Set limit for amount of memory to use in processing large
images.  Value is in thousands of bytes, or millions of bytes if "M" is
attached to the number.  For example, <b>-max 4m</b> selects 4000000 bytes.  If more
space is needed, temporary files will be used. </dd>

<dt><b>-outfile</b><i> name</i> </dt>
<dd>Send output
image to the named file, not to standard output. </dd>

<dt><b>-verbose</b> </dt>
<dd>Enable debug printout.
 More <b>-v</b>&rsquo;s give more output.  Also, version information is printed at startup.
</dd>

<dt><b>-debug</b> </dt>
<dd>Same as <b>-verbose</b>. </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Exif Files</a></h2>
The EXIF variety of JPEG files, which are
often produced by digital cameras, are recognized by jpegtran as EXIF files
(i.e. not as JFIF, the usual variety of JPEG files). If the input file is
recognized as EXIF (i.e., there is an EXIF marker and no JFIF marker) the
&rsquo;-copy exif&rsquo; option is automatically turned on if &rsquo;-copy comments&rsquo;, or no &rsquo;-copy&rsquo;
option, was specified. Thus, unless &rsquo;-copy none&rsquo; is specified an EXIF file
is kept as EXIF and not converted to JFIF. <p>
If a geometrical transformation
is applied (e.g., rotate, transpose) the EXIF width and height fields are
set to the width and height of the output image. Furthermore, the orientation
field is reset to one, meaning tha the orientation of the output image
is upright (i.e. normal). <p>
Note that an explicitely given &rsquo;-copy exif&rsquo; option
will output an EXIF file if the input is an EXIF file that was saved as
JFIF, and that the EXIF marker is still present. This option is useful for
recovering EXIF files that where converted to JFIF by a non EXIF-aware software.
Note however, that the data in the EXIF marker is not validated, unless
a geometrical transformation is applied. 
<h2><a name='sect5' href='#toc5'>Examples</a></h2>
<p>
This example converts a
baseline JPEG file to progressive form: 
<dl>

<dt><b>jpegtran -progressive</b> </dt>
<dd><i>foo.jpg</i> <b>&gt;</b> <i>fooprog.jpg</i>
</dd>
</dl>
<p>
This example rotates an image 90 degrees clockwise, discarding any unrotatable
edge pixels: 
<dl>

<dt><b>jpegtran -rot 90 -trim</b> </dt>
<dd><i>foo.jpg</i> <b>&gt;</b> <i>foo90.jpg</i> </dd>
</dl>

<h2><a name='sect6' href='#toc6'>Environment</a></h2>

<dl>

<dt><b>JPEGMEM</b> </dt>
<dd>If
this environment variable is set, its value is the default memory limit.
The value is specified as described for the <b>-maxmemory</b> switch. <b>JPEGMEM</b> overrides
the default value specified when the program was compiled, and itself is
overridden by an explicit <b>-maxmemory</b>. </dd>
</dl>

<h2><a name='sect7' href='#toc7'>See Also</a></h2>
<a href='cjpeg.1.html'><b>cjpeg</b>(1)</a>
, <a href='djpeg.1.html'><b>djpeg</b>(1)</a>
, <a href='rdjpgcom.1.html'><b>rdjpgcom</b>(1)</a>
,
<a href='wrjpgcom.1.html'><b>wrjpgcom</b>(1)</a>
 <br>
Wallace, Gregory K.  "The JPEG Still Picture Compression Standard", Communications
of the ACM, April 1991 (vol. 34, no. 4), pp. 30-44. 
<h2><a name='sect8' href='#toc8'>Author</a></h2>
Independent JPEG Group

<h2><a name='sect9' href='#toc9'>Bugs</a></h2>
Arithmetic coding is not supported for legal reasons. <p>
The transform
options can&rsquo;t transform odd-size images perfectly.  Use <b>-trim</b> or <b>-perfect</b> if
you don&rsquo;t like the results. <p>
The entire image is read into memory and then
written out again, even in cases where this isn&rsquo;t really necessary.  Expect
swapping on large images, especially when using the more complex transform
options. <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Options</a></li>
<li><a name='toc4' href='#sect4'>Exif Files</a></li>
<li><a name='toc5' href='#sect5'>Examples</a></li>
<li><a name='toc6' href='#sect6'>Environment</a></li>
<li><a name='toc7' href='#sect7'>See Also</a></li>
<li><a name='toc8' href='#sect8'>Author</a></li>
<li><a name='toc9' href='#sect9'>Bugs</a></li>
</ul>
</body>
</html>
