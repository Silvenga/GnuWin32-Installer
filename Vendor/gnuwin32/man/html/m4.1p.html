 <!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>"M4"(P) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>
 
<h2><a name='sect0' href='#toc0'>Name</a></h2>
m4 - macro processor (<b>DEVELOPMENT</b>) 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<p>
<b>m4</b> <b>[</b><b>-s</b><b>][</b><b>-D</b> <i>name</i><b>[</b><b>=</b><i>val</i><b>]]</b><b>...</b><b>[</b><b>-U</b>
<i>name</i><b>]</b><b>...</b> <i>file</i><b>... </b> 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<p>
The <i>m4</i> utility is a macro processor that shall read
one or more text files, process them according to their included macro
statements, and write the results to standard output. 
<h2><a name='sect3' href='#toc3'>Options</a></h2>
<p>
The <i>m4</i> utility
shall conform to the Base Definitions volume of IEEE&nbsp;Std&nbsp;1003.1-2001, Section
12.2, Utility Syntax Guidelines, except that the order of the <b>-D</b> and <b>-U</b> options
shall be significant. <p>
The following options shall be supported: 
<dl>

<dt><b>-s</b> </dt>
<dd>Enable
line synchronization output for the <i>c99</i> preprocessor phase (that is, <b>#line</b>
directives). </dd>

<dt><b>-D&nbsp;</b> <i>name</i><b>[</b>=<i>val</i><b>]</b> </dt>
<dd><p>
Define <i>name</i> to <i>val</i> or to null if = <i>val</i> is omitted.
</dd>

<dt><b>-U&nbsp;</b> <i>name</i> </dt>
<dd>Undefine <i>name</i>. <p>
</dd>
</dl>

<h2><a name='sect4' href='#toc4'>Operands</a></h2>
<p>
The following operand shall be supported:

<dl>

<dt><i>file</i> </dt>
<dd>A pathname of a text file to be processed. If no <i>file</i> is given, or
if it is <b>&rsquo;-&rsquo;</b> , the standard input shall be read. <p>
</dd>
</dl>

<h2><a name='sect5' href='#toc5'>Stdin</a></h2>
<p>
The standard input shall
be a text file that is used if no <i>file</i> operand is given, or if it is <b>&rsquo;-&rsquo;</b> .

<h2><a name='sect6' href='#toc6'>Input Files</a></h2>
<p>
The input file named by the <i>file</i> operand shall be a text file.

<h2><a name='sect7' href='#toc7'>Environment Variables</a></h2>
<p>
The following environment variables shall affect the
execution of <i>m4</i>: 
<dl>

<dt><i>LANG</i> </dt>
<dd>Provide a default value for the internationalization
variables that are unset or null. (See the Base Definitions volume of IEEE&nbsp;Std&nbsp;1003.1-2001,
Section 8.2, Internationalization Variables for the precedence of internationalization
variables used to determine the values of locale categories.) </dd>

<dt><i>LC_ALL</i> </dt>
<dd>If
set to a non-empty string value, override the values of all the other internationalization
variables. </dd>

<dt><i>LC_CTYPE</i> </dt>
<dd>Determine the locale for the interpretation of sequences
of bytes of text data as characters (for example, single-byte as opposed
to multi-byte characters in arguments and input files). </dd>

<dt><i>LC_MESSAGES</i> </dt>
<dd>Determine
the locale that should be used to affect the format and contents of diagnostic
messages written to standard error. </dd>

<dt><i>NLSPATH</i> </dt>
<dd>Determine the location of message
catalogs for the processing of <i>LC_MESSAGES .</i> <p>
</dd>
</dl>

<h2><a name='sect8' href='#toc8'>Asynchronous Events</a></h2>
<p>
Default.

<h2><a name='sect9' href='#toc9'>Stdout</a></h2>
<p>
The standard output shall be the same as the input files, after being
processed for macro expansion. 
<h2><a name='sect10' href='#toc10'>Stderr</a></h2>
<p>
The standard error shall be used to
display strings with the <b>errprint</b> macro, macro tracing enabled by the <b>traceon</b>
macro, the defined text for macros written by the <b>dumpdef</b> macro, or for
diagnostic messages. 
<h2><a name='sect11' href='#toc11'>Output Files</a></h2>
<p>
None. 
<h2><a name='sect12' href='#toc12'>Extended Description</a></h2>
<p>
The <i>m4</i> utility
shall compare each token from the input against the set of built-in and
user-defined macros. If the token matches the name of a macro, then the token
shall be replaced by the macro&rsquo;s defining text, if any, and rescanned for
matching macro names. Once no portion of the token matches the name of a
macro, it shall be written to standard output. Macros may have arguments,
in which case the arguments shall be substituted into the defining text
before it is rescanned. <p>
Macro calls have the form: <p>
<blockquote><br>
<pre>name(arg1, arg2, ..., argn)

</pre></blockquote>
<p>
Macro names shall consist of letters, digits, and underscores, where the
first character is not a digit. Tokens not of this form shall not be treated
as macros. <p>
The application shall ensure that the left parenthesis immediately
follows the name of the macro. If a token matching the name of a macro is
not followed by a left parenthesis, it is handled as a use of that macro
without arguments. <p>
If a macro name is followed by a left parenthesis, its
arguments are the comma-separated tokens between the left parenthesis and
the matching right parenthesis. Unquoted &lt;blank&gt;s and &lt;newline&gt;s preceding each
argument shall be ignored. All other characters, including trailing &lt;blank&gt;s
and &lt;newline&gt;s, are retained. Commas enclosed between left and right parenthesis
characters do not delimit arguments. <p>
Arguments are positionally defined
and referenced. The string <b>"$1"</b> in the defining text shall be replaced by
the first argument. Systems shall support at least nine arguments; only
the first nine can be referenced, using the strings <b>"$1"</b> to <b>"$9"</b> , inclusive.
The string <b>"$0"</b> is replaced with the name of the macro. The string <b>"$#"</b>
is replaced by the number of arguments as a string. The string <b>"$*"</b> is replaced
by a list of all of the arguments, separated by commas. The string <b>"$@"</b>
is replaced by a list of all of the arguments separated by commas, and
each argument is quoted using the current left and right quoting strings.
<p>
If fewer arguments are supplied than are in the macro definition, the omitted
arguments are taken to be null. It is not an error if more arguments are
supplied than are in the macro definition. <p>
No special meaning is given to
any characters enclosed between matching left and right quoting strings,
but the quoting strings are themselves discarded. By default, the left quoting
string consists of a grave accent ( <b>&rsquo;&lsquo;&rsquo;</b> ) and the right quoting string consists
of an acute accent ( <b>&rsquo;"</b> ); see also the <b>changequote</b> macro. <p>
Comments are written
but not scanned for matching macro names; by default, the begin-comment
string consists of the number sign character and the end-comment string
consists of a &lt;newline&gt;. See also the <b>changecom</b> and <b>dnl</b> macros. <p>
The <i>m4</i> utility
shall make available the following built-in macros. They can be redefined,
but once this is done the original meaning is lost. Their values shall be
null unless otherwise stated. In the descriptions below, the term <i>defining
text</i> refers to the value of the macro: the second argument to the <b>define</b>
macro, among other things. Except for the first argument to the <b>eval</b> macro,
all numeric arguments to built-in macros shall be interpreted as decimal
values. The string values produced as the defining text of the <b>decr</b>, <b>divnum</b>,
<b>incr</b>, <b>index</b>, <b>len</b>, and <b>sysval</b> built-in macros shall be in the form of a decimal-constant
as defined in the C language. 
<dl>

<dt><b>changecom</b> </dt>
<dd>The <b>changecom</b> macro shall set the
begin-comment and end-comment strings. With no arguments, the comment mechanism
shall be disabled. With a single argument, that argument shall become the
begin-comment string and the &lt;newline&gt; shall become the end-comment string.
With two arguments, the first argument shall become the begin-comment string
and the second argument shall become the end-comment string. Systems shall
support comment strings of at least five characters. </dd>

<dt><b>changequote</b> </dt>
<dd>The <b>changequote</b>
macro shall set the begin-quote and end-quote strings. With no arguments,
the quote strings shall be set to the default values (that is, <b>&lsquo;&rsquo;</b>). With a
single argument, that argument shall become the begin-quote string and the
&lt;newline&gt; shall become the end-quote string. With two arguments, the first
argument shall become the begin-quote string and the second argument shall
become the end-quote string. Systems shall support quote strings of at least
five characters. </dd>

<dt><b>decr</b> </dt>
<dd>The defining text of the <b>decr</b> macro shall be its first
argument decremented by 1. It shall be an error to specify an argument containing
any non-numeric characters. </dd>

<dt><b>define</b> </dt>
<dd>The second argument shall become the defining
text of the macro whose name is the first argument. </dd>

<dt><b>defn</b> </dt>
<dd>The defining text
of the <b>defn</b> macro shall be the quoted definition (using the current quoting
strings) of its arguments. </dd>

<dt><b>divert</b> </dt>
<dd>The <i>m4</i> utility maintains nine temporary
buffers, numbered 1 to 9, inclusive. When the last of the input has been
processed, any output that has been placed in these buffers shall be written
to standard output in buffer-numerical order. The <b>divert</b> macro shall divert
future output to the buffer specified by its argument. Specifying no argument
or an argument of 0 shall resume the normal output process. Output diverted
to a stream other than 0 to 9 shall be discarded. It shall be an error to
specify an argument containing any non-numeric characters. </dd>

<dt><b>divnum</b> </dt>
<dd>The defining
text of the <b>divnum</b> macro shall be the number of the current output stream
as a string. </dd>

<dt><b>dnl</b> </dt>
<dd>The <b>dnl</b> macro shall cause <i>m4</i> to discard all input characters
up to and including the next &lt;newline&gt;. </dd>

<dt><b>dumpdef</b> </dt>
<dd>The <b>dumpdef</b> macro shall write
the defined text to standard error for each of the macros specified as
arguments, or, if no arguments are specified, for all macros. </dd>

<dt><b>errprint</b> </dt>
<dd>The
<b>errprint</b> macro shall write its arguments to standard error. </dd>

<dt><b>eval</b> </dt>
<dd>The <b>eval</b>
macro shall evaluate its first argument as an arithmetic expression, using
32-bit signed integer arithmetic. All of the C-language operators shall be
supported, except for:  <p>
<blockquote><br>
<pre>[]
-&gt;
++
--
(type)
unary *
sizeof,
.
?:
unary &amp;

</pre></dd>
</dl>
</blockquote>
<p>
and all assignment operators. It shall be an error to specify any of these
operators. Precedence and associativity shall be as in the ISO&nbsp;C standard.
Systems shall support octal and hexadecimal numbers as in the ISO&nbsp;C standard.
The second argument, if specified, shall set the radix for the result;
the default is 10. The third argument, if specified, sets the minimum number
of digits in the result. It shall be an error to specify the second or third
argument containing any non-numeric characters. 
<dl>

<dt><b>ifdef</b> </dt>
<dd>If the first argument
to the <b>ifdef</b> macro is defined, the defining text shall be the second argument.
Otherwise, the defining text shall be the third argument, if specified,
or the null string, if not. </dd>

<dt><b>ifelse</b> </dt>
<dd>The <b>ifelse</b> macro takes three or more
arguments. If the first two arguments compare as equal strings (after macro
expansion of both arguments), the defining text shall be the third argument.
If the first two arguments do not compare as equal strings and there are
three arguments, the defining text shall be null. If the first two arguments
do not compare as equal strings and there are four or five arguments, the
defining text shall be the fourth argument. If the first two arguments do
not compare as equal strings and there are six or more arguments, the first
three arguments shall be discarded and processing shall restart with the
remaining arguments. </dd>

<dt><b>include</b> </dt>
<dd>The defining text for the <b>include</b> macro shall
be the contents of the file named by the first argument. It shall be an
error if the file cannot be read. </dd>

<dt><b>incr</b> </dt>
<dd>The defining text of the <b>incr</b> macro
shall be its first argument incremented by 1. It shall be an error to specify
an argument containing any non-numeric characters. </dd>

<dt><b>index</b> </dt>
<dd>The defining text
of the <b>index</b> macro shall be the first character position (as a string)
in the first argument where a string matching the second argument begins
(zero origin), or -1 if the second argument does not occur. </dd>

<dt><b>len</b> </dt>
<dd>The defining
text of the <b>len</b> macro shall be the length (as a string) of the first argument.
</dd>

<dt><b>m4exit</b> </dt>
<dd>Exit from the <i>m4</i> utility. If the first argument is specified, it
is the exit code. The default is zero. It shall be an error to specify an
argument containing any non-numeric characters. </dd>

<dt><b>m4wrap</b> </dt>
<dd>The first argument
shall be processed when EOF is reached. If the <b>m4wrap</b> macro is used multiple
times, the arguments specified shall be processed in the order in which
the <b>m4wrap</b> macros were processed. </dd>

<dt><b>maketemp</b> </dt>
<dd>The defining text shall be the
first argument, with any trailing <b>&rsquo;X&rsquo;</b> characters replaced with the current
process ID as a string. </dd>

<dt><b>popdef</b> </dt>
<dd>The <b>popdef</b> macro shall delete the current
definition of its arguments, replacing that definition with the previous
one. If there is no previous definition, the macro is undefined. </dd>

<dt><b>pushdef</b>
</dt>
<dd>The <b>pushdef</b> macro shall be equivalent to the <b>define</b> macro with the exception
that it shall preserve any current definition for future retrieval using
the <b>popdef</b> macro. </dd>

<dt><b>shift</b> </dt>
<dd>The defining text for the <b>shift</b> macro shall be all
of its arguments except for the first one. </dd>

<dt><b>sinclude</b> </dt>
<dd>The <b>sinclude</b> macro shall
be equivalent to the <b>include</b> macro, except that it shall not be an error
if the file is inaccessible. </dd>

<dt><b>substr</b> </dt>
<dd>The defining text for the <b>substr</b> macro
shall be the substring of the first argument beginning at the zero-offset
character position specified by the second argument. The third argument,
if specified, shall be the number of characters to select; if not specified,
the characters from the starting point to the end of the first argument
shall become the defining text. It shall not be an error to specify a starting
point beyond the end of the first argument and the defining text shall
be null. It shall be an error to specify an argument containing any non-numeric
characters. </dd>

<dt><b>syscmd</b> </dt>
<dd>The <b>syscmd</b> macro shall interpret its first argument as
a shell command line. The defining text shall be the string result of that
command. No output redirection shall be performed by the <i>m4</i> utility. The
exit status value from the command can be retrieved using the <b>sysval</b> macro.
</dd>

<dt><b>sysval</b> </dt>
<dd>The defining text of the <b>sysval</b> macro shall be the exit value of
the utility last invoked by the <b>syscmd</b> macro (as a string). </dd>

<dt><b>traceon</b> </dt>
<dd>The
<b>traceon</b> macro shall enable tracing for the macros specified as arguments,
or, if no arguments are specified, for all macros. The trace output shall
be written to standard error in an unspecified format. </dd>

<dt><b>traceoff</b> </dt>
<dd>The <b>traceoff</b>
macro shall disable tracing for the macros specified as arguments, or,
if no arguments are specified, for all macros. </dd>

<dt><b>translit</b> </dt>
<dd>The defining text
of the <b>translit</b> macro shall be the first argument with every character
that occurs in the second argument replaced with the corresponding character
from the third argument. </dd>

<dt><b>undefine</b> </dt>
<dd>The <b>undefine</b> macro shall delete all definitions
(including those preserved using the <b>pushdef</b> macro) of the macros named
by its arguments. </dd>

<dt><b>undivert</b> </dt>
<dd>The <b>undivert</b> macro shall cause immediate output
of any text in temporary buffers named as arguments, or all temporary buffers
if no arguments are specified. Buffers can be undiverted into other temporary
buffers. Undiverting shall discard the contents of the temporary buffer.
It shall be an error to specify an argument containing any non-numeric characters.
<p>
</dd>
</dl>

<h2><a name='sect13' href='#toc13'>Exit Status</a></h2>
<p>
The following exit values shall be returned: 
<ol>
&nbsp;<li>Successful completion.
</dd>

<dt>&gt;0 </dt>
<dd>An error occurred <p>
</dd>
</dl>
<p>
If the <b>m4exit</b> macro is used, the exit value can be
specified by the input file. 
<h2><a name='sect14' href='#toc14'>Consequences of Errors</a></h2>
<p>
Default. <p>
<i>The following
sections are informative.</i> 
<h2><a name='sect15' href='#toc15'>Application Usage</a></h2>
<p>
The <b>defn</b> macro is useful for
renaming macros, especially built-ins. 
<h2><a name='sect16' href='#toc16'>Examples</a></h2>
<p>
If the file <b>m4src</b> contains
the lines: <p>
<blockquote><br>
<pre>The value of &lsquo;VER&rsquo; is "VER".
ifdef(&lsquo;VER&rsquo;, "VER" is defined to be VER., VER is not defined.)
ifelse(VER, 1, "VER" is &lsquo;VER&rsquo;.)
ifelse(VER, 2, "VER" is &lsquo;VER&rsquo;., "VER" is not 2.)
end

</pre></blockquote>
<p>
then the command <p>
<blockquote><br>
<pre>m4 m4src

</pre></blockquote>
<p>
or the command: <p>
<blockquote><br>
<pre>m4 -U VER m4src

</pre></blockquote>
<p>
produces the output: <p>
<blockquote><br>
<pre>The value of VER is "VER".
VER is not defined.

VER is not 2.
end

</pre></blockquote>
<p>
The command: <p>
<blockquote><br>
<pre>m4 -D VER m4src

</pre></blockquote>
<p>
produces the output: <p>
<blockquote><br>
<pre>The value of VER is "".
VER is defined to be .

VER is not 2.
end

</pre></blockquote>
<p>
The command: <p>
<blockquote><br>
<pre>m4 -D VER=1 m4src

</pre></blockquote>
<p>
produces the output: <p>
<blockquote><br>
<pre>The value of VER is "1".
VER is defined to be 1.
VER is 1.
VER is not 2.
end

</pre></blockquote>
<p>
The command: <p>
<blockquote><br>
<pre>m4 -D VER=2 m4src

produces the output:
The value of VER is "2".
VER is defined to be 2.

VER is 2.
end

</pre></blockquote>

<h2><a name='sect17' href='#toc17'>Rationale</a></h2>
<p>
None. 
<h2><a name='sect18' href='#toc18'>Future Directions</a></h2>
<p>
None. 
<h2><a name='sect19' href='#toc19'>See Also</a></h2>
<p>
<i>c99</i> 
<h2><a name='sect20' href='#toc20'>Copyright</a></h2>
Portions of this
text are reprinted and reproduced in electronic form from IEEE Std 1003.1,
2003 Edition, Standard for Information Technology -- Portable Operating System
Interface (POSIX), The Open Group Base Specifications Issue 6, Copyright
(C) 2001-2003 by the Institute of Electrical and Electronics Engineers,
Inc and The Open Group. In the event of any discrepancy between this version
and the original IEEE and The Open Group Standard, the original IEEE and
The Open Group Standard is the referee document. The original Standard can
be obtained online at <a href='http://www.opengroup.org/unix/online.html'>http://www.opengroup.org/unix/online.html</a>
 . <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Options</a></li>
<li><a name='toc4' href='#sect4'>Operands</a></li>
<li><a name='toc5' href='#sect5'>Stdin</a></li>
<li><a name='toc6' href='#sect6'>Input Files</a></li>
<li><a name='toc7' href='#sect7'>Environment Variables</a></li>
<li><a name='toc8' href='#sect8'>Asynchronous Events</a></li>
<li><a name='toc9' href='#sect9'>Stdout</a></li>
<li><a name='toc10' href='#sect10'>Stderr</a></li>
<li><a name='toc11' href='#sect11'>Output Files</a></li>
<li><a name='toc12' href='#sect12'>Extended Description</a></li>
<li><a name='toc13' href='#sect13'>Exit Status</a></li>
<li><a name='toc14' href='#sect14'>Consequences of Errors</a></li>
<li><a name='toc15' href='#sect15'>Application Usage</a></li>
<li><a name='toc16' href='#sect16'>Examples</a></li>
<li><a name='toc17' href='#sect17'>Rationale</a></li>
<li><a name='toc18' href='#sect18'>Future Directions</a></li>
<li><a name='toc19' href='#sect19'>See Also</a></li>
<li><a name='toc20' href='#sect20'>Copyright</a></li>
</ul>
</body>
</html>
