 <!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>RLE_HDR(3) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>
 
<h2><a name='sect0' href='#toc0'>Name</a></h2>
rle_hdr - Structure for communication with RLE functions. 
<p> 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b></b>
#include &lt;rle.h&gt; <p>
<b></b> rle_hdr rle_dflt_hdr; <p>
<b></b> RLE_SET_BIT(the_hdr,bit) <br>
<b></b> RLE_CLR_BIT(the_hdr,bit) <br>
<b></b> RLE_BIT(the_hdr,bit) <br>
<b></b> rle_hdr the_hdr; 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
This data structure provides communication
to and between all the  <a href='RLE.5.html'><i>RLE</i>(5)</a>
 file routines.  It describes the parameters
of the image being saved or read, and contains some variables describing
file state that are private to the routines.  The public components are
described below. 
<p> <br>
<pre>     typedef unsigned char rle_pixel;
     typedef unsigned short rle_map;
     rle_hdr {
<tt> </tt>&nbsp;<tt> </tt>&nbsp;int<tt> </tt>&nbsp;<tt> </tt>&nbsp;ncolors,<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* Number of colors being saved */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;*bg_color,<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* Background color array */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;alpha,<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* if != 0, save alpha channel (color -1) */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* alpha channel background is always 0 */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;background,<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* if = 0, no background processing */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* if = 1 or 2, save only non-bg pixels */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* If 2, set clear-to-bg flag in file */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;xmin,<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* Min X bound of saved raster */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;xmax,<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* Max X bound */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;ymin,<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* Min Y bound */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;ymax,<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* Max Y bound */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;ncmap,<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* number of color channels in color map */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* if = 0, color map is not saved */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;cmaplen;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* Log2 of the number of entries in */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* each channel of the color map */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;rle_map<tt> </tt>&nbsp;<tt> </tt>&nbsp;*cmap;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* pointer to color map, stored as 16-bit */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* words, with values left justified */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;char<tt> </tt>&nbsp;<tt> </tt>&nbsp;**comments;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* Pointer to array of pointers */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* to comment strings. */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;FILE *<tt> </tt>&nbsp;<tt> </tt>&nbsp;rle_file;<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* I/O to this file */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;/* 
<tt> </tt>&nbsp;<tt> </tt>&nbsp; * Bit map of channels to read/save.  Indexed by (channel mod 256).
<tt> </tt>&nbsp;<tt> </tt>&nbsp; */
<tt> </tt>&nbsp;<tt> </tt>&nbsp;char    bits[256/8];
    };
</pre>
<p> A global variable, <i>rle_dflt_hdr</i>, is available, conveniently initialized
with default values. 
<h2><a name='sect3' href='#toc3'>Fields</a></h2>

<dl>

<dt><i>ncolors</i> </dt>
<dd>The number of colors (exclusive of the
alpha channel) in the image. This is one greater than the largest channel
index (i.e., <i>ncolors</i> would be 3 if channels 0, 1, and 2 were saved, or if
only channel 2 were saved.) </dd>

<dt><i>bg_color</i> </dt>
<dd>A pointer to an array of <i>ncolors</i> integers,
defines the background color (if used).  The background alpha value is always
0, so is not included in the <i>bg_color</i> array. </dd>

<dt><i>alpha</i> </dt>
<dd>If non-zero, an alpha
channel is present as channel -1.  This should always be 0 or 1.  <i>Rle_get_setup</i>
and <i>rle_put_setup</i> enforce this constraint.  The alpha channel will only
be actually read or written if the corresponding bit in <i>bits</i> is also set.
</dd>

<dt><i>background</i> </dt>
<dd>Controls whether background color processing is done.  If 0,
no background processing is done at all (and <i>bg_color</i> is ignored). If 1
or 2, then runs of 3 or more pixels in the background color are not saved
at all.  If 2, then these runs will be restored by <i>rle_getrow</i>; if 1, they
will not (this can lead to some strange images). </dd>

<dt><i>xmin,</i> xmax, ymin, ymax
</dt>
<dd>The bounds of the image.  All pixels from <i>xmin</i> to <i>xmax</i>, inclusive, in rows
numbered from <i>ymin</i> to <i>ymax</i>, inclusive, will be saved.  Thus the dimensions
of the image are <br>
<i></i> <tt> </tt>&nbsp;<tt> </tt>&nbsp;(xmax - xmin + 1) &#215; (ymax - ymin + 1)<br>
 </dd>

<dt><i>ncmap,</i> cmaplen </dt>
<dd>The size of the saved colormap (if any).  The color map
will have <i>ncmap</i> channels, each <i>2^cmaplen</i> long.  If <i>ncmap</i> is zero, no color
map is present. </dd>

<dt><i>cmap</i> </dt>
<dd>A pointer to colormap data, if present.  The data is
stored in "channel major" order, so that all the values for channel 0 precede
all the values for channel 1, etc.  Each individual value is left-justified
in 16 bits (i.e., the range of values is 0-65535). </dd>

<dt><i>comments</i> </dt>
<dd>A pointer to picture
comment data, if present.  Use the functions <a href='rle_putcom.3.html'><i>rle_putcom</i>(3)</a>
, <a href='rle_getcom.3.html'><i>rle_getcom</i>(3)</a>
,
and <a href='rle_delcom.3.html'><i>rle_delcom</i>(3)</a>
 to manipulate this field. </dd>

<dt><i>rle_file</i> </dt>
<dd>The standard I/O <i>FILE</i>
pointer for the file containing this image. </dd>

<dt><i>bits</i> </dt>
<dd>A bitmap that selects the
channels that are actually written to/read from the file.  The macros below
are used to modify this bitmap. </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Macros</a></h2>
The macro <i>RLE_BIT</i> will retrieve the
state of one of the bits in the <i>bits</i> map. <i>RLE_SET_BIT</i>, and <i>RLE_CLR_BIT</i> set
and clear bits in the  <i>bits</i> map.  The predefined symbols <i>RLE_RED</i>, <i>RLE_GREEN</i>,
<i>RLE_BLUE</i>, and <i>RLE_ALPHA</i>, or an integer value from -1 to 254 may be used
in these macros. 
<h2><a name='sect5' href='#toc5'>See Also</a></h2>
<a href='librle.3.html'><i>librle</i>(3)</a>
, <a href='RLE.5.html'><i>RLE</i>(5)</a>
. 
<h2><a name='sect6' href='#toc6'>Author</a></h2>
Spencer W. Thomas, Todd
Fuqua <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Fields</a></li>
<li><a name='toc4' href='#sect4'>Macros</a></li>
<li><a name='toc5' href='#sect5'>See Also</a></li>
<li><a name='toc6' href='#sect6'>Author</a></li>
</ul>
</body>
</html>
