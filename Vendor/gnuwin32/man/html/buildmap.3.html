 <!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>BUILDMAP(3) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>
 
<h2><a name='sect0' href='#toc0'>Name</a></h2>
buildmap - create a color map array from an RLE file header. 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b></b>
#include &lt;rle.h&gt;  
<dl>

<dt><b></b> rle_pixel ** buildmap( the_hdr, minmap, orig_gamma, new_gamma
) </dt>
<dd> </dd>
</dl>
<p>
<b></b> rle_hdr * the_hdr; <br>
<b></b> int minmap; <br>
<b></b> double orig_gamma, new_gamma;  
<h2><a name='sect2' href='#toc2'>Description</a></h2>
The color map in the  <a href='rle_hdr.3.html'><i>rle_hdr</i>(3)</a>

structure is not in the most easily used form.  The function <i>buildmap</i> returns
a pointer to a colormap array with certain minimum dimensions, making it
a little easier to implement color mapping in a program. The color map from
first argument, <i>the_hdr</i>, is used to build the result.  If no map is present
in <i>the_hdr</i>, then an identity map of the minimum size will be returned. <p>
The
returned color map will have at least <i>minmap</i> rows or channels, each of
which is at least 256 entries long (so that indexing into the color map
with an 8 bit  <i>rle_pixel</i> value will always succeed.) 
<p> The color map from
 <i>the_hdr</i> will be composed with a gamma compensation curve to account for
the gamma of the display for which the input color map was presumably computed.
The argument <i>orig_gamma</i> specifies the gamma of the compensation curve. 
It would typically be the gamma of the original display. 
<p> If  <i>gamma</i> is 0,
then if a picture comment  <i>image_gamma=i_gamma</i> is present, <i>gamma</i> will be
set to <i>1.0/i_gamma</i>. Otherwise, if a comment <i>display_gamma=d_gamma</i> is present,
<i>gamma</i> will be set to <i>d_gamma</i>.  The gamma compensation value for pixel <i>i</i>
is <i>255*(i/255)^gamma</i>. 
<p> If this color map will be used directly for another
display, the gamma of this new display should be passed in <i>new_gamma</i>. 
<p> The
returned value is a pointer to an array of pointers to arrays of  <i>rle_pixel</i>
values.  It may be doubly indexed in C code, so that if <i>cmap</i> is the return
value, the RGB color mapping for a pixel <i>pixval</i> is <i>(cmap[0][pixval], cmap[1][pixval],
cmap[2][pixval])</i>. 
<h2><a name='sect3' href='#toc3'>Notes</a></h2>
Generally, unless the user explicitly specifies the
image or original display gamma (e.g., as with the <b>-i</b> or <b>-I</b> flags of <a href='getx11.1.html'><i>getx11</i>(1)</a>
,
you should pass 0 for <i>orig_gamma</i>. This lets  <i>buildmap</i> use the value from
<i>the_hdr</i>, if it is present. 
<p> If you are going to use the result of buildmap
to generate values to be dithered, <i>new_gamma</i> should always be 1.0, and the
display gamma (<b>-g</b> in <i>getx11</i>) should be passed to <a href='dithermap.3.html'><i>dithermap</i>(3)</a>
.<i></i> If you are
not planning to dither, then pass the user supplied display gamma as  <i>new_gamma</i>.

<p> The color map storage allocated by <i>buildmap</i> can be released by calling
<i>free( map[0] )</i>. 
<h2><a name='sect4' href='#toc4'>See Also</a></h2>
<a href='dithermap.3.html'><i>dithermap</i>(3)</a>
, <a href='rle_hdr.3.html'><i>rle_hdr</i>(3)</a>
, <a href='librle.3.html'><i>librle</i>(3)</a>
, <a href='RLE.5.html'><i>RLE</i>(5)</a>
. 
<h2><a name='sect5' href='#toc5'>Author</a></h2>
Spencer
W. Thomas, University of Utah 
<p> <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Notes</a></li>
<li><a name='toc4' href='#sect4'>See Also</a></li>
<li><a name='toc5' href='#sect5'>Author</a></li>
</ul>
</body>
</html>
