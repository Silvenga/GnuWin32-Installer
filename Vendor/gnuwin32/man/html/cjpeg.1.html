<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>CJPEG(1) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
cjpeg - compress an image file to a JPEG file 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>cjpeg</b> [ <i>options</i>
] [ <i>filename</i> ] <p>

<h2><a name='sect2' href='#toc2'>Description</a></h2>
<p>
<b>cjpeg</b> compresses the named image file, or the
standard input if no file is named, and produces a JPEG/JFIF file on the
standard output. The currently supported input file formats are: PPM (PBMPLUS
color format), PGM (PBMPLUS gray-scale format), BMP, Targa, and RLE (Utah
Raster Toolkit format).  (RLE is supported only if the URT library is available.)

<h2><a name='sect3' href='#toc3'>Options</a></h2>
All switch names may be abbreviated; for example, <b>-grayscale</b> may
be written <b>-gray</b> or <b>-gr</b>. Most of the "basic" switches can be abbreviated to
as little as one letter. Upper and lower case are equivalent (thus <b>-BMP</b> is
the same as <b>-bmp</b>). British spellings are also accepted (e.g., <b>-greyscale</b>), though
for brevity these are not mentioned below. <p>
The basic switches are: 
<dl>

<dt><b>-quality</b><i>
N</i> </dt>
<dd>Scale quantization tables to adjust image quality.  Quality is 0 (worst)
to 100 (best); default is 75.  (See below for more info.) </dd>

<dt><b>-grayscale</b> </dt>
<dd>Create
monochrome JPEG file from color input.  Be sure to use this switch when
compressing a grayscale BMP file, because <b>cjpeg</b> isn&rsquo;t bright enough to notice
whether a BMP file uses only shades of gray. By saying <b>-grayscale</b>, you&rsquo;ll
get a smaller JPEG file that takes less time to process. </dd>

<dt><b>-optimize</b> </dt>
<dd>Perform
optimization of entropy encoding parameters.  Without this, default encoding
parameters are used. <b>-optimize</b> usually makes the JPEG file a little smaller,
but <b>cjpeg</b> runs somewhat slower and needs much more memory.  Image quality
and speed of decompression are unaffected by <b>-optimize</b>. </dd>

<dt><b>-progressive</b> </dt>
<dd>Create
progressive JPEG file (see below). </dd>

<dt><b>-targa</b> </dt>
<dd>Input file is Targa format.  Targa
files that contain an "identification" field will not be automatically
recognized by <b>cjpeg</b>; for such files you must specify <b>-targa</b> to make <b>cjpeg</b>
treat the input as Targa format. For most Targa files, you won&rsquo;t need this
switch. </dd>
</dl>
<p>
The <b>-quality</b> switch lets you trade off compressed file size against
quality of the reconstructed image: the higher the quality setting, the
larger the JPEG file, and the closer the output image will be to the original
input.  Normally you want to use the lowest quality setting (smallest file)
that decompresses into something visually indistinguishable from the original
image.  For this purpose the quality setting should be between 50 and 95;
the default of 75 is often about right.  If you see defects at <b>-quality</b> 75,
then go up 5 or 10 counts at a time until you are happy with the output
image.  (The optimal setting will vary from one image to another.) <p>
<b>-quality</b>
100 will generate a quantization table of all 1&rsquo;s, minimizing loss in the
quantization step (but there is still information loss in subsampling,
as well as roundoff error).  This setting is mainly of interest for experimental
purposes.  Quality values above about 95 are <b>not</b> recommended for normal
use; the compressed file size goes up dramatically for hardly any gain
in output image quality. <p>
In the other direction, quality values below 50
will produce very small files of low image quality.  Settings around 5 to
10 might be useful in preparing an index of a large image library, for
example.  Try <b>-quality</b> 2 (or so) for some amusing Cubist effects.  (Note:
quality values below about 25 generate 2-byte quantization tables, which
are considered optional in the JPEG standard. <b>cjpeg</b> emits a warning message
when you give such a quality value, because some other JPEG programs may
be unable to decode the resulting file.  Use <b>-baseline</b> if you need to ensure
compatibility at low quality values.) <p>
The <b>-progressive</b> switch creates a "progressive
JPEG" file.  In this type of JPEG file, the data is stored in multiple scans
of increasing quality.  If the file is being transmitted over a slow communications
link, the decoder can use the first scan to display a low-quality image
very quickly, and can then improve the display with each subsequent scan.
 The final image is exactly equivalent to a standard JPEG file of the same
quality setting, and the total file size is about the same --- often a little
smaller. <b>Caution:</b> progressive JPEG is not yet widely implemented, so many
decoders will be unable to view a progressive JPEG file at all. <p>
Switches
for advanced users: 
<dl>

<dt><b>-dct int</b> </dt>
<dd>Use integer DCT method (default). </dd>

<dt><b>-dct fast</b> </dt>
<dd>Use
fast integer DCT (less accurate). </dd>

<dt><b>-dct float</b> </dt>
<dd>Use floating-point DCT method.
The float method is very slightly more accurate than the int method, but
is much slower unless your machine has very fast floating-point hardware.
 Also note that results of the floating-point method may vary slightly across
machines, while the integer methods should give the same results everywhere.
The fast integer method is much less accurate than the other two. </dd>

<dt><b>-restart</b><i>
N</i> </dt>
<dd>Emit a JPEG restart marker every N MCU rows, or every N MCU blocks if
"B" is attached to the number. <b>-restart 0</b> (the default) means no restart
markers. </dd>

<dt><b>-smooth</b><i> N</i> </dt>
<dd>Smooth the input image to eliminate dithering noise.  N,
ranging from 1 to 100, indicates the strength of smoothing.  0 (the default)
means no smoothing. </dd>

<dt><b>-maxmemory</b><i> N</i> </dt>
<dd>Set limit for amount of memory to use in
processing large images.  Value is in thousands of bytes, or millions of
bytes if "M" is attached to the number.  For example, <b>-max 4m</b> selects 4000000
bytes.  If more space is needed, temporary files will be used. </dd>

<dt><b>-outfile</b><i> name</i>
</dt>
<dd>Send output image to the named file, not to standard output. </dd>

<dt><b>-verbose</b> </dt>
<dd>Enable
debug printout.  More <b>-v</b>&rsquo;s give more output.  Also, version information is
printed at startup. </dd>

<dt><b>-debug</b> </dt>
<dd>Same as <b>-verbose</b>. </dd>
</dl>
<p>
The <b>-restart</b> option inserts extra
markers that allow a JPEG decoder to resynchronize after a transmission
error.  Without restart markers, any damage to a compressed file will usually
ruin the image from the point of the error to the end of the image; with
restart markers, the damage is usually confined to the portion of the image
up to the next restart marker.  Of course, the restart markers occupy extra
space.  We recommend <b>-restart 1</b> for images that will be transmitted across
unreliable networks such as Usenet. <p>
The <b>-smooth</b> option filters the input
to eliminate fine-scale noise.  This is often useful when converting dithered
images to JPEG: a moderate smoothing factor of 10 to 50 gets rid of dithering
patterns in the input file, resulting in a smaller JPEG file and a better-looking
image.  Too large a smoothing factor will visibly blur the image, however.
<p>
Switches for wizards: 
<dl>

<dt><b>-baseline</b> </dt>
<dd>Force baseline-compatible quantization tables
to be generated.  This clamps quantization values to 8 bits even at low
quality settings.  (This switch is poorly named, since it does not ensure
that the output is actually baseline JPEG.  For example, you can use <b>-baseline</b>
and <b>-progressive</b> together.) </dd>

<dt><b>-qtables</b><i> file</i> </dt>
<dd>Use the quantization tables given
in the specified text file. </dd>

<dt><b>-qslots</b><i> N[,...]</i> </dt>
<dd>Select which quantization table
to use for each color component. </dd>

<dt><b>-sample</b><i> HxV[,...]</i> </dt>
<dd>Set JPEG sampling factors
for each color component. </dd>

<dt><b>-scans</b><i> file</i> </dt>
<dd>Use the scan script given in the specified
text file. </dd>
</dl>
<p>
The "wizard" switches are intended for experimentation with JPEG.
 If you don&rsquo;t know what you are doing, <b>don&rsquo;t use them</b>.  These switches are
documented further in the file wizard.doc. 
<h2><a name='sect4' href='#toc4'>Examples</a></h2>
<p>
This example compresses
the PPM file foo.ppm with a quality factor of 60 and saves the output as
foo.jpg: 
<dl>

<dt><b>cjpeg -quality</b> </dt>
<dd><i>60</i> foo.ppm <b>&gt;</b> <i>foo.jpg</i> </dd>
</dl>

<h2><a name='sect5' href='#toc5'>Hints</a></h2>
Color GIF files are not the
ideal input for JPEG; JPEG is really intended for compressing full-color
(24-bit) images.  In particular, don&rsquo;t try to convert cartoons, line drawings,
and other images that have only a few distinct colors.  GIF works great
on these, JPEG does not.  If you want to convert a GIF to JPEG, you should
experiment with <b>cjpeg</b>&rsquo;s <b>-quality</b> and <b>-smooth</b> options to get a satisfactory
conversion. <b>-smooth 10</b> or so is often helpful. <p>
Avoid running an image through
a series of JPEG compression/decompression cycles.  Image quality loss will
accumulate; after ten or so cycles the image may be noticeably worse than
it was after one cycle.  It&rsquo;s best to use a lossless format while manipulating
an image, then convert to JPEG format when you are ready to file the image
away. <p>
The <b>-optimize</b> option to <b>cjpeg</b> is worth using when you are making a
"final" version for posting or archiving. It&rsquo;s also a win when you are using
low quality settings to make very small JPEG files; the percentage improvement
is often a lot more than it is on larger files.  (At present, <b>-optimize</b> mode
is always selected when generating progressive JPEG files.) 
<h2><a name='sect6' href='#toc6'>Environment</a></h2>

<dl>

<dt><b>JPEGMEM</b>
</dt>
<dd>If this environment variable is set, its value is the default memory limit.
The value is specified as described for the <b>-maxmemory</b> switch. <b>JPEGMEM</b> overrides
the default value specified when the program was compiled, and itself is
overridden by an explicit <b>-maxmemory</b>. </dd>
</dl>

<h2><a name='sect7' href='#toc7'>See Also</a></h2>
<a href='djpeg.1.html'><b>djpeg</b>(1)</a>
, <a href='jpegtran.1.html'><b>jpegtran</b>(1)</a>
, <a href='rdjpgcom.1.html'><b>rdjpgcom</b>(1)</a>
,
<a href='wrjpgcom.1.html'><b>wrjpgcom</b>(1)</a>
 <br>
<a href='ppm.5.html'><b>ppm</b>(5)</a>
, <a href='pgm.5.html'><b>pgm</b>(5)</a>
 <br>
Wallace, Gregory K.  "The JPEG Still Picture Compression Standard", Communications
of the ACM, April 1991 (vol. 34, no. 4), pp. 30-44. 
<h2><a name='sect8' href='#toc8'>Author</a></h2>
Independent JPEG Group

<h2><a name='sect9' href='#toc9'>Bugs</a></h2>
Arithmetic coding is not supported for legal reasons. <p>
GIF input files
are no longer supported, to avoid the Unisys LZW patent. Use a Unisys-licensed
program if you need to read a GIF file.  (Conversion of GIF files to JPEG
is usually a bad idea anyway.) <p>
Not all variants of BMP and Targa file formats
are supported. <p>
The <b>-targa</b> switch is not a bug, it&rsquo;s a feature.  (It would be
a bug if the Targa format designers had not been clueless.) <p>
Still not as
fast as we&rsquo;d like. <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Options</a></li>
<li><a name='toc4' href='#sect4'>Examples</a></li>
<li><a name='toc5' href='#sect5'>Hints</a></li>
<li><a name='toc6' href='#sect6'>Environment</a></li>
<li><a name='toc7' href='#sect7'>See Also</a></li>
<li><a name='toc8' href='#sect8'>Author</a></li>
<li><a name='toc9' href='#sect9'>Bugs</a></li>
</ul>
</body>
</html>
