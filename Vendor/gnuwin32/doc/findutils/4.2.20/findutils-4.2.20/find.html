<html lang="en">
<head>
<title>Finding Files</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Finding Files">
<meta name="generator" content="makeinfo 4.7">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This file documents the GNU utilities for finding files that match
certain criteria and performing various operations on them.

Copyright (C) 1994, 1996, 1998, 2000, 2001, 2003, 2004, 2005 Free
Software Foundation, Inc.

Permission is granted to make and distribute verbatim copies of
this manual provided the copyright notice and this permission notice
are preserved on all copies.

Permission is granted to copy and distribute modified versions of this
manual under the conditions for verbatim copying, provided that the entire
resulting derived work is distributed under the terms of a permission
notice identical to this one.

Permission is granted to copy and distribute translations of this manual
into another language, under the above conditions for modified versions,
except that this permission notice may be stated in a translation approved
by the Foundation.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc { font-variant:small-caps }
  span.roman { font-family: serif; font-weight: normal; } 
--></style>
</head>
<body>
<h1 class="settitle">Finding Files</h1>
   <div class="contents">
<h2>Table of Contents</h2>
<ul>
<li><a name="toc_Introduction" href="#Introduction">1 Introduction</a>
<ul>
<li><a href="#Scope">1.1 Scope</a>
<li><a href="#Overview">1.2 Overview</a>
<li><a href="#find-Expressions">1.3 <code>find</code> Expressions</a>
</li></ul>
<li><a name="toc_Finding-Files" href="#Finding-Files">2 Finding Files</a>
<ul>
<li><a href="#Name">2.1 Name</a>
<ul>
<li><a href="#Base-Name-Patterns">2.1.1 Base Name Patterns</a>
<li><a href="#Full-Name-Patterns">2.1.2 Full Name Patterns</a>
<li><a href="#Fast-Full-Name-Search">2.1.3 Fast Full Name Search</a>
<li><a href="#Shell-Pattern-Matching">2.1.4 Shell Pattern Matching</a>
</li></ul>
<li><a href="#Links">2.2 Links</a>
<ul>
<li><a href="#Symbolic-Links">2.2.1 Symbolic Links</a>
<li><a href="#Hard-Links">2.2.2 Hard Links</a>
</li></ul>
<li><a href="#Time">2.3 Time</a>
<ul>
<li><a href="#Age-Ranges">2.3.1 Age Ranges</a>
<li><a href="#Comparing-Timestamps">2.3.2 Comparing Timestamps</a>
</li></ul>
<li><a href="#Size">2.4 Size</a>
<li><a href="#Type">2.5 Type</a>
<li><a href="#Owner">2.6 Owner</a>
<li><a href="#Permissions">2.7 Permissions</a>
<li><a href="#Contents">2.8 Contents</a>
<li><a href="#Directories">2.9 Directories</a>
<li><a href="#Filesystems">2.10 Filesystems</a>
<li><a href="#Combining-Primaries-With-Operators">2.11 Combining Primaries With Operators</a>
</li></ul>
<li><a name="toc_Actions" href="#Actions">3 Actions</a>
<ul>
<li><a href="#Print-File-Name">3.1 Print File Name</a>
<li><a href="#Print-File-Information">3.2 Print File Information</a>
<ul>
<li><a href="#Escapes">3.2.1 Escapes</a>
<li><a href="#Format-Directives">3.2.2 Format Directives</a>
<ul>
<li><a href="#Name-Directives">3.2.2.1 Name Directives</a>
<li><a href="#Ownership-Directives">3.2.2.2 Ownership Directives</a>
<li><a href="#Size-Directives">3.2.2.3 Size Directives</a>
<li><a href="#Location-Directives">3.2.2.4 Location Directives</a>
<li><a href="#Time-Directives">3.2.2.5 Time Directives</a>
</li></ul>
<li><a href="#Time-Formats">3.2.3 Time Formats</a>
<ul>
<li><a href="#Time-Components">3.2.3.1 Time Components</a>
<li><a href="#Date-Components">3.2.3.2 Date Components</a>
<li><a href="#Combined-Time-Formats">3.2.3.3 Combined Time Formats</a>
<li><a href="#Formatting-Flags">3.2.3.4 Formatting Flags</a>
</li></ul>
</li></ul>
<li><a href="#Run-Commands">3.3 Run Commands</a>
<ul>
<li><a href="#Single-File">3.3.1 Single File</a>
<li><a href="#Multiple-Files">3.3.2 Multiple Files</a>
<ul>
<li><a href="#Unsafe-File-Name-Handling">3.3.2.1 Unsafe File Name Handling</a>
<li><a href="#Safe-File-Name-Handling">3.3.2.2 Safe File Name Handling</a>
<li><a href="#Limiting-Command-Size">3.3.2.3 Limiting Command Size</a>
<li><a href="#Interspersing-File-Names">3.3.2.4 Interspersing File Names</a>
</li></ul>
<li><a href="#Querying">3.3.3 Querying</a>
</li></ul>
<li><a href="#Delete-Files">3.4 Delete Files</a>
<li><a href="#Adding-Tests">3.5 Adding Tests</a>
</li></ul>
<li><a name="toc_Common-Tasks" href="#Common-Tasks">4 Common Tasks</a>
<ul>
<li><a href="#Viewing-And-Editing">4.1 Viewing And Editing</a>
<li><a href="#Archiving">4.2 Archiving</a>
<li><a href="#Cleaning-Up">4.3 Cleaning Up</a>
<li><a href="#Strange-File-Names">4.4 Strange File Names</a>
<li><a href="#Fixing-Permissions">4.5 Fixing Permissions</a>
<li><a href="#Classifying-Files">4.6 Classifying Files</a>
</li></ul>
<li><a name="toc_Databases" href="#Databases">5 File Name Databases</a>
<ul>
<li><a href="#Database-Locations">5.1 Database Locations</a>
<li><a href="#Database-Formats">5.2 Database Formats</a>
<ul>
<li><a href="#New-Database-Format">5.2.1 New Database Format</a>
<li><a href="#Sample-Database">5.2.2 Sample Database</a>
<li><a href="#Old-Database-Format">5.2.3 Old Database Format</a>
</li></ul>
<li><a href="#Newline-Handling">5.3 Newline Handling</a>
</li></ul>
<li><a name="toc_File-Permissions" href="#File-Permissions">6 File Permissions</a>
<ul>
<li><a href="#Mode-Structure">6.1 Structure of File Permissions</a>
<li><a href="#Symbolic-Modes">6.2 Symbolic Modes</a>
<ul>
<li><a href="#Setting-Permissions">6.2.1 Setting Permissions</a>
<li><a href="#Copying-Permissions">6.2.2 Copying Existing Permissions</a>
<li><a href="#Changing-Special-Permissions">6.2.3 Changing Special Permissions</a>
<li><a href="#Conditional-Executability">6.2.4 Conditional Executability</a>
<li><a href="#Multiple-Changes">6.2.5 Making Multiple Changes</a>
<li><a href="#Umask-and-Protection">6.2.6 The Umask and Protection</a>
</li></ul>
<li><a href="#Numeric-Modes">6.3 Numeric Modes</a>
</li></ul>
<li><a name="toc_Reference" href="#Reference">7 Reference</a>
<ul>
<li><a href="#Invoking-find">7.1 Invoking <code>find</code></a>
<ul>
<li><a href="#Warning-Messages">7.1.1 Warning Messages</a>
</li></ul>
<li><a href="#Invoking-locate">7.2 Invoking <code>locate</code></a>
<li><a href="#Invoking-updatedb">7.3 Invoking <code>updatedb</code></a>
<li><a href="#Invoking-xargs">7.4 Invoking <code>xargs</code></a>
</li></ul>
<li><a name="toc_Security-Considerations" href="#Security-Considerations">8 Security Considerations</a>
<ul>
<li><a href="#Levels-of-Risk">8.1 Levels of Risk</a>
<li><a href="#Security-Considerations-for-find">8.2 Security Considerations for find</a>
<ul>
<li><a href="#Changing-the-Current-Working-Directory">8.2.1 Changing the Current Working Directory</a>
<ul>
<li><a href="#O_005fNOFOLLOW">8.2.1.1 O_NOFOLLOW</a>
<li><a href="#Systems-without-O_005fNOFOLLOW">8.2.1.2 Systems without O_NOFOLLOW</a>
<li><a href="#Working-with-automounters">8.2.1.3 Working with automounters</a>
<li><a href="#Problems-with-dead-NFS-servers">8.2.1.4 Problems with dead NFS servers</a>
</li></ul>
<li><a href="#Race-Conditions-with-_002dexec">8.2.2 Race Conditions with -exec</a>
<li><a href="#Race-Conditions-with-_002dprint-and-_002dprint0">8.2.3 Race Conditions with -print and -print0</a>
</li></ul>
<li><a href="#Security-Considerations-for-xargs">8.3 Security Considerations for <code>xargs</code></a>
<li><a href="#Security-Considerations-for-locate">8.4 Security Considerations for <code>locate</code></a>
<li><a href="#Security-Summary">8.5 Summary</a>
</li></ul>
<li><a name="toc_Error-Messages" href="#Error-Messages">9 Error Messages</a>
<ul>
<li><a href="#Error-Messages-From-find">9.1 Error Messages From find</a>
<li><a href="#Error-Messages-From-xargs">9.2 Error Messages From xargs</a>
<li><a href="#Error-Messages-From-locate">9.3 Error Messages From locate</a>
<li><a href="#Error-Messages-From-updatedb">9.4 Error Messages From updatedb</a>
</li></ul>
<li><a name="toc_Primary-Index" href="#Primary-Index"><code>find</code> Primary Index</a>
</li></ul>
</div>



<div class="node">
<p><hr>
<a name="Top"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Introduction">Introduction</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#dir">(dir)</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<p>This file documents the GNU utilities for finding files that match
certain criteria and performing various actions on them. 
This is edition 4.2.20, for <code>find</code> version 4.2.20.

<!-- The master menu, created with texinfo-master-menu, goes here. -->
<ul class="menu">
<li><a accesskey="1" href="#Introduction">Introduction</a>:                 Summary of the tasks this manual describes. 
<li><a accesskey="2" href="#Finding-Files">Finding Files</a>:                Finding files that match certain criteria. 
<li><a accesskey="3" href="#Actions">Actions</a>:                      Doing things to files you have found. 
<li><a accesskey="4" href="#Common-Tasks">Common Tasks</a>:                 Solutions to common real-world problems. 
<li><a accesskey="5" href="#Databases">Databases</a>:                    Maintaining file name databases. 
<li><a accesskey="6" href="#File-Permissions">File Permissions</a>:             How to control access to files. 
<li><a accesskey="7" href="#Reference">Reference</a>:                    Summary of how to invoke the programs. 
<li><a accesskey="8" href="#Security-Considerations">Security Considerations</a>:      Security issues relating to findutils. 
<li><a accesskey="9" href="#Error-Messages">Error Messages</a>:               Explanations of some messages you might see. 
<li><a href="#Primary-Index">Primary Index</a>:                The components of <code>find</code> expressions. 
</ul>

<div class="node">
<p><hr>
<a name="Introduction"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Finding-Files">Finding Files</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Top">Top</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">1 Introduction</h2>

<p>This manual shows how to find files that meet criteria you specify, and
how to perform various actions on the files that you find.  The
principal programs that you use to perform these tasks are <code>find</code>,
<code>locate</code>, and <code>xargs</code>.  Some of the examples in this manual
use capabilities specific to the GNU versions of those programs.

   <p>GNU <code>find</code> was originally written by Eric Decker, with enhancements
by David MacKenzie, Jay Plett, and Tim Wood.  GNU <code>xargs</code> was
originally written by Mike Rendell, with enhancements by David
MacKenzie.  GNU <code>locate</code> and its associated utilities were
originally written by James Woods, with enhancements by David MacKenzie. 
The idea for <span class="samp">find -print0</span> and <span class="samp">xargs -0</span> came from Dan
Bernstein.  The current maintainer of GNU findutils (and this manual) is
James Youngman.  Many other people have contributed bug fixes, small
improvements, and helpful suggestions.  Thanks!

   <p>Mail suggestions and bug reports for these programs to
<code>bug-findutils@gnu.org</code>.  Please include the version
number, which you can get by running <span class="samp">find --version</span>.

<ul class="menu">
<li><a accesskey="1" href="#Scope">Scope</a>
<li><a accesskey="2" href="#Overview">Overview</a>
<li><a accesskey="3" href="#find-Expressions">find Expressions</a>
</ul>

<div class="node">
<p><hr>
<a name="Scope"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Overview">Overview</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Introduction">Introduction</a>
<br>
</div>

<h3 class="section">1.1 Scope</h3>

<p>For brevity, the word <dfn>file</dfn> in this manual means a regular file, a
directory, a symbolic link, or any other kind of node that has a
directory entry.  A directory entry is also called a <dfn>file name</dfn>.  A
file name may contain some, all, or none of the directories in a path
that leads to the file.  These are all examples of what this manual
calls &ldquo;file names&rdquo;:

<pre class="example">     parser.c
     README
     ./budget/may-94.sc
     fred/.cshrc
     /usr/local/include/termcap.h
</pre>
   <p>A <dfn>directory tree</dfn> is a directory and the files it contains, all of
its subdirectories and the files they contain, etc.  It can also be a
single non-directory file.

   <p>These programs enable you to find the files in one or more directory
trees that:

     <ul>
<li>have names that contain certain text or match a certain pattern;
<li>are links to certain files;
<li>were last used during a certain period of time;
<li>are within a certain size range;
<li>are of a certain type (regular file, directory, symbolic link, etc.);
<li>are owned by a certain user or group;
<li>have certain access permissions;
<li>contain text that matches a certain pattern;
<li>are within a certain depth in the directory tree;
<li>or some combination of the above. 
</ul>

   <p>Once you have found the files you're looking for (or files that are
potentially the ones you're looking for), you can do more to them than
simply list their names.  You can get any combination of the files'
attributes, or process the files in many ways, either individually or in
groups of various sizes.  Actions that you might want to perform on the
files you have found include, but are not limited to:

     <ul>
<li>view or edit
<li>store in an archive
<li>remove or rename
<li>change access permissions
<li>classify into groups
</ul>

   <p>This manual describes how to perform each of those tasks, and more.

<div class="node">
<p><hr>
<a name="Overview"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#find-Expressions">find Expressions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Scope">Scope</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Introduction">Introduction</a>
<br>
</div>

<h3 class="section">1.2 Overview</h3>

<p>The principal programs used for making lists of files that match given
criteria and running commands on them are <code>find</code>, <code>locate</code>,
and <code>xargs</code>.  An additional command, <code>updatedb</code>, is used by
system administrators to create databases for <code>locate</code> to use.

   <p><code>find</code> searches for files in a directory hierarchy and prints
information about the files it found.  It is run like this:

<pre class="example">     find <span class="roman">[</span><var>file</var>...<span class="roman">]</span> <span class="roman">[</span><var>expression</var><span class="roman">]</span>
</pre>
   <p class="noindent">Here is a typical use of <code>find</code>.  This example prints the names of
all files in the directory tree rooted in <span class="file">/usr/src</span> whose name
ends with <span class="samp">.c</span> and that are larger than 100 Kilobytes.
<pre class="example">     find /usr/src -name '*.c' -size +100k -print
</pre>
   <p><code>locate</code> searches special file name databases for file names that
match patterns.  The system administrator runs the <code>updatedb</code>
program to create the databases.  <code>locate</code> is run like this:

<pre class="example">     locate <span class="roman">[</span><var>option</var>...<span class="roman">]</span> <var>pattern</var>...
</pre>
   <p class="noindent">This example prints the names of all files in the default file name
database whose name ends with <span class="samp">Makefile</span> or <span class="samp">makefile</span>.  Which
file names are stored in the database depends on how the system
administrator ran <code>updatedb</code>.
<pre class="example">     locate '*[Mm]akefile'
</pre>
   <p>The name <code>xargs</code>, pronounced EX-args, means &ldquo;combine arguments.&rdquo;
<code>xargs</code> builds and executes command lines by gathering together
arguments it reads on the standard input.  Most often, these arguments
are lists of file names generated by <code>find</code>.  <code>xargs</code> is run
like this:

<pre class="example">     xargs <span class="roman">[</span><var>option</var>...<span class="roman">]</span> <span class="roman">[</span><var>command</var> <span class="roman">[</span><var>initial-arguments</var><span class="roman">]</span><span class="roman">]</span>
</pre>
   <p class="noindent">The following command searches the files listed in the file
<span class="file">file-list</span> and prints all of the lines in them that contain the
word <span class="samp">typedef</span>.
<pre class="example">     xargs grep typedef &lt; file-list
</pre>
   <div class="node">
<p><hr>
<a name="find-Expressions"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Overview">Overview</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Introduction">Introduction</a>
<br>
</div>

<h3 class="section">1.3 <code>find</code> Expressions</h3>

<p>The expression that <code>find</code> uses to select files consists of one or
more <dfn>primaries</dfn>, each of which is a separate command line argument
to <code>find</code>.  <code>find</code> evaluates the expression each time it
processes a file.  An expression can contain any of the following types
of primaries:

     <dl>
<dt><dfn>options</dfn><dd>affect overall operation rather than the processing of a specific file;
<br><dt><dfn>tests</dfn><dd>return a true or false value, depending on the file's attributes;
<br><dt><dfn>actions</dfn><dd>have side effects and return a true or false value; and
<br><dt><dfn>operators</dfn><dd>connect the other arguments and affect when and whether they are
evaluated. 
</dl>

   <p>You can omit the operator between two primaries; it defaults to
<span class="samp">-and</span>.  See <a href="#Combining-Primaries-With-Operators">Combining Primaries With Operators</a>, for ways to
connect primaries into more complex expressions.  If the expression
contains no actions other than <span class="samp">-prune</span>, <span class="samp">-print</span> is performed
on all files for which the entire expression is true (see <a href="#Print-File-Name">Print File Name</a>).

   <p>Options take effect immediately, rather than being evaluated for each
file when their place in the expression is reached.  Therefore, for
clarity, it is best to place them at the beginning of the expression.

   <p>Many of the primaries take arguments, which immediately follow them in
the next command line argument to <code>find</code>.  Some arguments are file
names, patterns, or other strings; others are numbers.  Numeric
arguments can be specified as

     <dl>
<dt><code>+</code><var>n</var><dd>for greater than <var>n</var>,
<br><dt><code>-</code><var>n</var><dd>for less than <var>n</var>,
<br><dt><var>n</var><dd>for exactly <var>n</var>. 
</dl>

<div class="node">
<p><hr>
<a name="Finding-Files"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Actions">Actions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Introduction">Introduction</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">2 Finding Files</h2>

<p>By default, <code>find</code> prints to the standard output the names of the
files that match the given criteria.  See <a href="#Actions">Actions</a>, for how to get more
information about the matching files.

<ul class="menu">
<li><a accesskey="1" href="#Name">Name</a>
<li><a accesskey="2" href="#Links">Links</a>
<li><a accesskey="3" href="#Time">Time</a>
<li><a accesskey="4" href="#Size">Size</a>
<li><a accesskey="5" href="#Type">Type</a>
<li><a accesskey="6" href="#Owner">Owner</a>
<li><a accesskey="7" href="#Permissions">Permissions</a>
<li><a accesskey="8" href="#Contents">Contents</a>
<li><a accesskey="9" href="#Directories">Directories</a>
<li><a href="#Filesystems">Filesystems</a>
<li><a href="#Combining-Primaries-With-Operators">Combining Primaries With Operators</a>
</ul>

<div class="node">
<p><hr>
<a name="Name"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Links">Links</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Finding-Files">Finding Files</a>
<br>
</div>

<h3 class="section">2.1 Name</h3>

<p>Here are ways to search for files whose name matches a certain pattern. 
See <a href="#Shell-Pattern-Matching">Shell Pattern Matching</a>, for a description of the <var>pattern</var>
arguments to these tests.

   <p>Each of these tests has a case-sensitive version and a case-insensitive
version, whose name begins with <span class="samp">i</span>.  In a case-insensitive
comparison, the patterns <span class="samp">fo*</span> and <span class="samp">F??</span> match the file names
<span class="file">Foo</span>, <span class="samp">FOO</span>, <span class="samp">foo</span>, <span class="samp">fOo</span>, etc.

<ul class="menu">
<li><a accesskey="1" href="#Base-Name-Patterns">Base Name Patterns</a>
<li><a accesskey="2" href="#Full-Name-Patterns">Full Name Patterns</a>
<li><a accesskey="3" href="#Fast-Full-Name-Search">Fast Full Name Search</a>
<li><a accesskey="4" href="#Shell-Pattern-Matching">Shell Pattern Matching</a>:       Wildcards used by these programs. 
</ul>

<div class="node">
<p><hr>
<a name="Base-Name-Patterns"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Full-Name-Patterns">Full Name Patterns</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Name">Name</a>
<br>
</div>

<h4 class="subsection">2.1.1 Base Name Patterns</h4>

<div class="defun">
&mdash; Test: <b>-name</b><var> pattern<a name="index-_002dname-1"></a></var><br>
&mdash; Test: <b>-iname</b><var> pattern<a name="index-_002diname-2"></a></var><br>
<blockquote><p>True if the base of the file name (the path with the leading directories
removed) matches shell pattern <var>pattern</var>.  For <span class="samp">-iname</span>, the
match is case-insensitive.  To ignore a whole directory tree, use
<span class="samp">-prune</span> (see <a href="#Directories">Directories</a>).  As an example, to find Texinfo
source files in <span class="file">/usr/local/doc</span>:

     <pre class="example">          find /usr/local/doc -name '*.texi'
     </pre>
        </blockquote></div>

   <p>Patterns for <span class="samp">-name</span> and <span class="samp">-iname</span> will match a filename with
a leading <span class="samp">.</span>.  For example the command <span class="samp">find /tmp -name
\*bar</span> will match the file <span class="file">/tmp/.foobar</span>.

<div class="node">
<p><hr>
<a name="Full-Name-Patterns"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Fast-Full-Name-Search">Fast Full Name Search</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Base-Name-Patterns">Base Name Patterns</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Name">Name</a>
<br>
</div>

<h4 class="subsection">2.1.2 Full Name Patterns</h4>

<div class="defun">
&mdash; Test: <b>-wholename</b><var> pattern<a name="index-_002dwholename-3"></a></var><br>
&mdash; Test: <b>-iwholename</b><var> pattern<a name="index-_002diwholename-4"></a></var><br>
<blockquote><p>True if the entire file name, starting with the command line argument
under which the file was found, matches shell pattern <var>pattern</var>. 
For <span class="samp">-iwholename</span>, the match is case-insensitive.  To ignore a
whole directory tree, use <span class="samp">-prune</span> rather than checking every
file in the tree (see <a href="#Directories">Directories</a>).  The &ldquo;entire file name&rdquo; as
used by find starts with the starting-point specified on the command
line, and is not converted to an absolute pathname, so for example
<code>cd /; find tmp -wholename /tmp</code> will never match anything. 
</p></blockquote></div>

<div class="defun">
&mdash; Test: <b>-path</b><var> pattern<a name="index-_002dpath-5"></a></var><br>
&mdash; Test: <b>-ipath</b><var> pattern<a name="index-_002dipath-6"></a></var><br>
<blockquote><p>These tests are deprecated, but work as for <span class="samp">-wholename</span> and <span class="samp">-iwholename</span>,
respectively.  The <span class="samp">-ipath</span> test is a GNU extension, but <span class="samp">-path</span> is also
provided by HP-UX <code>find</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Test: <b>-regex</b><var> expr<a name="index-_002dregex-7"></a></var><br>
&mdash; Test: <b>-iregex</b><var> expr<a name="index-_002diregex-8"></a></var><br>
<blockquote><p>True if the entire file name matches regular expression <var>expr</var>. 
This is a match on the whole path, not a search.  For example, to match
a file named <span class="file">./fubar3</span>, you can use the regular expression
<span class="samp">.*bar.</span> or <span class="samp">.*b.*3</span>, but not <span class="samp">f.*r3</span>.  See <a href="emacs.html#Regexps">Syntax of Regular Expressions (The GNU Emacs Manual)</a>, for a
description of the syntax of regular expressions.  For <span class="samp">-iregex</span>,
the match is case-insensitive. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Fast-Full-Name-Search"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Shell-Pattern-Matching">Shell Pattern Matching</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Full-Name-Patterns">Full Name Patterns</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Name">Name</a>
<br>
</div>

<h4 class="subsection">2.1.3 Fast Full Name Search</h4>

<p>To search for files by name without having to actually scan the
directories on the disk (which can be slow), you can use the
<code>locate</code> program.  For each shell pattern you give it,
<code>locate</code> searches one or more databases of file names and displays
the file names that contain the pattern.  See <a href="#Shell-Pattern-Matching">Shell Pattern Matching</a>,
for details about shell patterns.

   <p>If a pattern is a plain string&mdash;it contains no
metacharacters&mdash;<code>locate</code> displays all file names in the database
that contain that string.  If a pattern contains
metacharacters, <code>locate</code> only displays file names that match the
pattern exactly.  As a result, patterns that contain metacharacters
should usually begin with a <span class="samp">*</span>, and will most often end with one
as well.  The exceptions are patterns that are intended to explicitly
match the beginning or end of a file name.

   <p>If you only want <code>locate</code> to match against the last component of
the filenames (the &ldquo;base name&rdquo; of the files) you can use the
<span class="samp">--basename</span> option.  The opposite behaviour is the default, but
can be selected explicitly by using the option <span class="samp">--wholename</span>.

   <p>The command
<pre class="example">     locate <var>pattern</var>
</pre>
   <p>is almost equivalent to
<pre class="example">     find <var>directories</var> -name <var>pattern</var>
</pre>
   <p>where <var>directories</var> are the directories for which the file name
databases contain information.  The differences are that the
<code>locate</code> information might be out of date, and that <code>locate</code>
handles wildcards in the pattern slightly differently than <code>find</code>
(see <a href="#Shell-Pattern-Matching">Shell Pattern Matching</a>).

   <p>The file name databases contain lists of files that were on the system
when the databases were last updated.  The system administrator can
choose the file name of the default database, the frequency with which
the databases are updated, and the directories for which they contain
entries.

   <p>Here is how to select which file name databases <code>locate</code> searches. 
The default is system-dependent.

     <dl>
<dt><code>--database=</code><var>path</var><dt><code>-d </code><var>path</var><dd>Instead of searching the default file name database, search the file
name databases in <var>path</var>, which is a colon-separated list of
database file names.  You can also use the environment variable
<code>LOCATE_PATH</code> to set the list of database files to search.  The
option overrides the environment variable if both are used. 
</dl>

<div class="node">
<p><hr>
<a name="Shell-Pattern-Matching"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Fast-Full-Name-Search">Fast Full Name Search</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Name">Name</a>
<br>
</div>

<h4 class="subsection">2.1.4 Shell Pattern Matching</h4>

<p><code>find</code> and <code>locate</code> can compare file names, or parts of file
names, to shell patterns.  A <dfn>shell pattern</dfn> is a string that may
contain the following special characters, which are known as
<dfn>wildcards</dfn> or <dfn>metacharacters</dfn>.

   <p>You must quote patterns that contain metacharacters to prevent the shell
from expanding them itself.  Double and single quotes both work; so does
escaping with a backslash.

     <dl>
<dt><code>*</code><dd>Matches any zero or more characters.

     <br><dt><code>?</code><dd>Matches any one character.

     <br><dt><code>[</code><var>string</var><code>]</code><dd>Matches exactly one character that is a member of the string
<var>string</var>.  This is called a <dfn>character class</dfn>.  As a shorthand,
<var>string</var> may contain ranges, which consist of two characters with a
dash between them.  For example, the class <span class="samp">[a-z0-9_]</span> matches a
lowercase letter, a number, or an underscore.  You can negate a class by
placing a <span class="samp">!</span> or <span class="samp">^</span> immediately after the opening bracket. 
Thus, <span class="samp">[^A-Z@]</span> matches any character except an uppercase letter
or an at sign.

     <br><dt><code>\</code><dd>Removes the special meaning of the character that follows it.  This
works even in character classes. 
</dl>

   <p>In the <code>find</code> tests that do shell pattern matching (<span class="samp">-name</span>,
<span class="samp">-wholename</span>, etc.), wildcards in the pattern will match a <span class="samp">.</span>
at the beginning of a file name.  This is also the case for
<code>locate</code>.  Thus, <span class="samp">find -name '*macs'</span> will match a file
named <span class="file">.emacs</span>, as will <span class="samp">locate '*macs'</span>.

   <p>Slash characters have no special significance in the shell pattern
matching that <code>find</code> and <code>locate</code> do, unlike in the shell, in
which wildcards do not match them.  Therefore, a pattern <span class="samp">foo*bar</span>
can match a file name <span class="samp">foo3/bar</span>, and a pattern <span class="samp">./sr*sc</span> can
match a file name <span class="samp">./src/misc</span>.

   <p>If you want to locate some files with the <span class="samp">locate</span> command but
don't need to see the full list you can use the <span class="samp">--limit</span> option
to see just a small number of results, or the <span class="samp">--count</span> option to
display only the total number of matches.

<div class="node">
<p><hr>
<a name="Links"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Time">Time</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Name">Name</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Finding-Files">Finding Files</a>
<br>
</div>

<h3 class="section">2.2 Links</h3>

<p>There are two ways that files can be linked together.  <dfn>Symbolic
links</dfn> are a special type of file whose contents are a portion of the
name of another file.  <dfn>Hard links</dfn> are multiple directory entries
for one file; the file names all have the same index node (<dfn>inode</dfn>)
number on the disk.

<ul class="menu">
<li><a accesskey="1" href="#Symbolic-Links">Symbolic Links</a>
<li><a accesskey="2" href="#Hard-Links">Hard Links</a>
</ul>

<div class="node">
<p><hr>
<a name="Symbolic-Links"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Hard-Links">Hard Links</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Links">Links</a>
<br>
</div>

<h4 class="subsection">2.2.1 Symbolic Links</h4>

<p>Symbolic links are names that reference other files.  GNU <code>find</code>
will handle symbolic links in one of two ways; firstly, it can
dereference the links for you - this means that if it comes across a
symbolic link, it examines the file that the link points to, in order
to see if it matches the criteria you have specified.  Secondly, it
can check the link itself in case you might be looking for the actual
link.  If the file that the symbolic link points to is also within the
directory hierarchy you are searching with the <code>find</code> command,
you may not see a great deal of difference between these two
alternatives.

   <p>By default, <code>find</code> examines symbolic links themselves when it
finds them (and, if it later comes across the linked-to file, it will
examine that, too).  If you would prefer <code>find</code> to dereference
the links and examine the file that each link points to, specify the
<span class="samp">-L</span> option to <code>find</code>.  You can explicitly specify the
default behaviour by using the <span class="samp">-P</span> option.    The <span class="samp">-H</span>
option is a half-way-between option which ensures that any symbolic
links listed on the command line are dereferenced, but other symbolic
links are not.

   <p>Symbolic links are different to &ldquo;hard links&rdquo; in the sense that you
need permissions upon the linked-to file in order to be able to
dereference the link.  This can mean that even if you specify the
<span class="samp">-L</span> option, find may not be able to determine the properties of
the file that the link points to (because you don't have sufficient
permissions).  In this situation, <span class="samp">find</span> uses the properties of
the link itself.  This also occurs if a symbolic link exists but
points to a file that is missing.

   <p>The options controlling the behaviour of <code>find</code> with respect to
links are as follows :-

     <dl>
<dt><span class="samp">-P</span><dd><code>find</code> does not dereference symbolic links at all.  This is the
default behaviour.  This option must be specified before any of the
path names on the command line. 
<br><dt><span class="samp">-H</span><dd><code>find</code> does not dereference symbolic links (except in the case of
file names on the command line, which are dereferenced).  If a
symbolic link cannot be dereferenced, the information for the symbolic
link itself is used.  This option must be specified before any of the
path names on the command line. 
<br><dt><span class="samp">-L</span><dd><code>find</code> dereferences symbolic links where possible, and where this
is not possible it uses the properties of the symbolic link itself. 
This option must be specified before any of the path names on the
command line.  Use of this option also implies the same behaviour as
the <span class="samp">-noleaf</span> option.   If you later use the <span class="samp">-H</span> or
<span class="samp">-P</span> options, this does not turn off <span class="samp">-noleaf</span>.

     <br><dt><span class="samp">-follow</span><dd>This option forms part of the &ldquo;expression&rdquo; and must be specified
after the path names, but it is otherwise equivalent to <span class="samp">-L</span>. 
</dl>

   <p>The following differences in behavior occur when the <span class="samp">-L</span> option
is used:

     <ul>
<li><code>find</code> follows symbolic links to directories when searching
directory trees. 
<li><span class="samp">-lname</span> and <span class="samp">-ilname</span> always return false (unless they
happen to match broken symbolic links). 
<li><span class="samp">-type</span> reports the types of the files that symbolic links point
to. 
<li>Implies <span class="samp">-noleaf</span> (see <a href="#Directories">Directories</a>). 
</ul>

   <p>If the <span class="samp">-L</span> option or the <span class="samp">-H</span> option is used,
the filenames used as arguments to <span class="samp">-newer</span>, <span class="samp">-anewer</span>, and
<span class="samp">-cnewer</span> are dereferenced and the timestamp from the pointed-to
file is used instead (if possible &ndash; otherwise the timestamp from the
symbolic link is used).

<div class="defun">
&mdash; Test: <b>-lname</b><var> pattern<a name="index-_002dlname-9"></a></var><br>
&mdash; Test: <b>-ilname</b><var> pattern<a name="index-_002dilname-10"></a></var><br>
<blockquote><p>True if the file is a symbolic link whose contents match shell pattern
<var>pattern</var>.  For <span class="samp">-ilname</span>, the match is case-insensitive. 
See <a href="#Shell-Pattern-Matching">Shell Pattern Matching</a>, for details about the <var>pattern</var>
argument.  If the <span class="samp">-L</span> option is in effect, this test will always
fail for symbolic links unless they are broken.  So, to list any
symbolic links to <span class="file">sysdep.c</span> in the current directory and its
subdirectories, you can do:

     <pre class="example">          find . -lname '*sysdep.c'
     </pre>
        </blockquote></div>

<div class="node">
<p><hr>
<a name="Hard-Links"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Symbolic-Links">Symbolic Links</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Links">Links</a>
<br>
</div>

<h4 class="subsection">2.2.2 Hard Links</h4>

<p>Hard links allow more than one name to refer to the same file.  To
find all the names which refer to the same file as NAME, use
<span class="samp">-samefile NAME</span>.  If you are not using the <span class="samp">-L</span> option, you
can confine your search to one filesystem using the <span class="samp">-xdev</span>
option.  This is useful because hard links cannot point outside a
single filesystem, so this can cut down on needless searching.

   <p>If the <span class="samp">-L</span> option is in effect, and NAME is in fact a symbolic
link, the symbolic link will be dereferenced.  Hence you are searching
for other links (hard or symbolic) to the file pointed to by NAME.  If
<span class="samp">-L</span> is in effect but NAME is not itself a symbolic link, other
symbolic links to the file NAME will be matched.

   <p>You can also search for files by inode number.  This can occasionally
be useful in diagnosing problems with filesystems for example, because
<code>fsck</code> tends to print inode numbers.  Inode numbers also
occasionally turn up in log messages for some types of software, and
are used to support the <code>ftok()</code> library function.

   <p>You can learn a file's inode number and the number of links to it by
running <span class="samp">ls -li</span> or <span class="samp">find -ls</span>.

   <p>You can search for hard links to inode number NUM by using <span class="samp">-inum
NUM</span>. If there are any file system mount points below the directory
where you are starting the search, use the <span class="samp">-xdev</span> option unless
you are also using the <span class="samp">-L</span> option.  Using <span class="samp">-xdev</span> this
saves needless searching, since hard links to a file must be on the
same filesystem.  See <a href="#Filesystems">Filesystems</a>.

<div class="defun">
&mdash; Test: <b>-samefile</b><var> NAME<a name="index-_002dsamefile-11"></a></var><br>
<blockquote><p>File is a hard link to the same inode as NAME.  If the <span class="samp">-L</span>
option is in effect, symbolic links to the same file as NAME points to
are also matched. 
</p></blockquote></div>

<div class="defun">
&mdash; Test: <b>-inum</b><var> n<a name="index-_002dinum-12"></a></var><br>
<blockquote><p>File has inode number <var>n</var>.  The <span class="samp">+</span> and <span class="samp">-</span> qualifiers
also work, though these are rarely useful. 
</p></blockquote></div>

   <p>You can also search for files that have a certain number of links, with
<span class="samp">-links</span>.  Directories normally have at least two hard links; their
<span class="file">.</span> entry is the second one.  If they have subdirectories, each of
those also has a hard link called <span class="file">..</span> to its parent directory. 
The <span class="file">.</span> and <span class="file">..</span> directory entries are not normally searched
unless they are mentioned on the <code>find</code> command line.

<div class="defun">
&mdash; Test: <b>-links</b><var> n<a name="index-_002dlinks-13"></a></var><br>
<blockquote><p>File has <var>n</var> hard links. 
</p></blockquote></div>

<div class="defun">
&mdash; Test: <b>-links</b><var> +n<a name="index-_002dlinks-14"></a></var><br>
<blockquote><p>File has more than <var>n</var> hard links. 
</p></blockquote></div>

<div class="defun">
&mdash; Test: <b>-links</b><var> -n<a name="index-_002dlinks-15"></a></var><br>
<blockquote><p>File has fewer than <var>n</var> hard links. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Time"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Size">Size</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Links">Links</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Finding-Files">Finding Files</a>
<br>
</div>

<h3 class="section">2.3 Time</h3>

<p>Each file has three time stamps, which record the last time that certain
operations were performed on the file:

     <ol type=1 start=1>
<li>access (read the file's contents)
<li>change the status (modify the file or its attributes)
<li>modify (change the file's contents)
        </ol>

   <p>There is no timestamp that indicates when a file was <em>created</em>.

   <p>You can search for files whose time stamps are within a certain age
range, or compare them to other time stamps.

<ul class="menu">
<li><a accesskey="1" href="#Age-Ranges">Age Ranges</a>
<li><a accesskey="2" href="#Comparing-Timestamps">Comparing Timestamps</a>
</ul>

<div class="node">
<p><hr>
<a name="Age-Ranges"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Comparing-Timestamps">Comparing Timestamps</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Time">Time</a>
<br>
</div>

<h4 class="subsection">2.3.1 Age Ranges</h4>

<p>These tests are mainly useful with ranges (<span class="samp">+</span><var>n</var> and
<span class="samp">-</span><var>n</var>).

<div class="defun">
&mdash; Test: <b>-atime</b><var> n<a name="index-_002datime-16"></a></var><br>
&mdash; Test: <b>-ctime</b><var> n<a name="index-_002dctime-17"></a></var><br>
&mdash; Test: <b>-mtime</b><var> n<a name="index-_002dmtime-18"></a></var><br>
<blockquote><p>True if the file was last accessed (or its status changed, or it was
modified) <var>n</var>*24 hours ago.  The number of 24-hour periods since
the file's timestamp is always rounded down; therefore 0 means &ldquo;less
than 24 hours ago&rdquo;, 1 means &ldquo;between 24 and 48 hours ago&rdquo;, and so
forth. 
</p></blockquote></div>

<div class="defun">
&mdash; Test: <b>-amin</b><var> n<a name="index-_002damin-19"></a></var><br>
&mdash; Test: <b>-cmin</b><var> n<a name="index-_002dcmin-20"></a></var><br>
&mdash; Test: <b>-mmin</b><var> n<a name="index-_002dmmin-21"></a></var><br>
<blockquote><p>True if the file was last accessed (or its status changed, or it was
modified) <var>n</var> minutes ago.  These tests provide finer granularity of
measurement than <span class="samp">-atime</span> et al., but rounding is done in a
similar way.  For example, to list files in
<span class="file">/u/bill</span> that were last read from 2 to 6 minutes ago:

     <pre class="example">          find /u/bill -amin +2 -amin -6
     </pre>
        </blockquote></div>

<div class="defun">
&mdash; Option: <b>-daystart</b><var><a name="index-_002ddaystart-22"></a></var><br>
<blockquote><p>Measure times from the beginning of today rather than from 24 hours ago. 
So, to list the regular files in your home directory that were modified
yesterday, do

     <pre class="example">          find ~ -daystart -type f -mtime 1
     </pre>
        </blockquote></div>

   <p>The <span class="samp">-daystart</span> option is unlike most other options in that it
has an effect on the way that other tests are performed.  The affected
tests are <span class="samp">-amin</span>, <span class="samp">-cmin</span>, <span class="samp">-mmin</span>, <span class="samp">-atime</span>,
<span class="samp">-ctime</span> and <span class="samp">-mtime</span>.

<div class="node">
<p><hr>
<a name="Comparing-Timestamps"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Age-Ranges">Age Ranges</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Time">Time</a>
<br>
</div>

<h4 class="subsection">2.3.2 Comparing Timestamps</h4>

<p>As an alternative to comparing timestamps to the current time, you can
compare them to another file's timestamp.  That file's timestamp could
be updated by another program when some event occurs.  Or you could set
it to a particular fixed date using the <code>touch</code> command.  For
example, to list files in <span class="file">/usr</span> modified after February 1 of the
current year:

<!-- Idea from Rick Sladkey. -->
<pre class="example">     touch -t 02010000 /tmp/stamp$$
     find /usr -newer /tmp/stamp$$
     rm -f /tmp/stamp$$
</pre>
   <div class="defun">
&mdash; Test: <b>-anewer</b><var> file<a name="index-_002danewer-23"></a></var><br>
&mdash; Test: <b>-cnewer</b><var> file<a name="index-_002dcnewer-24"></a></var><br>
&mdash; Test: <b>-newer</b><var> file<a name="index-_002dnewer-25"></a></var><br>
<blockquote><p>True if the file was last accessed (or its status changed, or it was
modified) more recently than <var>file</var> was modified.  These tests are
affected by <span class="samp">-follow</span> only if <span class="samp">-follow</span> comes before them on
the command line.  See <a href="#Symbolic-Links">Symbolic Links</a>, for more information on
<span class="samp">-follow</span>.  As an example, to list any files modified since
<span class="file">/bin/sh</span> was last modified:

     <pre class="example">          find . -newer /bin/sh
     </pre>
        </blockquote></div>

<div class="defun">
&mdash; Test: <b>-used</b><var> n<a name="index-_002dused-26"></a></var><br>
<blockquote><p>True if the file was last accessed <var>n</var> days after its status was
last changed.  Useful for finding files that are not being used, and
could perhaps be archived or removed to save disk space. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Size"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Type">Type</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Time">Time</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Finding-Files">Finding Files</a>
<br>
</div>

<h3 class="section">2.4 Size</h3>

<div class="defun">
&mdash; Test: <b>-size</b><var> n</var><span class="roman">[</span><var>bckwMG</var><span class="roman">]</span><var><a name="index-_002dsize-27"></a></var><br>
<blockquote><p>True if the file uses <var>n</var> units of space, rounding up.  The units
are 512-byte blocks by default, but they can be changed by adding a
one-character suffix to <var>n</var>:

          <dl>
<dt><code>b</code><dd>512-byte blocks (never 1024)
<br><dt><code>c</code><dd>bytes
<br><dt><code>k</code><dd>kilobytes (1024 bytes)
<br><dt><code>w</code><dd>2-byte words
<br><dt><code>M</code><dd>Megabytes
<br><dt><code>G</code><dd>Gigabytes
</dl>

        <p>The `b' suffix always considers blocks to be 512 bytes.  This is not
affected by the setting (or non-setting) of the POSIXLY_CORRECT
environment variable.  This behaviour is different to the behaviour of
the <span class="samp">-ls</span> action).  If you want to use 1024-byte units, use the
`k' suffix instead.

        <p>The number can be prefixed with a `+' or a `-'.  A plus sign indicates
that the test should succeed if the file uses at least <var>n</var> units
of storage (this is the way I normally use this test) and a minus sign
indicates that the test should succeed if the file uses less than
<var>n</var> units of storage.   There is no `=' prefix, because that's the
default anyway.

        <p>The size does not count indirect blocks, but it does count blocks in
sparse files that are not actually allocated.  In other words, it's
consistent with the result you get for <span class="samp">ls -l</span> or <span class="samp">wc -c</span>. 
This handling of sparse files differs from the output of the <span class="samp">%k</span>
and <span class="samp">%b</span> format specifiers for the <span class="samp">-printf</span> predicate.

     </blockquote></div>

<div class="defun">
&mdash; Test: <b>-empty</b><var><a name="index-_002dempty-28"></a></var><br>
<blockquote><p>True if the file is empty and is either a regular file or a directory. 
This might make it a good candidate for deletion.  This test is useful
with <span class="samp">-depth</span> (see <a href="#Directories">Directories</a>) and <span class="samp">-delete</span>
(see <a href="#Single-File">Single File</a>). 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Type"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Owner">Owner</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Size">Size</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Finding-Files">Finding Files</a>
<br>
</div>

<h3 class="section">2.5 Type</h3>

<div class="defun">
&mdash; Test: <b>-type</b><var> c<a name="index-_002dtype-29"></a></var><br>
<blockquote><p>True if the file is of type <var>c</var>:

          <dl>
<dt><code>b</code><dd>block (buffered) special
<br><dt><code>c</code><dd>character (unbuffered) special
<br><dt><code>d</code><dd>directory
<br><dt><code>p</code><dd>named pipe (FIFO)
<br><dt><code>f</code><dd>regular file
<br><dt><code>l</code><dd>symbolic link
<br><dt><code>s</code><dd>socket
<br><dt><code>D</code><dd>door (Solaris)
</dl>
        </p></blockquote></div>

<div class="defun">
&mdash; Test: <b>-xtype</b><var> c<a name="index-_002dxtype-30"></a></var><br>
<blockquote><p>The same as <span class="samp">-type</span> unless the file is a symbolic link.  For
symbolic links: if <span class="samp">-follow</span> has not been given, true if the file
is a link to a file of type <var>c</var>; if <span class="samp">-follow</span> has been given,
true if <var>c</var> is <span class="samp">l</span>.  In other words, for symbolic links,
<span class="samp">-xtype</span> checks the type of the file that <span class="samp">-type</span> does not
check.  See <a href="#Symbolic-Links">Symbolic Links</a>, for more information on <span class="samp">-follow</span>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Owner"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Permissions">Permissions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Type">Type</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Finding-Files">Finding Files</a>
<br>
</div>

<h3 class="section">2.6 Owner</h3>

<div class="defun">
&mdash; Test: <b>-user</b><var> uname<a name="index-_002duser-31"></a></var><br>
&mdash; Test: <b>-group</b><var> gname<a name="index-_002dgroup-32"></a></var><br>
<blockquote><p>True if the file is owned by user <var>uname</var> (belongs to group <var>gname</var>). 
A numeric ID is allowed. 
</p></blockquote></div>

<div class="defun">
&mdash; Test: <b>-uid</b><var> n<a name="index-_002duid-33"></a></var><br>
&mdash; Test: <b>-gid</b><var> n<a name="index-_002dgid-34"></a></var><br>
<blockquote><p>True if the file's numeric user ID (group ID) is <var>n</var>.  These tests
support ranges (<span class="samp">+</span><var>n</var> and <span class="samp">-</span><var>n</var>), unlike
<span class="samp">-user</span> and <span class="samp">-group</span>. 
</p></blockquote></div>

<div class="defun">
&mdash; Test: <b>-nouser</b><var><a name="index-_002dnouser-35"></a></var><br>
&mdash; Test: <b>-nogroup</b><var><a name="index-_002dnogroup-36"></a></var><br>
<blockquote><p>True if no user corresponds to the file's numeric user ID (no group
corresponds to the numeric group ID).  These cases usually mean that the
files belonged to users who have since been removed from the system. 
You probably should change the ownership of such files to an existing
user or group, using the <code>chown</code> or <code>chgrp</code> program. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Permissions"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Contents">Contents</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Owner">Owner</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Finding-Files">Finding Files</a>
<br>
</div>

<h3 class="section">2.7 Permissions</h3>

<p>See <a href="#File-Permissions">File Permissions</a>, for information on how file permissions are
structured and how to specify them.

<div class="defun">
&mdash; Test: <b>-perm</b><var> mode<a name="index-_002dperm-37"></a></var><br>
<blockquote>
<p>True if the file's permissions are exactly <var>mode</var> (which can be
numeric or symbolic).

        <p>If <var>mode</var> starts with <span class="samp">-</span>, true if
<em>all</em> of the permissions set in <var>mode</var> are set for the file;
permissions not set in <var>mode</var> are ignored. 
If <var>mode</var> starts with <span class="samp">+</span>, true if
<em>any</em> of the permissions set in <var>mode</var> are set for the file;
permissions not set in <var>mode</var> are ignored.

        <p>If you don't use the <span class="samp">+</span> or <span class="samp">-</span> form with a symbolic mode
string, you may have to specify a rather complex mode string.  For
example <span class="samp">-perm g=w</span> will only match files which have mode 0020
(that is, ones for which group write permission is the only permission
set).  It is more likely that you will want to use the <span class="samp">+</span> or
<span class="samp">-</span> forms, for example <span class="samp">-perm -g=w</span>, which matches any file
with group write permission.

          <dl>
<dt><span class="samp">-perm 664</span><dd>Match files which have read and write permission for their owner,
and group, but which the rest of the world can read but not write to. 
Files which meet these criteria but have other permissions bits set
(for example if someone can execute the file) will not be matched.

          <br><dt><span class="samp">-perm -664</span><dd>Match files which have read and write permission for their owner,
and group, but which the rest of the world can read but not write to,
without regard to the presence of any extra permission bits (for
example the executable bit).  This will match a file which has mode
0777, for example.

          <br><dt><span class="samp">-perm +222</span><dd>Match files which are writeable by somebody (their owner, or
their group, or anybody else).

          <br><dt><span class="samp">-perm +022</span><dd>Match files which are writeable by either their owner or their
group.  The files don't have to be writeable by both the owner and
group to be matched; either will do.

          <br><dt><span class="samp">-perm +g+w,o+w</span><dd>As above.

          <br><dt><span class="samp">-perm +g=w,o=w</span><dd>As above

          <br><dt><span class="samp">-perm -022</span><dd>Search for files which are writeable by both their owner and their
group.

          <br><dt><span class="samp">-perm -g+w,o+w</span><dd>As above. 
</dl>
        </p></blockquote></div>

<div class="node">
<p><hr>
<a name="Contents"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Directories">Directories</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Permissions">Permissions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Finding-Files">Finding Files</a>
<br>
</div>

<h3 class="section">2.8 Contents</h3>

<p>To search for files based on their contents, you can use the <code>grep</code>
program.  For example, to find out which C source files in the current
directory contain the string <span class="samp">thing</span>, you can do:

<pre class="example">     grep -l thing *.[ch]
</pre>
   <p>If you also want to search for the string in files in subdirectories,
you can combine <code>grep</code> with <code>find</code> and <code>xargs</code>, like
this:

<pre class="example">     find . -name '*.[ch]' | xargs grep -l thing
</pre>
   <p>The <span class="samp">-l</span> option causes <code>grep</code> to print only the names of files
that contain the string, rather than the lines that contain it.  The
string argument (<span class="samp">thing</span>) is actually a regular expression, so it
can contain metacharacters.  This method can be refined a little by
using the <span class="samp">-r</span> option to make <code>xargs</code> not run <code>grep</code> if
<code>find</code> produces no output, and using the <code>find</code> action
<span class="samp">-print0</span> and the <code>xargs</code> option <span class="samp">-0</span> to avoid
misinterpreting files whose names contain spaces:

<pre class="example">     find . -name '*.[ch]' -print0 | xargs -r -0 grep -l thing
</pre>
   <p>For a fuller treatment of finding files whose contents match a pattern,
see the manual page for <code>grep</code>.

<div class="node">
<p><hr>
<a name="Directories"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Filesystems">Filesystems</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Contents">Contents</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Finding-Files">Finding Files</a>
<br>
</div>

<h3 class="section">2.9 Directories</h3>

<p>Here is how to control which directories <code>find</code> searches, and how
it searches them.  These two options allow you to process a horizontal
slice of a directory tree.

<div class="defun">
&mdash; Option: <b>-maxdepth</b><var> levels<a name="index-_002dmaxdepth-38"></a></var><br>
<blockquote><p>Descend at most <var>levels</var> (a non-negative integer) levels of
directories below the command line arguments.  <span class="samp">-maxdepth 0</span> means
only apply the tests and actions to the command line arguments. 
</p></blockquote></div>

<div class="defun">
&mdash; Option: <b>-mindepth</b><var> levels<a name="index-_002dmindepth-39"></a></var><br>
<blockquote><p>Do not apply any tests or actions at levels less than <var>levels</var> (a
non-negative integer).  <span class="samp">-mindepth 1</span> means process all files
except the command line arguments. 
</p></blockquote></div>

<div class="defun">
&mdash; Option: <b>-depth</b><var><a name="index-_002ddepth-40"></a></var><br>
<blockquote><p>Process each directory's contents before the directory itself.  Doing
this is a good idea when producing lists of files to archive with
<code>cpio</code> or <code>tar</code>.  If a directory does not have write
permission for its owner, its contents can still be restored from the
archive since the directory's permissions are restored after its contents. 
</p></blockquote></div>

<div class="defun">
&mdash; Option: <b>-d</b><var><a name="index-_002dd-41"></a></var><br>
<blockquote><p>This is a deprecated synonym for <span class="samp">-depth</span>, for compatibility with
Mac OS X, FreeBSD and OpenBSD.   The <span class="samp">-depth</span> option is a POSIX
feature, so it is better to use that. 
</p></blockquote></div>

<div class="defun">
&mdash; Action: <b>-prune</b><var><a name="index-_002dprune-42"></a></var><br>
<blockquote><p>If the file is a directory, do not descend into it.  The result is
true.  For example, to skip the directory <span class="file">src/emacs</span> and all
files and directories under it, and print the names of the other files
found:

     <pre class="example">          find . -wholename './src/emacs' -prune -o -print
     </pre>
        <p>The above command will not print <span class="file">./src/emacs</span> among its list of
results.  This however is not due to the effect of the <span class="samp">-prune</span>
action (which only prevents further descent, it doesn't make sure we
ignore that item).  Instead, this effect is due to the use of
<span class="samp">-o</span>.  Since the left hand side of the &ldquo;or&rdquo; condition has
succeeded for <span class="file">./src/emacs</span>, it is not necessary to evaluate the
right-hand-side (<span class="samp">-print</span>) at all for this particular file.  If
you wanted to print that directory name you could use either an extra
<span class="samp">-print</span> action:

     <pre class="example">          find . -wholename './src/emacs' -prune -print -o -print
     </pre>
        <p>or use the comma operator:

     <pre class="example">          find . -wholename './src/emacs' -prune , -print
     </pre>
        <p>If the <span class="samp">-depth</span> option is in effect, the subdirectories will have
already been visited in any case.  Hence <span class="samp">-prune</span> has no effect
and returns false. 
</p></blockquote></div>

<div class="defun">
&mdash; Action: <b>-quit</b><var><a name="index-_002dquit-43"></a></var><br>
<blockquote><p>Exit immediately (with return value zero if no errors have occurred). 
No child processes will be left running, but no more paths specified
on the command line will be processed.  For example, <code>find
/tmp/foo /tmp/bar -print -quit</code> will print only <span class="samp">/tmp/foo</span>. 
</p></blockquote></div>

<div class="defun">
&mdash; Option: <b>-noleaf</b><var><a name="index-_002dnoleaf-44"></a></var><br>
<blockquote><p>Do not optimize by assuming that directories contain 2 fewer
subdirectories than their hard link count.  This option is needed when
searching filesystems that do not follow the Unix directory-link
convention, such as CD-ROM or MS-DOS filesystems or AFS volume mount
points.  Each directory on a normal Unix filesystem has at least 2 hard
links: its name and its <span class="file">.</span>  entry.  Additionally, its
subdirectories (if any) each have a <span class="file">..</span>  entry linked to that
directory.  When <code>find</code> is examining a directory, after it has
statted 2 fewer subdirectories than the directory's link count, it knows
that the rest of the entries in the directory are non-directories
(<dfn>leaf</dfn> files in the directory tree).  If only the files' names need
to be examined, there is no need to stat them; this gives a significant
increase in search speed. 
</p></blockquote></div>

<div class="defun">
&mdash; Option: <b>-ignore_readdir_race</b><var><a name="index-_002dignore_005freaddir_005frace-45"></a></var><br>
<blockquote><p>If a file disappears after its name has been read from a directory but
before <code>find</code> gets around to examining the file with <code>stat</code>,
don't issue an error message.  If you don't specify this option, an
error message will be issued.  This option can be useful in system
scripts (cron scripts, for example) that examine areas of the
filesystem that change frequently (mail queues, temporary directories,
and so forth), because this scenario is common for those sorts of
directories.  Completely silencing error messages from <code>find</code> is
undesirable, so this option neatly solves the problem.  There is no
way to search one part of the filesystem with this option on and part
of it with this option off, though. 
</p></blockquote></div>

<div class="defun">
&mdash; Option: <b>-noignore_readdir_race</b><var><a name="index-_002dnoignore_005freaddir_005frace-46"></a></var><br>
<blockquote><p>This option reverses the effect of the <span class="samp">-ignore_readdir_race</span> option. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Filesystems"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Combining-Primaries-With-Operators">Combining Primaries With Operators</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Directories">Directories</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Finding-Files">Finding Files</a>
<br>
</div>

<h3 class="section">2.10 Filesystems</h3>

<p>A <dfn>filesystem</dfn> is a section of a disk, either on the local host or
mounted from a remote host over a network.  Searching network
filesystems can be slow, so it is common to make <code>find</code> avoid them.

   <p>There are two ways to avoid searching certain filesystems.  One way is
to tell <code>find</code> to only search one filesystem:

<div class="defun">
&mdash; Option: <b>-xdev</b><var><a name="index-_002dxdev-47"></a></var><br>
&mdash; Option: <b>-mount</b><var><a name="index-_002dmount-48"></a></var><br>
<blockquote><p>Don't descend directories on other filesystems.  These options are synonyms. 
</p></blockquote></div>

   <p>The other way is to check the type of filesystem each file is on, and
not descend directories that are on undesirable filesystem types:

<div class="defun">
&mdash; Test: <b>-fstype</b><var> type<a name="index-_002dfstype-49"></a></var><br>
<blockquote><p>True if the file is on a filesystem of type <var>type</var>.  The valid
filesystem types vary among different versions of Unix; an incomplete
list of filesystem types that are accepted on some version of Unix or
another is:
     <pre class="example">          ext2 ext3 proc sysfs ufs 4.2 4.3 nfs tmp mfs S51K S52K
     </pre>
        <p>You can use <span class="samp">-printf</span> with the <span class="samp">%F</span> directive to see the types
of your filesystems.  The <span class="samp">%D</span> directive shows the device number. 
See <a href="#Print-File-Information">Print File Information</a>.  <span class="samp">-fstype</span> is
usually used with <span class="samp">-prune</span> to avoid searching remote filesystems
(see <a href="#Directories">Directories</a>). 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Combining-Primaries-With-Operators"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Filesystems">Filesystems</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Finding-Files">Finding Files</a>
<br>
</div>

<h3 class="section">2.11 Combining Primaries With Operators</h3>

<p>Operators build a complex expression from tests and actions. 
The operators are, in order of decreasing precedence:

     <dl>
<dt><code>( </code><var>expr</var><code> )</code><dd><a name="index-_0028_0029-50"></a>Force precedence.  True if <var>expr</var> is true.

     <br><dt><code>! </code><var>expr</var><dt><code>-not </code><var>expr</var><dd><a name="index-_0021-51"></a><a name="index-_002dnot-52"></a>True if <var>expr</var> is false.

     <br><dt><var>expr1 expr2</var><dt><var>expr1</var><code> -a </code><var>expr2</var><dt><var>expr1</var><code> -and </code><var>expr2</var><dd><a name="index-_002da-53"></a><a name="index-_002dand-54"></a>And; <var>expr2</var> is not evaluated if <var>expr1</var> is false.

     <br><dt><var>expr1</var><code> -o </code><var>expr2</var><dt><var>expr1</var><code> -or </code><var>expr2</var><dd><a name="index-_002do-55"></a><a name="index-_002dor-56"></a>Or; <var>expr2</var> is not evaluated if <var>expr1</var> is true.

     <br><dt><var>expr1</var><code> , </code><var>expr2</var><dd><a name="index-_002c-57"></a>List; both <var>expr1</var> and <var>expr2</var> are always evaluated.  True if
<var>expr2</var> is true.  The value of <var>expr1</var> is discarded.  This
operator lets you do multiple independent operations on one traversal,
without depending on whether other operations succeeded.  The two
operations <var>expr1</var> and <var>expr2</var> are not always fully
independent, since <var>expr1</var> might have side effects like touching
or deleting files, or it might use <span class="samp">-prune</span> which would also
affect <var>expr2</var>. 
</dl>

   <p><code>find</code> searches the directory tree rooted at each file name by
evaluating the expression from left to right, according to the rules of
precedence, until the outcome is known (the left hand side is false for
<span class="samp">-and</span>, true for <span class="samp">-or</span>), at which point <code>find</code> moves on
to the next file name.

   <p>There are two other tests that can be useful in complex expressions:

<div class="defun">
&mdash; Test: <b>-true</b><var><a name="index-_002dtrue-58"></a></var><br>
<blockquote><p>Always true. 
</p></blockquote></div>

<div class="defun">
&mdash; Test: <b>-false</b><var><a name="index-_002dfalse-59"></a></var><br>
<blockquote><p>Always false. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Actions"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Common-Tasks">Common Tasks</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Finding-Files">Finding Files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">3 Actions</h2>

<p>There are several ways you can print information about the files that
match the criteria you gave in the <code>find</code> expression.  You can
print the information either to the standard output or to a file that
you name.  You can also execute commands that have the file names as
arguments.  You can use those commands as further filters to select files.

<ul class="menu">
<li><a accesskey="1" href="#Print-File-Name">Print File Name</a>
<li><a accesskey="2" href="#Print-File-Information">Print File Information</a>
<li><a accesskey="3" href="#Run-Commands">Run Commands</a>
<li><a accesskey="4" href="#Delete-Files">Delete Files</a>
<li><a accesskey="5" href="#Adding-Tests">Adding Tests</a>
</ul>

<div class="node">
<p><hr>
<a name="Print-File-Name"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Print-File-Information">Print File Information</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Actions">Actions</a>
<br>
</div>

<h3 class="section">3.1 Print File Name</h3>

<div class="defun">
&mdash; Action: <b>-print</b><var><a name="index-_002dprint-60"></a></var><br>
<blockquote><p>True; print the full file name on the standard output, followed by a
newline. 
</p></blockquote></div>

<div class="defun">
&mdash; Action: <b>-fprint</b><var> file<a name="index-_002dfprint-61"></a></var><br>
<blockquote><p>True; print the full file name into file <var>file</var>, followed by a
newline.  If <var>file</var> does not exist when <code>find</code> is run, it is
created; if it does exist, it is truncated to 0 bytes.  The file names
<span class="file">/dev/stdout</span> and <span class="file">/dev/stderr</span> are handled specially; they
refer to the standard output and standard error output, respectively. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Print-File-Information"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Run-Commands">Run Commands</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Print-File-Name">Print File Name</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Actions">Actions</a>
<br>
</div>

<h3 class="section">3.2 Print File Information</h3>

<div class="defun">
&mdash; Action: <b>-ls</b><var><a name="index-_002dls-62"></a></var><br>
<blockquote><p>True; list the current file in <span class="samp">ls -dils</span> format on the standard
output.  The output looks like this:

     <pre class="smallexample">          204744   17 -rw-r--r--   1 djm      staff       17337 Nov  2  1992 ./lwall-quotes
     </pre>
        <p>The fields are:

          <ol type=1 start=1>
<li>The inode number of the file.  See <a href="#Hard-Links">Hard Links</a>, for how to find files
based on their inode number.

          <li>the number of blocks in the file.  The block counts are of 1K blocks,
unless the environment variable <code>POSIXLY_CORRECT</code> is set, in which
case 512-byte blocks are used.  See <a href="#Size">Size</a>, for how to find files based
on their size.

          <li>The file's type and permissions.  The type is shown as a dash for a
regular file; for other file types, a letter like for <span class="samp">-type</span> is
used (see <a href="#Type">Type</a>).  The permissions are read, write, and execute for
the file's owner, its group, and other users, respectively; a dash means
the permission is not granted.  See <a href="#File-Permissions">File Permissions</a>, for more details
about file permissions.  See <a href="#Permissions">Permissions</a>, for how to find files based
on their permissions.

          <li>The number of hard links to the file.

          <li>The user who owns the file.

          <li>The file's group.

          <li>The file's size in bytes.

          <li>The date the file was last modified.

          <li>The file's name.  <span class="samp">-ls</span> quotes non-printable characters in the file
names using C-like backslash escapes.
             </ol>
</p></blockquote></div>

<div class="defun">
&mdash; Action: <b>-fls</b><var> file<a name="index-_002dfls-63"></a></var><br>
<blockquote><p>True; like <span class="samp">-ls</span> but write to <var>file</var> like <span class="samp">-fprint</span>
(see <a href="#Print-File-Name">Print File Name</a>). 
</p></blockquote></div>

<div class="defun">
&mdash; Action: <b>-printf</b><var> format<a name="index-_002dprintf-64"></a></var><br>
<blockquote><p>True; print <var>format</var> on the standard output, interpreting <span class="samp">\</span>
escapes and <span class="samp">%</span> directives.  Field widths and precisions can be
specified as with the <code>printf</code> C function.  Format flags (like
<span class="samp">#</span> for example) may not work as you expect because many of the
fields, even numeric ones, are printed with %s.  This means though
that the format flag <span class="samp">-</span> will work; it forces left-alignment of
the field.  Unlike <span class="samp">-print</span>, <span class="samp">-printf</span> does not add a
newline at the end of the string.  If you want a newline at the end of
the string, add a <span class="samp">\n</span>. 
</p></blockquote></div>

<div class="defun">
&mdash; Action: <b>-fprintf</b><var> file format<a name="index-_002dfprintf-65"></a></var><br>
<blockquote><p>True; like <span class="samp">-printf</span> but write to <var>file</var> like <span class="samp">-fprint</span>
(see <a href="#Print-File-Name">Print File Name</a>). 
</p></blockquote></div>

<ul class="menu">
<li><a accesskey="1" href="#Escapes">Escapes</a>
<li><a accesskey="2" href="#Format-Directives">Format Directives</a>
<li><a accesskey="3" href="#Time-Formats">Time Formats</a>
</ul>

<div class="node">
<p><hr>
<a name="Escapes"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Format-Directives">Format Directives</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Print-File-Information">Print File Information</a>
<br>
</div>

<h4 class="subsection">3.2.1 Escapes</h4>

<p>The escapes that <span class="samp">-printf</span> and <span class="samp">-fprintf</span> recognize are:

     <dl>
<dt><code>\a</code><dd>Alarm bell. 
<br><dt><code>\b</code><dd>Backspace. 
<br><dt><code>\c</code><dd>Stop printing from this format immediately and flush the output. 
<br><dt><code>\f</code><dd>Form feed. 
<br><dt><code>\n</code><dd>Newline. 
<br><dt><code>\r</code><dd>Carriage return. 
<br><dt><code>\t</code><dd>Horizontal tab. 
<br><dt><code>\v</code><dd>Vertical tab. 
<br><dt><code>\\</code><dd>A literal backslash (<span class="samp">\</span>). 
<br><dt><code>\NNN</code><dd>The character whose ASCII code is NNN (octal). 
</dl>

   <p>A <span class="samp">\</span> character followed by any other character is treated as an
ordinary character, so they both are printed, and a warning message is
printed to the standard error output (because it was probably a typo).

<div class="node">
<p><hr>
<a name="Format-Directives"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Time-Formats">Time Formats</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Escapes">Escapes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Print-File-Information">Print File Information</a>
<br>
</div>

<h4 class="subsection">3.2.2 Format Directives</h4>

<p><span class="samp">-printf</span> and <span class="samp">-fprintf</span> support the following format
directives to print information about the file being processed.  The C
<code>printf</code> function, field width and precision specifiers are
supported, as applied to string (%s) types. That is, you can specify
"minimum field width"."maximum field width" for each directive. 
Format flags (like <span class="samp">#</span> for example) may not work as you expect
because many of the fields, even numeric ones, are printed with %s. 
The format flag <span class="samp">-</span> does work; it forces left-alignment of the
field.

   <p><span class="samp">%%</span> is a literal percent sign.  A <span class="samp">%</span> character followed by
an unrecognised character (i.e. not a known directive or printf field
width and precision specifier), is discarded (but the unrecognised character
is printed), and a warning message is printed to the standard error output
(because it was probably a typo).

<ul class="menu">
<li><a accesskey="1" href="#Name-Directives">Name Directives</a>
<li><a accesskey="2" href="#Ownership-Directives">Ownership Directives</a>
<li><a accesskey="3" href="#Size-Directives">Size Directives</a>
<li><a accesskey="4" href="#Location-Directives">Location Directives</a>
<li><a accesskey="5" href="#Time-Directives">Time Directives</a>
<li><a accesskey="6" href="#Formatting-Flags">Formatting Flags</a>
</ul>

<div class="node">
<p><hr>
<a name="Name-Directives"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Ownership-Directives">Ownership Directives</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Format-Directives">Format Directives</a>
<br>
</div>

<h5 class="subsubsection">3.2.2.1 Name Directives</h5>

     <dl>
<dt><code>%p</code><dd><!-- supports %-X.Yp -->
File's name (not the absolute path name, but the name of the file as
it was encountered by find - that is, as a relative path from one of
the starting points). 
<br><dt><code>%f</code><dd>File's name with any leading directories removed (only the last element). 
<!-- supports %-X.Yf -->
<br><dt><code>%h</code><dd>Leading directories of file's name (all but the last element and the
slash before it).  If the file's name contains no slashes (for example
because it was named on the command line and is in the current working
directory), then &ldquo;%h&rdquo; expands to &ldquo;.&rdquo;.  This prevents &ldquo;%h/%f&rdquo;
expanding to &ldquo;/foo&rdquo;, which would be surprising and probably not
desirable. 
<!-- supports %-X.Yh -->
<br><dt><code>%P</code><dd>File's name with the name of the command line argument under which
it was found removed from the beginning. 
<!-- supports %-X.YP -->
<br><dt><code>%H</code><dd>Command line argument under which file was found. 
<!-- supports %-X.YH -->
</dl>

<div class="node">
<p><hr>
<a name="Ownership-Directives"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Size-Directives">Size Directives</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Name-Directives">Name Directives</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Format-Directives">Format Directives</a>
<br>
</div>

<h5 class="subsubsection">3.2.2.2 Ownership Directives</h5>

     <dl>
<dt><code>%g</code><dd><!-- supports %-X.Yg -->
File's group name, or numeric group ID if the group has no name. 
<br><dt><code>%G</code><dd><!-- supports %-X.Yg -->
<!-- TODO: Needs to support # flag and 0 flag -->
File's numeric group ID. 
<br><dt><code>%u</code><dd><!-- supports %-X.Yu -->
File's user name, or numeric user ID if the user has no name. 
<br><dt><code>%U</code><dd><!-- supports %-X.Yu -->
<!-- TODO: Needs to support # flag -->
File's numeric user ID. 
<br><dt><code>%m</code><dd><!-- full support, including # and 0. -->
File's permissions (in octal).   If you always want to have a leading
zero on the number, use the '#' format flag, for example '%#m'. 
</dl>

<div class="node">
<p><hr>
<a name="Size-Directives"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Location-Directives">Location Directives</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Ownership-Directives">Ownership Directives</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Format-Directives">Format Directives</a>
<br>
</div>

<h5 class="subsubsection">3.2.2.3 Size Directives</h5>

     <dl>
<dt><code>%k</code><dd>Amount of disk space occupied by the file, measured in 1K blocks
(rounded up).  This can be less than the length of the file if
it is a sparse file (that is, it has &ldquo;holes&rdquo;). 
<br><dt><code>%b</code><dd>File's size in 512-byte blocks (rounded up).  This also can be less
than the length of the file, if the file is sparse. 
<br><dt><code>%s</code><dd>File's size in bytes. 
</dl>

<div class="node">
<p><hr>
<a name="Location-Directives"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Time-Directives">Time Directives</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Size-Directives">Size Directives</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Format-Directives">Format Directives</a>
<br>
</div>

<h5 class="subsubsection">3.2.2.4 Location Directives</h5>

     <dl>
<dt><code>%d</code><dd>File's depth in the directory tree (depth below a file named on the
command line, not depth below the root directory).  Files named on the
command line have a depth of 0.  Subdirectories immediately below them
have a depth of 1, and so on. 
<br><dt><code>%D</code><dd>The device number on which the file exists (the <code>st_dev</code> field of
<code>struct stat</code>), in decimal. 
<br><dt><code>%F</code><dd>Type of the filesystem the file is on; this value can be used for
<span class="samp">-fstype</span> (see <a href="#Directories">Directories</a>). 
<br><dt><code>%l</code><dd>Object of symbolic link (empty string if file is not a symbolic link). 
<br><dt><code>%i</code><dd>File's inode number (in decimal). 
<br><dt><code>%n</code><dd>Number of hard links to file. 
<br><dt><code>%y</code><dd>Type of the file as used with <span class="samp">-type</span>.   If the file is a symbolic
link, <span class="samp">l</span> will be printed. 
<br><dt><code>%Y</code><dd>Type of the file as used with <span class="samp">-type</span>.   If the file is a symbolic
link, it is dereferenced.  If the file is a broken symbolic link,
<span class="samp">N</span> is printed.

</dl>

<div class="node">
<p><hr>
<a name="Time-Directives"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Formatting-Flags">Formatting Flags</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Location-Directives">Location Directives</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Format-Directives">Format Directives</a>
<br>
</div>

<h5 class="subsubsection">3.2.2.5 Time Directives</h5>

<p>Some of these directives use the C <code>ctime</code> function.  Its output
depends on the current locale, but it typically looks like

<pre class="example">     Wed Nov  2 00:42:36 1994
</pre>
     <dl>
<dt><code>%a</code><dd>File's last access time in the format returned by the C <code>ctime</code> function. 
<br><dt><code>%A</code><var>k</var><dd>File's last access time in the format specified by <var>k</var>
(see <a href="#Time-Formats">Time Formats</a>). 
<br><dt><code>%c</code><dd>File's last status change time in the format returned by the C <code>ctime</code>
function. 
<br><dt><code>%C</code><var>k</var><dd>File's last status change time in the format specified by <var>k</var>
(see <a href="#Time-Formats">Time Formats</a>). 
<br><dt><code>%t</code><dd>File's last modification time in the format returned by the C <code>ctime</code>
function. 
<br><dt><code>%T</code><var>k</var><dd>File's last modification time in the format specified by <var>k</var>
(see <a href="#Time-Formats">Time Formats</a>). 
</dl>

<div class="node">
<p><hr>
<a name="Time-Formats"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Format-Directives">Format Directives</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Print-File-Information">Print File Information</a>
<br>
</div>

<h4 class="subsection">3.2.3 Time Formats</h4>

<p>Below are the formats for the directives <span class="samp">%A</span>, <span class="samp">%C</span>, and
<span class="samp">%T</span>, which print the file's timestamps.  Some of these formats
might not be available on all systems, due to differences in the C
<code>strftime</code> function between systems.

<ul class="menu">
<li><a accesskey="1" href="#Time-Components">Time Components</a>
<li><a accesskey="2" href="#Date-Components">Date Components</a>
<li><a accesskey="3" href="#Combined-Time-Formats">Combined Time Formats</a>
</ul>

<div class="node">
<p><hr>
<a name="Time-Components"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Date-Components">Date Components</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Time-Formats">Time Formats</a>
<br>
</div>

<h5 class="subsubsection">3.2.3.1 Time Components</h5>

<p>The following format directives print single components of the time.

     <dl>
<dt><code>H</code><dd>hour (00..23)
<br><dt><code>I</code><dd>hour (01..12)
<br><dt><code>k</code><dd>hour ( 0..23)
<br><dt><code>l</code><dd>hour ( 1..12)
<br><dt><code>p</code><dd>locale's AM or PM
<br><dt><code>Z</code><dd>time zone (e.g., EDT), or nothing if no time zone is determinable
<br><dt><code>M</code><dd>minute (00..59)
<br><dt><code>S</code><dd>second (00..61)
<br><dt><code>@</code><dd>seconds since Jan. 1, 1970, 00:00 GMT. 
</dl>

<div class="node">
<p><hr>
<a name="Date-Components"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Combined-Time-Formats">Combined Time Formats</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Time-Components">Time Components</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Time-Formats">Time Formats</a>
<br>
</div>

<h5 class="subsubsection">3.2.3.2 Date Components</h5>

<p>The following format directives print single components of the date.

     <dl>
<dt><code>a</code><dd>locale's abbreviated weekday name (Sun..Sat)
<br><dt><code>A</code><dd>locale's full weekday name, variable length (Sunday..Saturday)
<br><dt><code>b</code><dt><code>h</code><dd>locale's abbreviated month name (Jan..Dec)
<br><dt><code>B</code><dd>locale's full month name, variable length (January..December)
<br><dt><code>m</code><dd>month (01..12)
<br><dt><code>d</code><dd>day of month (01..31)
<br><dt><code>w</code><dd>day of week (0..6)
<br><dt><code>j</code><dd>day of year (001..366)
<br><dt><code>U</code><dd>week number of year with Sunday as first day of week (00..53)
<br><dt><code>W</code><dd>week number of year with Monday as first day of week (00..53)
<br><dt><code>Y</code><dd>year (1970<small class="dots">...</small>)
<br><dt><code>y</code><dd>last two digits of year (00..99)
</dl>

<div class="node">
<p><hr>
<a name="Combined-Time-Formats"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Date-Components">Date Components</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Time-Formats">Time Formats</a>
<br>
</div>

<h5 class="subsubsection">3.2.3.3 Combined Time Formats</h5>

<p>The following format directives print combinations of time and date
components.

     <dl>
<dt><code>r</code><dd>time, 12-hour (hh:mm:ss [AP]M)
<br><dt><code>T</code><dd>time, 24-hour (hh:mm:ss)
<br><dt><code>X</code><dd>locale's time representation (H:M:S)
<br><dt><code>c</code><dd>locale's date and time (Sat Nov 04 12:02:33 EST 1989)
<br><dt><code>D</code><dd>date (mm/dd/yy)
<br><dt><code>x</code><dd>locale's date representation (mm/dd/yy)
<br><dt><code>+</code><dd>Date and time, separated by '+', for example `2004-04-28+22:22:05'. 
The time is given in the current timezone (which may be affected by
setting the TZ environment variable).  This is a GNU extension. 
</dl>

<div class="node">
<p><hr>
<a name="Formatting-Flags"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Time-Directives">Time Directives</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Format-Directives">Format Directives</a>
<br>
</div>

<h5 class="subsubsection">3.2.3.4 Formatting Flags</h5>

<p>The <span class="samp">%m</span> and <span class="samp">%d</span> directives support the <span class="samp">#</span>, <span class="samp">0</span>
and <span class="samp">+</span> flags, but the other directives do not, even if they
print numbers.  Numeric directives that do not support these flags
include

   <p><span class="samp">G</span>,
<span class="samp">U</span>,
<span class="samp">b</span>,
<span class="samp">D</span>,
<span class="samp">k</span> and
<span class="samp">n</span>.

   <p>All fields support the format flag <span class="samp">-</span>, which makes fields
left-aligned.  That is, if the field width is greater than the actual
contents of the field, the requisite number of spaces are printed
after the field content instead of before it.

<div class="node">
<p><hr>
<a name="Run-Commands"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Delete-Files">Delete Files</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Print-File-Information">Print File Information</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Actions">Actions</a>
<br>
</div>

<h3 class="section">3.3 Run Commands</h3>

<p>You can use the list of file names created by <code>find</code> or
<code>locate</code> as arguments to other commands.  In this way you can
perform arbitrary actions on the files.

<ul class="menu">
<li><a accesskey="1" href="#Single-File">Single File</a>
<li><a accesskey="2" href="#Multiple-Files">Multiple Files</a>
<li><a accesskey="3" href="#Querying">Querying</a>
</ul>

<div class="node">
<p><hr>
<a name="Single-File"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Multiple-Files">Multiple Files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Run-Commands">Run Commands</a>
<br>
</div>

<h4 class="subsection">3.3.1 Single File</h4>

<p>Here is how to run a command on one file at a time.

<div class="defun">
&mdash; Action: <b>-execdir</b><var> command ;<a name="index-_002dexecdir-66"></a></var><br>
<blockquote><p>Execute <var>command</var>; true if 0 status is returned.  <code>find</code> takes
all arguments after <span class="samp">-exec</span> to be part of the command until an
argument consisting of <span class="samp">;</span> is reached.  It replaces the string
<span class="samp">{}</span> by the current file name being processed everywhere it
occurs in the command.  Both of these constructions need to be escaped
(with a <span class="samp">\</span>) or quoted to protect them from expansion by the shell. 
The command is executed in the directory in which <code>find</code> was run.

        <p>For example, to compare each C header file in the current directory with
the file <span class="file">/tmp/master</span>:

     <pre class="example">          find . -name '*.h' -execdir diff -u '{}' /tmp/master ';'
     </pre>
        </blockquote></div>

   <p>Another similar option, <span class="samp">-exec</span> is supported, but is less secure. 
See <a href="#Security-Considerations">Security Considerations</a>, for a discussion of the security
problems surrounding <span class="samp">-exec</span>.

<div class="defun">
&mdash; Action: <b>-exec</b><var> command ;<a name="index-_002dexec-67"></a></var><br>
<blockquote><p>This insecure variant of the <span class="samp">-execdir</span> action is specified by
POSIX.  The main difference is that the command is executed in the
directory from which <code>find</code> was invoked, meaning that <span class="samp">{}</span>
is expanded to a relative path starting with the name of one of the
starting directories, rather than just the basename of the matched
file. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Multiple-Files"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Querying">Querying</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Single-File">Single File</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Run-Commands">Run Commands</a>
<br>
</div>

<h4 class="subsection">3.3.2 Multiple Files</h4>

<p>Sometimes you need to process files one of the time.  But usually this
is not necessary, and, it is faster to run a command on as many files
as possible at a time, rather than once per file.  Doing this saves on
the time it takes to start up the command each time.

   <p>The <span class="samp">-execdir</span> and <span class="samp">-exec</span> actions have variants that build
command lines containing as many matched files as possible.

<div class="defun">
&mdash; Action: <b>-execdir</b><var> command {} +<a name="index-_002dexecdir-68"></a></var><br>
<blockquote><p>This works as for <span class="samp">-execdir command ;</span>, except that the
<span class="samp">{}</span> at the end of the command is expanded to a list of names
of matching files.  This expansion is done in such a way as to avoid
exceeding the maximum command line length available on the system. 
Only one <span class="samp">{}</span> is allowed within the command, and it must appear
at the end, immediately before the <span class="samp">+</span>.  A <span class="samp">+</span> appearing in
any position other than immediately after <span class="samp">{}</span> is not
considered to be special (that is, it does not terminate the command). 
</p></blockquote></div>

<div class="defun">
&mdash; Action: <b>-exec</b><var> command {} +<a name="index-_002dexec-69"></a></var><br>
<blockquote><p>This insecure variant of the <span class="samp">-execdir</span> action is specified by
POSIX.  The main difference is that the command is executed in the
directory from which <code>find</code> was invoked, meaning that <span class="samp">{}</span>
is expanded to a relative path starting with the name of one of the
starting directories, rather than just the basename of the matched
file. 
</p></blockquote></div>

   <p>Before <code>find</code> exits, any partially-built command lines are
executed.  This happens even if the exit was caused by the
<span class="samp">-quit</span> action.  However, some types of error (for example not
being able to invoke <code>stat()</code> on the current directory) can cause
an immediate fatal exit.  In this situation, any partially-built
command lines will not be invoked (this prevents possible infinite
loops).

   <p>Another, but less secure, way to run a command on more than one file
at once, is to use the <code>xargs</code> command, which is invoked like this:

<pre class="example">     xargs <span class="roman">[</span><var>option</var>...<span class="roman">]</span> <span class="roman">[</span><var>command</var> <span class="roman">[</span><var>initial-arguments</var><span class="roman">]</span><span class="roman">]</span>
</pre>
   <p><code>xargs</code> normally reads arguments from the standard input.  These
arguments are delimited by blanks (which can be protected with double
or single quotes or a backslash) or newlines.  It executes the
<var>command</var> (default is <span class="file">/bin/echo</span>) one or more times with any
<var>initial-arguments</var> followed by arguments read from standard
input.  Blank lines on the standard input are ignored.

   <p>Instead of blank-delimited names, it is safer to use <span class="samp">find -print0</span>
or <span class="samp">find -fprint0</span> and process the output by giving the <span class="samp">-0</span>
or <span class="samp">--null</span> option to GNU <code>xargs</code>, GNU <code>tar</code>, GNU
<code>cpio</code>, or <code>perl</code>.  The <code>locate</code> command also has a
<span class="samp">-0</span> or <span class="samp">--null</span> option which does the same thing.

   <p>You can use shell command substitution (backquotes) to process a list of
arguments, like this:

<pre class="example">     grep -l sprintf `find $HOME -name '*.c' -print`
</pre>
   <p>However, that method produces an error if the length of the <span class="samp">.c</span>
file names exceeds the operating system's command-line length limit. 
<code>xargs</code> avoids that problem by running the command as many times as
necessary without exceeding the limit:

<pre class="example">     find $HOME -name '*.c' -print | xargs grep -l sprintf
</pre>
   <p>However, if the command needs to have its standard input be a terminal
(<code>less</code>, for example), you have to use the shell command
substitution method or use the <span class="samp">--arg-file</span> option of
<code>xargs</code>.

   <p>The <code>xargs</code> command will process all its input, building command
lines and executing them, unless one of the commands exits with a
status of 255 (this will cause xargs to issue an error message and
stop) or it reads a line contains the end of file string specified
with the <span class="samp">--eof</span> option.

<ul class="menu">
<li><a accesskey="1" href="#Unsafe-File-Name-Handling">Unsafe File Name Handling</a>
<li><a accesskey="2" href="#Safe-File-Name-Handling">Safe File Name Handling</a>
<li><a accesskey="3" href="#Limiting-Command-Size">Limiting Command Size</a>
<li><a accesskey="4" href="#Interspersing-File-Names">Interspersing File Names</a>
</ul>

<div class="node">
<p><hr>
<a name="Unsafe-File-Name-Handling"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Safe-File-Name-Handling">Safe File Name Handling</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Multiple-Files">Multiple Files</a>
<br>
</div>

<h5 class="subsubsection">3.3.2.1 Unsafe File Name Handling</h5>

<p>Because file names can contain quotes, backslashes, blank characters,
and even newlines, it is not safe to process them using <code>xargs</code> in its
default mode of operation.  But since most files' names do not contain
blanks, this problem occurs only infrequently.  If you are only
searching through files that you know have safe names, then you need not
be concerned about it.

<!-- This example is adapted from: -->
<!-- From: pfalstad@stone.Princeton.EDU (Paul John Falstad) -->
<!-- Newsgroups: comp.unix.shell -->
<!-- Subject: Re: Beware xargs security holes -->
<!-- Date: 16 Oct 90 19:12:06 GMT -->
<p>In many applications, if <code>xargs</code> botches processing a file because
its name contains special characters, some data might be lost.  The
importance of this problem depends on the importance of the data and
whether anyone notices the loss soon enough to correct it.  However,
here is an extreme example of the problems that using blank-delimited
names can cause.  If the following command is run daily from
<code>cron</code>, then any user can remove any file on the system:

<pre class="example">     find / -name '#*' -atime +7 -print | xargs rm
</pre>
   <p>For example, you could do something like this:

<pre class="example">     eg$ echo &gt; '#
     vmunix'
</pre>
   <p class="noindent">and then <code>cron</code> would delete <span class="file">/vmunix</span>, if it ran
<code>xargs</code> with <span class="file">/</span> as its current directory.

   <p>To delete other files, for example <span class="file">/u/joeuser/.plan</span>, you could do
this:

<pre class="example">     eg$ mkdir '#
     '
     eg$ cd '#
     '
     eg$ mkdir u u/joeuser u/joeuser/.plan'
     '
     eg$ echo &gt; u/joeuser/.plan'
     /#foo'
     eg$ cd ..
     eg$ find . -name '#*' -print | xargs echo
     ./# ./# /u/joeuser/.plan /#foo
</pre>
   <div class="node">
<p><hr>
<a name="Safe-File-Name-Handling"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Limiting-Command-Size">Limiting Command Size</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Unsafe-File-Name-Handling">Unsafe File Name Handling</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Multiple-Files">Multiple Files</a>
<br>
</div>

<h5 class="subsubsection">3.3.2.2 Safe File Name Handling</h5>

<p>Here is how to make <code>find</code> output file names so that they can be
used by other programs without being mangled or misinterpreted.  You can
process file names generated this way by giving the <span class="samp">-0</span> or
<span class="samp">--null</span> option to GNU <code>xargs</code>, GNU <code>tar</code>, GNU
<code>cpio</code>, or <code>perl</code>.

<div class="defun">
&mdash; Action: <b>-print0</b><var><a name="index-_002dprint0-70"></a></var><br>
<blockquote><p>True; print the full file name on the standard output, followed by a
null character. 
</p></blockquote></div>

<div class="defun">
&mdash; Action: <b>-fprint0</b><var> file<a name="index-_002dfprint0-71"></a></var><br>
<blockquote><p>True; like <span class="samp">-print0</span> but write to <var>file</var> like <span class="samp">-fprint</span>
(see <a href="#Print-File-Name">Print File Name</a>). 
</p></blockquote></div>

   <p>As of findutils version 4.2.4, the <code>locate</code> program also has a
<span class="samp">--null</span> option which does the same thing.  For similarity with
<code>xargs</code>, the short form of the option <span class="samp">-0</span> can also be used.

   <p>If you want to be able to handle file names safely but need to run
commands which want to be connected to a terminal on their input, you
can use the <span class="samp">--arg-file</span> option to <code>xargs</code> like this:

<pre class="example">     find / -name xyzzy -print0 &gt; list
     xargs --null --arg-file=list munge
</pre>
   <p>The example above runs the <code>munge</code> program on all the files named
<span class="file">xyzzy</span> that we can find, but <code>munge</code>'s input will still be
the terminal (or whatever the shell was using as standard input).  If
your shell has the &ldquo;process substitution&rdquo; feature <span class="samp">&lt;(...)</span>, you
can do this in just one step:

<pre class="example">     xargs --null --arg-file=&lt;(find / -name xyzzy -print0) munge
</pre>
   <div class="node">
<p><hr>
<a name="Limiting-Command-Size"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Interspersing-File-Names">Interspersing File Names</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Safe-File-Name-Handling">Safe File Name Handling</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Multiple-Files">Multiple Files</a>
<br>
</div>

<h5 class="subsubsection">3.3.2.3 Limiting Command Size</h5>

<p><code>xargs</code> gives you control over how many arguments it passes to the
command each time it executes it.  By default, it uses up to
<code>ARG_MAX</code> - 2k, or 128k, whichever is smaller, characters per
command.  It uses as many lines and arguments as fit within that limit. 
The following options modify those values.

     <dl>
<dt><code>--no-run-if-empty</code><dt><code>-r</code><dd>If the standard input does not contain any nonblanks, do not run the
command.  By default, the command is run once even if there is no input.

     <br><dt><code>--max-lines</code><span class="roman">[</span><code>=</code><var>max-lines</var><span class="roman">]</span><dt><code>-l</code><span class="roman">[</span><var>max-lines</var><span class="roman">]</span><dd>Use at most <var>max-lines</var> nonblank input lines per command line;
<var>max-lines</var> defaults to 1 if omitted.  Trailing blanks cause an
input line to be logically continued on the next input line, for the
purpose of counting the lines.  Implies <span class="samp">-x</span>.

     <br><dt><code>--max-args=</code><var>max-args</var><dt><code>-n </code><var>max-args</var><dd>Use at most <var>max-args</var> arguments per command line.  Fewer than
<var>max-args</var> arguments will be used if the size (see the <span class="samp">-s</span>
option) is exceeded, unless the <span class="samp">-x</span> option is given, in which case
<code>xargs</code> will exit.

     <br><dt><code>--max-chars=</code><var>max-chars</var><dt><code>-s </code><var>max-chars</var><dd>Use at most <var>max-chars</var> characters per command line, including the
command and initial arguments and the terminating nulls at the ends of
the argument strings.  If you specify a value for this option which is
too large or small, a warning message is printed and the appropriate
upper or lower limit is used instead.

     <br><dt><code>--max-procs=</code><var>max-procs</var><dt><code>-P </code><var>max-procs</var><dd>Run up to <var>max-procs</var> processes at a time; the default is 1.  If
<var>max-procs</var> is 0, <code>xargs</code> will run as many processes as
possible at a time.  Use the <span class="samp">-n</span>, <span class="samp">-s</span>, or <span class="samp">-l</span> option
with <span class="samp">-P</span>; otherwise chances are that the command will be run only
once. 
</dl>

<div class="node">
<p><hr>
<a name="Interspersing-File-Names"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Limiting-Command-Size">Limiting Command Size</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Multiple-Files">Multiple Files</a>
<br>
</div>

<h5 class="subsubsection">3.3.2.4 Interspersing File Names</h5>

<p><code>xargs</code> can insert the name of the file it is processing between
arguments you give for the command.  Unless you also give options to
limit the command size (see <a href="#Limiting-Command-Size">Limiting Command Size</a>), this mode of
operation is equivalent to <span class="samp">find -exec</span> (see <a href="#Single-File">Single File</a>).

     <dl>
<dt><code>--replace</code><span class="roman">[</span><code>=</code><var>replace-str</var><span class="roman">]</span><dt><code>-i</code><span class="roman">[</span><var>replace-str</var><span class="roman">]</span><dd>Replace occurrences of <var>replace-str</var> in the initial arguments with
names read from the input.  Also, unquoted blanks do not
terminate arguments; instead, the input is split at newlines only.  If
<var>replace-str</var> is omitted, it defaults to <span class="samp">{}</span> (like for
<span class="samp">find -exec</span>).  Implies <span class="samp">-x</span> and <span class="samp">-l 1</span>.  As an
example, to sort each file the <span class="file">bills</span> directory, leaving the
output in that file name with <span class="file">.sorted</span> appended, you could do:

     <pre class="example">          find bills -type f | xargs -iXX sort -o XX.sorted XX
     </pre>
     <p class="noindent">The equivalent command using <span class="samp">find -exec</span> is:

     <pre class="example">          find bills -type f -exec sort -o '{}.sorted' '{}' ';'
     </pre>
     </dl>

<div class="node">
<p><hr>
<a name="Querying"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Multiple-Files">Multiple Files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Run-Commands">Run Commands</a>
<br>
</div>

<h4 class="subsection">3.3.3 Querying</h4>

<p>To ask the user whether to execute a command on a single file, you can
use the <code>find</code> primary <span class="samp">-ok</span> instead of <span class="samp">-exec</span>:

<div class="defun">
&mdash; Action: <b>-ok</b><var> command ;<a name="index-_002dok-72"></a></var><br>
<blockquote><p>Like <span class="samp">-exec</span> (see <a href="#Single-File">Single File</a>), but ask the user first (on
the standard input); if the response does not start with <span class="samp">y</span> or
<span class="samp">Y</span>, do not run the command, and return false. 
</p></blockquote></div>

   <p>When processing multiple files with a single command, to query the user
you give <code>xargs</code> the following option.  When using this option, you
might find it useful to control the number of files processed per
invocation of the command (see <a href="#Limiting-Command-Size">Limiting Command Size</a>).

     <dl>
<dt><code>--interactive</code><dt><code>-p</code><dd>Prompt the user about whether to run each command line and read a line
from the terminal.  Only run the command line if the response starts
with <span class="samp">y</span> or <span class="samp">Y</span>.  Implies <span class="samp">-t</span>. 
</dl>

<div class="node">
<p><hr>
<a name="Delete-Files"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Adding-Tests">Adding Tests</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Run-Commands">Run Commands</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Actions">Actions</a>
<br>
</div>

<h3 class="section">3.4 Delete Files</h3>

<div class="defun">
&mdash; Action: <b>-delete</b><var><a name="index-_002ddelete-73"></a></var><br>
<blockquote><p>Delete files or directories; true if removal succeeded.  If the
removal failed, an error message is issued.

        <p>The use of the <span class="samp">-delete</span> action on the command line automatically
turns on the <span class="samp">-depth</span> option (see <a href="#find-Expressions">find Expressions</a>). 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Adding-Tests"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Delete-Files">Delete Files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Actions">Actions</a>
<br>
</div>

<h3 class="section">3.5 Adding Tests</h3>

<p>You can test for file attributes that none of the <code>find</code> builtin
tests check.  To do this, use <code>xargs</code> to run a program that filters
a list of files printed by <code>find</code>.  If possible, use <code>find</code>
builtin tests to pare down the list, so the program run by <code>xargs</code>
has less work to do.  The tests builtin to <code>find</code> will likely run
faster than tests that other programs perform.

   <p>For reasons of efficiency it is often useful to limit the number of
times an external program has to be run.  For this reason, it is often
a good idea to implement &ldquo;extended&rdquo; tests by using <code>xargs</code>.

   <p>For example, here is a way to print the names of all of the unstripped
binaries in the <span class="file">/usr/local</span> directory tree.  Builtin tests avoid
running <code>file</code> on files that are not regular files or are not
executable.

<pre class="example">     find /usr/local -type f -perm +a=x | xargs file |
       grep 'not stripped' | cut -d: -f1
</pre>
   <p class="noindent">The <code>cut</code> program removes everything after the file name from the
output of <code>file</code>.

   <p>However, using <code>xargs</code> can present important security problems
(see <a href="#Security-Considerations">Security Considerations</a>).  These can be avoided by using
<span class="samp">-execdir</span>.  The <span class="samp">-execdir</span> action is also a useful way of
putting your own test in the middle of a set of other tests or actions
for <code>find</code> (for example, you might want to use <span class="samp">-prune</span>).

<!-- Idea from Martin Weitzel. -->
<p>To place a special test somewhere in the middle of a <code>find</code>
expression, you can use <span class="samp">-execdir</span> (or, less securely,
<span class="samp">-exec</span>) to run a program that performs the test.  Because
<span class="samp">-execdir</span> evaluates to the exit status of the executed program,
you can use a program (which can be a shell script) that tests for a
special attribute and make it exit with a true (zero) or false
(non-zero) status.  It is a good idea to place such a special test
<em>after</em> the builtin tests, because it starts a new process which
could be avoided if a builtin test evaluates to false.

   <p>Here is a shell script called <code>unstripped</code> that checks whether its
argument is an unstripped binary file:

<pre class="example">     #! /bin/sh
     file "$1" | grep -q "not stripped"
</pre>
   <p>This script relies on the fact that the shell exits with the status of
the last command in the pipeline, in this case <code>grep</code>.  The
<code>grep</code> command exits with a true status if it found any matches,
false if not.  Here is an example of using the script (assuming it is
in your search path).  It lists the stripped executables (and shell
scripts) in the file <span class="file">sbins</span> and the unstripped ones in
<span class="file">ubins</span>.

<pre class="example">     find /usr/local -type f -perm +a=x \
       \( -execdir unstripped '{}' \; -fprint ubins -o -fprint sbins \)
</pre>
   <div class="node">
<p><hr>
<a name="Common-Tasks"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Databases">Databases</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Actions">Actions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">4 Common Tasks</h2>

<p>The sections that follow contain some extended examples that both give a
good idea of the power of these programs, and show you how to solve
common real-world problems.

<ul class="menu">
<li><a accesskey="1" href="#Viewing-And-Editing">Viewing And Editing</a>
<li><a accesskey="2" href="#Archiving">Archiving</a>
<li><a accesskey="3" href="#Cleaning-Up">Cleaning Up</a>
<li><a accesskey="4" href="#Strange-File-Names">Strange File Names</a>
<li><a accesskey="5" href="#Fixing-Permissions">Fixing Permissions</a>
<li><a accesskey="6" href="#Classifying-Files">Classifying Files</a>
</ul>

<div class="node">
<p><hr>
<a name="Viewing-And-Editing"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Archiving">Archiving</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Common-Tasks">Common Tasks</a>
<br>
</div>

<h3 class="section">4.1 Viewing And Editing</h3>

<p>To view a list of files that meet certain criteria, simply run your file
viewing program with the file names as arguments.  Shells substitute a
command enclosed in backquotes with its output, so the whole command
looks like this:

<pre class="example">     less `find /usr/include -name '*.h' | xargs grep -l mode_t`
</pre>
   <p class="noindent">You can edit those files by giving an editor name instead of a file
viewing program:

<pre class="example">     emacs `find /usr/include -name '*.h' | xargs grep -l mode_t`
</pre>
   <p>Because there is a limit to the length of any individual command line,
there is a limit to the number of files that can be handled in this
way.  We can get around this difficulty by using xargs like this:

<pre class="example">     find /usr/include -name '*.h' | xargs grep -l mode_t &gt; todo
     xargs --arg-file=todo emacs
</pre>
   <p>Here, <code>xargs</code> will run <code>emacs</code> as many times as necessary to
visit all of the files listed in the file <span class="file">todo</span>.

<div class="node">
<p><hr>
<a name="Archiving"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Cleaning-Up">Cleaning Up</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Viewing-And-Editing">Viewing And Editing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Common-Tasks">Common Tasks</a>
<br>
</div>

<h3 class="section">4.2 Archiving</h3>

<p>You can pass a list of files produced by <code>find</code> to a file archiving
program.  GNU <code>tar</code> and <code>cpio</code> can both read lists of file
names from the standard input&mdash;either delimited by nulls (the safe way)
or by blanks (the lazy, risky default way).  To use null-delimited
names, give them the <span class="samp">--null</span> option.  You can store a file archive
in a file, write it on a tape, or send it over a network to extract on
another machine.

   <p>One common use of <code>find</code> to archive files is to send a list of the
files in a directory tree to <code>cpio</code>.  Use <span class="samp">-depth</span> so if a
directory does not have write permission for its owner, its contents can
still be restored from the archive since the directory's permissions are
restored after its contents.  Here is an example of doing this using
<code>cpio</code>; you could use a more complex <code>find</code> expression to
archive only certain files.

<pre class="example">     find . -depth -print0 |
       cpio --create --null --format=crc --file=/dev/nrst0
</pre>
   <p>You could restore that archive using this command:

<pre class="example">     cpio --extract --null --make-dir --unconditional \
       --preserve --file=/dev/nrst0
</pre>
   <p>Here are the commands to do the same things using <code>tar</code>:

<pre class="example">     find . -depth -print0 |
       tar --create --null --files-from=- --file=/dev/nrst0
     
     tar --extract --null --preserve-perm --same-owner \
       --file=/dev/nrst0
</pre>
   <!-- Idea from Rick Sladkey. -->
<p>Here is an example of copying a directory from one machine to another:

<pre class="example">     find . -depth -print0 | cpio -0o -Hnewc |
       rsh <var>other-machine</var> "cd `pwd` &amp;&amp; cpio -i0dum"
</pre>
   <div class="node">
<p><hr>
<a name="Cleaning-Up"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Strange-File-Names">Strange File Names</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Archiving">Archiving</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Common-Tasks">Common Tasks</a>
<br>
</div>

<h3 class="section">4.3 Cleaning Up</h3>

<!-- Idea from Jim Meyering. -->
<p>This section gives examples of removing unwanted files in various situations. 
Here is a command to remove the CVS backup files created when an update
requires a merge:

<pre class="example">     find . -name '.#*' -print0 | xargs -0r rm -f
</pre>
   <p>The command above works, but the following is safer:

<pre class="example">     find . -name '.#*' -depth -delete
</pre>
   <!-- Idea from Franc,ois Pinard. -->
<p>You can run this command to clean out your clutter in <span class="file">/tmp</span>.  You
might place it in the file your shell runs when you log out
(<span class="file">.bash_logout</span>, <span class="file">.logout</span>, or <span class="file">.zlogout</span>, depending on
which shell you use).

<pre class="example">     find /tmp -depth -user "$LOGNAME" -type f -delete
</pre>
   <p>If your <code>find</code> command removes directories, you may find that
you get a spurious error message when <code>find</code> tries to recurse
into a directory that has now been removed.  Using the <span class="samp">-depth</span>
option will normally resolve this problem.

<!-- Idea from Noah Friedman. -->
<p>To remove old Emacs backup and auto-save files, you can use a command
like the following.  It is especially important in this case to use
null-terminated file names because Emacs packages like the VM mailer
often create temporary file names with spaces in them, like <span class="file">#reply
to David J. MacKenzie&lt;1&gt;#</span>.

<pre class="example">     find ~ \( -name '*~' -o -name '#*#' \) -print0 |
       xargs --no-run-if-empty --null rm -vf
</pre>
   <p>Removing old files from <span class="file">/tmp</span> is commonly done from <code>cron</code>:

<!-- Idea from Kaveh Ghazi. -->
<pre class="example">     find /tmp /var/tmp -not -type d -mtime +3 -delete
     find /tmp /var/tmp -depth -mindepth 1 -type d -empty -delete
</pre>
   <p>The second <code>find</code> command above uses <span class="samp">-depth</span> so it cleans out
empty directories depth-first, hoping that the parents become empty and
can be removed too.  It uses <span class="samp">-mindepth</span> to avoid removing
<span class="file">/tmp</span> itself if it becomes totally empty.

<div class="node">
<p><hr>
<a name="Strange-File-Names"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Fixing-Permissions">Fixing Permissions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Cleaning-Up">Cleaning Up</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Common-Tasks">Common Tasks</a>
<br>
</div>

<h3 class="section">4.4 Strange File Names</h3>

<!-- Idea from: -->
<!-- From: tmatimar@isgtec.com (Ted Timar) -->
<!-- Newsgroups: comp.unix.questions,comp.unix.shell,comp.answers,news.answers -->
<!-- Subject: Unix - Frequently Asked Questions (2/7) [Frequent posting] -->
<!-- Subject: How do I remove a file with funny characters in the filename ? -->
<!-- Date: Thu Mar 18 17:16:55 EST 1993 -->
<p><code>find</code> can help you remove or rename a file with strange characters
in its name.  People are sometimes stymied by files whose names contain
characters such as spaces, tabs, control characters, or characters with
the high bit set.  The simplest way to remove such files is:

<pre class="example">     rm -i <var>some*pattern*that*matches*the*problem*file</var>
</pre>
   <p><code>rm</code> asks you whether to remove each file matching the given
pattern.  If you are using an old shell, this approach might not work if
the file name contains a character with the high bit set; the shell may
strip it off.  A more reliable way is:

<pre class="example">     find . -maxdepth 1 <var>tests</var> -ok rm '{}' \;
</pre>
   <p class="noindent">where <var>tests</var> uniquely identify the file.  The <span class="samp">-maxdepth 1</span>
option prevents <code>find</code> from wasting time searching for the file in
any subdirectories; if there are no subdirectories, you may omit it.  A
good way to uniquely identify the problem file is to figure out its
inode number; use

<pre class="example">     ls -i
</pre>
   <p>Suppose you have a file whose name contains control characters, and you
have found that its inode number is 12345.  This command prompts you for
whether to remove it:

<pre class="example">     find . -maxdepth 1 -inum 12345 -ok rm -f '{}' \;
</pre>
   <p>If you don't want to be asked, perhaps because the file name may contain
a strange character sequence that will mess up your screen when printed,
then use <span class="samp">-exec</span> instead of <span class="samp">-ok</span>.

   <p>If you want to rename the file instead, you can use <code>mv</code> instead of
<code>rm</code>:

<pre class="example">     find . -maxdepth 1 -inum 12345 -ok mv '{}' <var>new-file-name</var> \;
</pre>
   <div class="node">
<p><hr>
<a name="Fixing-Permissions"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Classifying-Files">Classifying Files</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Strange-File-Names">Strange File Names</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Common-Tasks">Common Tasks</a>
<br>
</div>

<h3 class="section">4.5 Fixing Permissions</h3>

<p>Suppose you want to make sure that everyone can write to the directories in a
certain directory tree.  Here is a way to find directories lacking either
user or group write permission (or both), and fix their permissions:

<pre class="example">     find . -type d -not -perm -ug=w | xargs chmod ug+w
</pre>
   <p class="noindent">You could also reverse the operations, if you want to make sure that
directories do <em>not</em> have world write permission.

<div class="node">
<p><hr>
<a name="Classifying-Files"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Fixing-Permissions">Fixing Permissions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Common-Tasks">Common Tasks</a>
<br>
</div>

<h3 class="section">4.6 Classifying Files</h3>

<!-- Idea from: -->
<!-- From: martin@mwtech.UUCP (Martin Weitzel) -->
<!-- Newsgroups: comp.unix.wizards,comp.unix.questions -->
<!-- Subject: Advanced usage of 'find' (Re: Unix security automating script) -->
<!-- Date: 22 Mar 90 15:05:19 GMT -->
<p>If you want to classify a set of files into several groups based on
different criteria, you can use the comma operator to perform multiple
independent tests on the files.  Here is an example:

<pre class="example">     find / -type d \( -perm -o=w -fprint allwrite , \
       -perm -o=x -fprint allexec \)
     
     echo "Directories that can be written to by everyone:"
     cat allwrite
     echo ""
     echo "Directories with search permissions for everyone:"
     cat allexec
</pre>
   <p><code>find</code> has only to make one scan through the directory tree (which
is one of the most time consuming parts of its work).

<div class="node">
<p><hr>
<a name="Databases"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#File-Permissions">File Permissions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Common-Tasks">Common Tasks</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">5 File Name Databases</h2>

<p>The file name databases used by <code>locate</code> contain lists of files
that were in particular directory trees when the databases were last
updated.  The file name of the default database is determined when
<code>locate</code> and <code>updatedb</code> are configured and installed.  The
frequency with which the databases are updated and the directories for
which they contain entries depend on how often <code>updatedb</code> is run,
and with which arguments.

   <p>You can obtain some statistics about the databases by using
<span class="samp">locate --statistics</span>.

<ul class="menu">
<li><a accesskey="1" href="#Database-Locations">Database Locations</a>
<li><a accesskey="2" href="#Database-Formats">Database Formats</a>
<li><a accesskey="3" href="#Newline-Handling">Newline Handling</a>
</ul>

<div class="node">
<p><hr>
<a name="Database-Locations"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Database-Formats">Database Formats</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Databases">Databases</a>
<br>
</div>

<h3 class="section">5.1 Database Locations</h3>

<p>There can be multiple file name databases.  Users can select which
databases <code>locate</code> searches using the <code>LOCATE_PATH</code>
environment variable or a command line option.  The system
administrator can choose the file name of the default database, the
frequency with which the databases are updated, and the directories
for which they contain entries.  File name databases are updated by
running the <code>updatedb</code> program, typically nightly.

   <p>In networked environments, it often makes sense to build a database at
the root of each filesystem, containing the entries for that filesystem. 
<code>updatedb</code> is then run for each filesystem on the fileserver where
that filesystem is on a local disk, to prevent thrashing the network.

   <p>See <a href="#Invoking-updatedb">Invoking updatedb</a>,
for the description of the options to <code>updatedb</code>, which specify
which directories would each database contain entries for.

<div class="node">
<p><hr>
<a name="Database-Formats"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Newline-Handling">Newline Handling</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Database-Locations">Database Locations</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Databases">Databases</a>
<br>
</div>

<h3 class="section">5.2 Database Formats</h3>

<p>The file name databases contain lists of files that were in particular
directory trees when the databases were last updated.  The file name
database format changed starting with GNU <code>locate</code> version 4.0 to
allow machines with different byte orderings to share the databases.  The
new GNU <code>locate</code> can read both the old and new database formats. 
However, old versions of <code>locate</code> and <code>find</code> produce incorrect
results if given a new-format database.

   <p>If you run <span class="samp">locate --statistics</span>, the resulting summary indicates
the type of each locate database.

<ul class="menu">
<li><a accesskey="1" href="#New-Database-Format">New Database Format</a>
<li><a accesskey="2" href="#Sample-Database">Sample Database</a>
<li><a accesskey="3" href="#Old-Database-Format">Old Database Format</a>
</ul>

<div class="node">
<p><hr>
<a name="New-Database-Format"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Sample-Database">Sample Database</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Database-Formats">Database Formats</a>
<br>
</div>

<h4 class="subsection">5.2.1 New Database Format</h4>

<p><code>updatedb</code> runs a program called <code>frcode</code> to
<dfn>front-compress</dfn> the list of file names, which reduces the database
size by a factor of 4 to 5.  Front-compression (also known as
incremental encoding) works as follows.

   <p>The database entries are a sorted list (case-insensitively, for users'
convenience).  Since the list is sorted, each entry is likely to share a
prefix (initial string) with the previous entry.  Each database entry
begins with an offset-differential count byte, which is the additional
number of characters of prefix of the preceding entry to use beyond the
number that the preceding entry is using of its predecessor.  (The
counts can be negative.)  Following the count is a null-terminated ASCII
remainder&mdash;the part of the name that follows the shared prefix.

   <p>If the offset-differential count is larger than can be stored in a byte
(+/-127), the byte has the value 0x80 and the count follows in a 2-byte
word, with the high byte first (network byte order).

   <p>Every database begins with a dummy entry for a file called
<span class="file">LOCATE02</span>, which <code>locate</code> checks for to ensure that the
database file has the correct format; it ignores the entry in doing the
search.

   <p>Databases can not be concatenated together, even if the first (dummy)
entry is trimmed from all but the first database.  This is because the
offset-differential count in the first entry of the second and following
databases will be wrong.

   <p>In the output of <span class="samp">locate --statistics</span>, the new database format
is referred to as <span class="samp">LOCATE02</span>.

<div class="node">
<p><hr>
<a name="Sample-Database"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Old-Database-Format">Old Database Format</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#New-Database-Format">New Database Format</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Database-Formats">Database Formats</a>
<br>
</div>

<h4 class="subsection">5.2.2 Sample Database</h4>

<p>Sample input to <code>frcode</code>:
<!-- with nulls changed to newlines: -->

<pre class="example">     /usr/src
     /usr/src/cmd/aardvark.c
     /usr/src/cmd/armadillo.c
     /usr/tmp/zoo
</pre>
   <p>Length of the longest prefix of the preceding entry to share:

<pre class="example">     0 /usr/src
     8 /cmd/aardvark.c
     14 rmadillo.c
     5 tmp/zoo
</pre>
   <p>Output from <code>frcode</code>, with trailing nulls changed to newlines
and count bytes made printable:

<pre class="example">     0 LOCATE02
     0 /usr/src
     8 /cmd/aardvark.c
     6 rmadillo.c
     -9 tmp/zoo
</pre>
   <p>(6 = 14 - 8, and -9 = 5 - 14)

<div class="node">
<p><hr>
<a name="Old-Database-Format"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Sample-Database">Sample Database</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Database-Formats">Database Formats</a>
<br>
</div>

<h4 class="subsection">5.2.3 Old Database Format</h4>

<p>The old database format is used by Unix <code>locate</code> and <code>find</code>
programs and earlier releases of the GNU ones.  <code>updatedb</code> produces
this format if given the <span class="samp">--old-format</span> option.

   <p><code>updatedb</code> runs programs called <code>bigram</code> and <code>code</code> to
produce old-format databases.  The old format differs from the new one
in the following ways.  Instead of each entry starting with an
offset-differential count byte and ending with a null, byte values from
0 through 28 indicate offset-differential counts from -14 through 14. 
The byte value indicating that a long offset-differential count follows
is 0x1e (30), not 0x80.  The long counts are stored in host byte order,
which is not necessarily network byte order, and host integer word size,
which is usually 4 bytes.  They also represent a count 14 less than
their value.  The database lines have no termination byte; the start of
the next line is indicated by its first byte having a value &lt;= 30.

   <p>In addition, instead of starting with a dummy entry, the old database
format starts with a 256 byte table containing the 128 most common
bigrams in the file list.  A bigram is a pair of adjacent bytes.  Bytes
in the database that have the high bit set are indexes (with the high
bit cleared) into the bigram table.  The bigram and offset-differential
count coding makes these databases 20-25% smaller than the new format,
but makes them not 8-bit clean.  Any byte in a file name that is in the
ranges used for the special codes is replaced in the database by a
question mark, which not coincidentally is the shell wildcard to match a
single character.

   <p>The old format therefore can not faithfully store entries with non-ASCII
characters. It therefore should not be used in internationalized
environments.

   <p>The output of <span class="samp">locate --statistics</span> will give an incorrect count
of the number of filenames containing newlines or high-bit characters
for old-format databases.

<div class="node">
<p><hr>
<a name="Newline-Handling"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Database-Formats">Database Formats</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Databases">Databases</a>
<br>
</div>

<h3 class="section">5.3 Newline Handling</h3>

<p>Within the database, filenames are terminated with a null character. 
This is the case for both the old and the new format.

   <p>When the new database format is being used, the compression technique
used to generate the database though relies on the ability to sort the
list of files before they are presented to <code>frcode</code>.

   <p>If the system's sort command allows its input list of files to be
separated with null characters via the <span class="samp">-z</span> option, this option
is used and therefore <code>updatedb</code> and <code>locate</code> will both
correctly handle filenames containing newlines.  If the <code>sort</code>
command lacks support for this, the list of files is delimited with
the newline character, meaning that parts of filenames containing
newlines will be incorrectly sorted.  This can result in both
incorrect matches and incorrect failures to match.

   <p>On the other hand, if you are using the old database format, filenames
with embedded newlines are not correctly handled.  There is no
technical limitation which enforces this, it's just that the
<code>bigram</code> program has no been updated to support lists of
filenames separated by nulls.

   <p>So, if you are using the new database format (this is the default) and
your system uses GNU <code>find</code>, newlines will be correctly handled
at all times.  Otherwise, newlines may not be correctly handled.

<div class="node">
<p><hr>
<a name="File-Permissions"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Reference">Reference</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Databases">Databases</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">6 File Permissions</h2>

<p>Each file has a set of <dfn>permissions</dfn> that control the kinds of
access that users have to that file.  The permissions for a file are
also called its <dfn>access mode</dfn>.  They can be represented either in
symbolic form or as an octal number.

<ul class="menu">
<li><a accesskey="1" href="#Mode-Structure">Mode Structure</a>:               Structure of file permissions. 
<li><a accesskey="2" href="#Symbolic-Modes">Symbolic Modes</a>:               Mnemonic permissions representation. 
<li><a accesskey="3" href="#Numeric-Modes">Numeric Modes</a>:                Permissions as octal numbers. 
</ul>

<div class="node">
<p><hr>
<a name="Mode-Structure"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Symbolic-Modes">Symbolic Modes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#File-Permissions">File Permissions</a>
<br>
</div>

<h3 class="section">6.1 Structure of File Permissions</h3>

<p>There are three kinds of permissions that a user can have for a file:

     <ol type=1 start=1>
<li><a name="index-read-permission-74"></a>permission to read the file.  For directories, this means permission to
list the contents of the directory. 
<li><a name="index-write-permission-75"></a>permission to write to (change) the file.  For directories, this means
permission to create and remove files in the directory. 
<li><a name="index-execute-permission-76"></a>permission to execute the file (run it as a program).  For directories,
this means permission to access files in the directory.
        </ol>

   <p>There are three categories of users who may have different permissions
to perform any of the above operations on a file:

     <ol type=1 start=1>
<li>the file's owner;
<li>other users who are in the file's group;
<li>everyone else.
        </ol>

   <p><a name="index-owner_002c-default-77"></a><a name="index-group-owner_002c-default-78"></a>Files are given an owner and group when they are created.  Usually the
owner is the current user and the group is the group of the directory
the file is in, but this varies with the operating system, the
filesystem the file is created on, and the way the file is created.  You
can change the owner and group of a file by using the <code>chown</code> and
<code>chgrp</code> commands.

   <p>In addition to the three sets of three permissions listed above, a
file's permissions have three special components, which affect only
executable files (programs) and, on some systems, directories:

     <ol type=1 start=1>
<li><a name="index-setuid-79"></a>set the process's effective user ID to that of the file upon execution
(called the <dfn>setuid bit</dfn>).  No effect on directories. 
<li><a name="index-setgid-80"></a>set the process's effective group ID to that of the file upon execution
(called the <dfn>setgid bit</dfn>).  For directories on some systems, put
files created in the directory into the same group as the directory, no
matter what group the user who creates them is in. 
<li><a name="index-sticky-81"></a><a name="index-swap-space_002c-saving-text-image-in-82"></a><a name="index-text-image_002c-saving-in-swap-space-83"></a><a name="index-append_002donly-directories-84"></a>save the program's text image on the swap device so it will load more
quickly when run (called the <dfn>sticky bit</dfn>).  For directories on some
systems, prevent users from removing files that they do not own in the
directory; this is called making the directory <dfn>append-only</dfn>.
        </ol>

<div class="node">
<p><hr>
<a name="Symbolic-Modes"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Numeric-Modes">Numeric Modes</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Mode-Structure">Mode Structure</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#File-Permissions">File Permissions</a>
<br>
</div>

<h3 class="section">6.2 Symbolic Modes</h3>

<p><a name="index-symbolic-modes-85"></a><dfn>Symbolic modes</dfn> represent changes to files' permissions as
operations on single-character symbols.  They allow you to modify either
all or selected parts of files' permissions, optionally based on
their previous values, and perhaps on the current <code>umask</code> as well
(see <a href="#Umask-and-Protection">Umask and Protection</a>).

   <p>The format of symbolic modes is:

<pre class="example">     <span class="roman">[</span>ugoa...<span class="roman">][[</span>+-=<span class="roman">][</span>rwxXstugo...<span class="roman">]</span>...<span class="roman">][</span>,...<span class="roman">]</span>
</pre>
   <p>The following sections describe the operators and other details of
symbolic modes.

<ul class="menu">
<li><a accesskey="1" href="#Setting-Permissions">Setting Permissions</a>:           Basic operations on permissions. 
<li><a accesskey="2" href="#Copying-Permissions">Copying Permissions</a>:           Copying existing permissions. 
<li><a accesskey="3" href="#Changing-Special-Permissions">Changing Special Permissions</a>:  Special permissions. 
<li><a accesskey="4" href="#Conditional-Executability">Conditional Executability</a>:     Conditionally affecting executability. 
<li><a accesskey="5" href="#Multiple-Changes">Multiple Changes</a>:              Making multiple changes. 
<li><a accesskey="6" href="#Umask-and-Protection">Umask and Protection</a>:               The effect of the umask. 
</ul>

<div class="node">
<p><hr>
<a name="Setting-Permissions"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Copying-Permissions">Copying Permissions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Symbolic-Modes">Symbolic Modes</a>
<br>
</div>

<h4 class="subsection">6.2.1 Setting Permissions</h4>

<p>The basic symbolic operations on a file's permissions are adding,
removing, and setting the permission that certain users have to read,
write, and execute the file.  These operations have the following
format:

<pre class="example">     <var>users</var> <var>operation</var> <var>permissions</var>
</pre>
   <p class="noindent">The spaces between the three parts above are shown for readability only;
symbolic modes can not contain spaces.

   <p>The <var>users</var> part tells which users' access to the file is changed. 
It consists of one or more of the following letters (or it can be empty;
see <a href="#Umask-and-Protection">Umask and Protection</a>, for a description of what happens then).  When
more than one of these letters is given, the order that they are in does
not matter.

     <dl>
<dt><code>u</code><dd><a name="index-owner-of-file_002c-permissions-for-86"></a>the user who owns the file;
<br><dt><code>g</code><dd><a name="index-group_002c-permissions-for-87"></a>other users who are in the file's group;
<br><dt><code>o</code><dd><a name="index-other-permissions-88"></a>all other users;
<br><dt><code>a</code><dd>all users; the same as <span class="samp">ugo</span>. 
</dl>

   <p>The <var>operation</var> part tells how to change the affected users' access
to the file, and is one of the following symbols:

     <dl>
<dt><code>+</code><dd><a name="index-adding-permissions-89"></a>to add the <var>permissions</var> to whatever permissions the <var>users</var>
already have for the file;
<br><dt><code>-</code><dd><a name="index-removing-permissions-90"></a><a name="index-subtracting-permissions-91"></a>to remove the <var>permissions</var> from whatever permissions the
<var>users</var> already have for the file;
<br><dt><code>=</code><dd><a name="index-setting-permissions-92"></a>to make the <var>permissions</var> the only permissions that the <var>users</var>
have for the file. 
</dl>

   <p>The <var>permissions</var> part tells what kind of access to the file should
be changed; it is zero or more of the following letters.  As with the
<var>users</var> part, the order does not matter when more than one letter is
given.  Omitting the <var>permissions</var> part is useful only with the
<span class="samp">=</span> operation, where it gives the specified <var>users</var> no access
at all to the file.

     <dl>
<dt><code>r</code><dd><a name="index-read-permission_002c-symbolic-93"></a>the permission the <var>users</var> have to read the file;
<br><dt><code>w</code><dd><a name="index-write-permission_002c-symbolic-94"></a>the permission the <var>users</var> have to write to the file;
<br><dt><code>x</code><dd><a name="index-execute-permission_002c-symbolic-95"></a>the permission the <var>users</var> have to execute the file. 
</dl>

   <p>For example, to give everyone permission to read and write a file,
but not to execute it, use:

<pre class="example">     a=rw
</pre>
   <p>To remove write permission for from all users other than the file's
owner, use:

<pre class="example">     go-w
</pre>
   <p class="noindent">The above command does not affect the access that the owner of
the file has to it, nor does it affect whether other users can
read or execute the file.

   <p>To give everyone except a file's owner no permission to do anything with
that file, use the mode below.  Other users could still remove the file,
if they have write permission on the directory it is in.

<pre class="example">     go=
</pre>
   <p class="noindent">Another way to specify the same thing is:

<pre class="example">     og-rxw
</pre>
   <div class="node">
<p><hr>
<a name="Copying-Permissions"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Changing-Special-Permissions">Changing Special Permissions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Setting-Permissions">Setting Permissions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Symbolic-Modes">Symbolic Modes</a>
<br>
</div>

<h4 class="subsection">6.2.2 Copying Existing Permissions</h4>

<p><a name="index-copying-existing-permissions-96"></a><a name="index-permissions_002c-copying-existing-97"></a>You can base part of a file's permissions on part of its existing
permissions.  To do this, instead of using <span class="samp">r</span>, <span class="samp">w</span>, or
<span class="samp">x</span> after the operator, you use the letter <span class="samp">u</span>, <span class="samp">g</span>, or
<span class="samp">o</span>.  For example, the mode

<pre class="example">     o+g
</pre>
   <p class="noindent"><!-- FIXME describe the ls -l notation for showing permissions. -->
adds the permissions for users who are in a file's group to the
permissions that other users have for the file.  Thus, if the file
started out as mode 664 (<span class="samp">rw-rw-r--</span>), the above mode would change
it to mode 666 (<span class="samp">rw-rw-rw-</span>).  If the file had started out as mode
741 (<span class="samp">rwxr----x</span>), the above mode would change it to mode 745
(<span class="samp">rwxr--r-x</span>).  The <span class="samp">-</span> and <span class="samp">=</span> operations work
analogously.

<div class="node">
<p><hr>
<a name="Changing-Special-Permissions"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Conditional-Executability">Conditional Executability</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Copying-Permissions">Copying Permissions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Symbolic-Modes">Symbolic Modes</a>
<br>
</div>

<h4 class="subsection">6.2.3 Changing Special Permissions</h4>

<p><a name="index-changing-special-permissions-98"></a>In addition to changing a file's read, write, and execute permissions,
you can change its special permissions.  See <a href="#Mode-Structure">Mode Structure</a>, for a
summary of these permissions.

   <p>To change a file's permission to set the user ID on execution, use
<span class="samp">u</span> in the <var>users</var> part of the symbolic mode and
<span class="samp">s</span> in the <var>permissions</var> part.

   <p>To change a file's permission to set the group ID on execution, use
<span class="samp">g</span> in the <var>users</var> part of the symbolic mode and
<span class="samp">s</span> in the <var>permissions</var> part.

   <p>To change a file's permission to stay permanently on the swap device,
use <span class="samp">o</span> in the <var>users</var> part of the symbolic mode and
<span class="samp">t</span> in the <var>permissions</var> part.

   <p>For example, to add set user ID permission to a program,
you can use the mode:

<pre class="example">     u+s
</pre>
   <p>To remove both set user ID and set group ID permission from
it, you can use the mode:

<pre class="example">     ug-s
</pre>
   <p>To cause a program to be saved on the swap device, you can use
the mode:

<pre class="example">     o+t
</pre>
   <p>Remember that the special permissions only affect files that are
executable, plus, on some systems, directories (on which they have
different meanings; see <a href="#Mode-Structure">Mode Structure</a>).  Using <span class="samp">a</span>
in the <var>users</var> part of a symbolic mode does not cause the special
permissions to be affected; thus,

<pre class="example">     a+s
</pre>
   <p class="noindent">has <em>no effect</em>.  You must use <span class="samp">u</span>, <span class="samp">g</span>, and <span class="samp">o</span>
explicitly to affect the special permissions.  Also, the
combinations <span class="samp">u+t</span>, <span class="samp">g+t</span>, and <span class="samp">o+s</span> have no effect.

   <p>The <span class="samp">=</span> operator is not very useful with special permissions; for
example, the mode:

<pre class="example">     o=t
</pre>
   <p class="noindent">does cause the file to be saved on the swap device, but it also
removes all read, write, and execute permissions that users not in the
file's group might have had for it.

<div class="node">
<p><hr>
<a name="Conditional-Executability"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Multiple-Changes">Multiple Changes</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Changing-Special-Permissions">Changing Special Permissions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Symbolic-Modes">Symbolic Modes</a>
<br>
</div>

<h4 class="subsection">6.2.4 Conditional Executability</h4>

<p><a name="index-conditional-executability-99"></a>There is one more special type of symbolic permission: if you use
<span class="samp">X</span> instead of <span class="samp">x</span>, execute permission is affected only if the
file already had execute permission or is a directory.  It affects
directories' execute permission even if they did not initially have any
execute permissions set.

   <p>For example, this mode:

<pre class="example">     a+X
</pre>
   <p class="noindent">gives all users permission to execute files (or search directories) if
anyone could before.

<div class="node">
<p><hr>
<a name="Multiple-Changes"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Umask-and-Protection">Umask and Protection</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Conditional-Executability">Conditional Executability</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Symbolic-Modes">Symbolic Modes</a>
<br>
</div>

<h4 class="subsection">6.2.5 Making Multiple Changes</h4>

<p><a name="index-multiple-changes-to-permissions-100"></a>The format of symbolic modes is actually more complex than described
above (see <a href="#Setting-Permissions">Setting Permissions</a>).  It provides two ways to make
multiple changes to files' permissions.

   <p>The first way is to specify multiple <var>operation</var> and
<var>permissions</var> parts after a <var>users</var> part in the symbolic mode.

   <p>For example, the mode:

<pre class="example">     og+rX-w
</pre>
   <p class="noindent">gives users other than the owner of the file read permission and, if
it is a directory or if someone already had execute permission
to it, gives them execute permission; and it also denies them write
permission to it file.  It does not affect the permission that the
owner of the file has for it.  The above mode is equivalent to
the two modes:

<pre class="example">     og+rX
     og-w
</pre>
   <p>The second way to make multiple changes is to specify more than one
simple symbolic mode, separated by commas.  For example, the mode:

<pre class="example">     a+r,go-w
</pre>
   <p class="noindent">gives everyone permission to read the file and removes write
permission on it for all users except its owner.  Another example:

<pre class="example">     u=rwx,g=rx,o=
</pre>
   <p class="noindent">sets all of the non-special permissions for the file explicitly.  (It
gives users who are not in the file's group no permission at all for
it.)

   <p>The two methods can be combined.  The mode:

<pre class="example">     a+r,g+x-w
</pre>
   <p class="noindent">gives all users permission to read the file, and gives users who are in
the file's group permission to execute it, as well, but not permission
to write to it.  The above mode could be written in several different
ways; another is:

<pre class="example">     u+r,g+rx,o+r,g-w
</pre>
   <div class="node">
<p><hr>
<a name="Umask-and-Protection"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Multiple-Changes">Multiple Changes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Symbolic-Modes">Symbolic Modes</a>
<br>
</div>

<h4 class="subsection">6.2.6 The Umask and Protection</h4>

<p><a name="index-umask-and-modes-101"></a><a name="index-modes-and-umask-102"></a>If the <var>users</var> part of a symbolic mode is omitted, it defaults to
<span class="samp">a</span> (affect all users), except that any permissions that are
<em>set</em> in the system variable <code>umask</code> are <em>not affected</em>. 
The value of <code>umask</code> can be set using the
<code>umask</code> command.  Its default value varies from system to system.

   <p><a name="index-giving-away-permissions-103"></a>Omitting the <var>users</var> part of a symbolic mode is generally not useful
with operations other than <span class="samp">+</span>.  It is useful with <span class="samp">+</span> because
it allows you to use <code>umask</code> as an easily customizable protection
against giving away more permission to files than you intended to.

   <p>As an example, if <code>umask</code> has the value 2, which removes write
permission for users who are not in the file's group, then the mode:

<pre class="example">     +w
</pre>
   <p class="noindent">adds permission to write to the file to its owner and to other users who
are in the file's group, but <em>not</em> to other users.  In contrast,
the mode:

<pre class="example">     a+w
</pre>
   <p class="noindent">ignores <code>umask</code>, and <em>does</em> give write permission for
the file to all users.

<div class="node">
<p><hr>
<a name="Numeric-Modes"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Symbolic-Modes">Symbolic Modes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#File-Permissions">File Permissions</a>
<br>
</div>

<h3 class="section">6.3 Numeric Modes</h3>

<p><a name="index-numeric-modes-104"></a><a name="index-file-permissions_002c-numeric-105"></a><a name="index-octal-numbers-for-file-modes-106"></a>File permissions are stored internally as 16 bit integers.  As an
alternative to giving a symbolic mode, you can give an octal (base 8)
number that corresponds to the internal representation of the new mode. 
This number is always interpreted in octal; you do not have to add a
leading 0, as you do in C.  Mode 0055 is the same as mode 55.

   <p>A numeric mode is usually shorter than the corresponding symbolic
mode, but it is limited in that it can not take into account a file's
previous permissions; it can only set them absolutely.

   <p>The permissions granted to the user, to other users in the file's group,
and to other users not in the file's group are each stored as three
bits, which are represented as one octal digit.  The three special
permissions are also each stored as one bit, and they are as a group
represented as another octal digit.  Here is how the bits are arranged
in the 16 bit integer, starting with the lowest valued bit:

<pre class="example">     Value in  Corresponding
     Mode      Permission
     
               Other users not in the file's group:
        1      Execute
        2      Write
        4      Read
     
               Other users in the file's group:
       10      Execute
       20      Write
       40      Read
     
               The file's owner:
      100      Execute
      200      Write
      400      Read
     
               Special permissions:
     1000      Save text image on swap device
     2000      Set group ID on execution
     4000      Set user ID on execution
</pre>
   <p>For example, numeric mode 4755 corresponds to symbolic mode
<span class="samp">u=rwxs,go=rx</span>, and numeric mode 664 corresponds to symbolic mode
<span class="samp">ug=rw,o=r</span>.  Numeric mode 0 corresponds to symbolic mode
<span class="samp">ugo=</span>.

<!-- texi related words used by Emacs' spell checker ispell.el -->
<!-- LocalWords: texinfo setfilename settitle setchapternewpage -->
<!-- LocalWords: iftex finalout ifinfo DIR titlepage vskip pt -->
<!-- LocalWords: filll dir samp dfn noindent xref pxref -->
<!-- LocalWords: var deffn texi deffnx itemx emph asis -->
<!-- LocalWords: findex smallexample subsubsection cindex -->
<!-- LocalWords: chgrp chown executability filesystem FIXME ls og rw -->
<!-- LocalWords: rwx rwxr rwxs rwxXstugo rx rX rxw setgid setuid ug -->
<!-- LocalWords: ugo ugoa umask -->
<div class="node">
<p><hr>
<a name="Reference"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Security-Considerations">Security Considerations</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#File-Permissions">File Permissions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">7 Reference</h2>

<p>Below are summaries of the command line syntax for the programs
discussed in this manual.

<ul class="menu">
<li><a accesskey="1" href="#Invoking-find">Invoking find</a>
<li><a accesskey="2" href="#Invoking-locate">Invoking locate</a>
<li><a accesskey="3" href="#Invoking-updatedb">Invoking updatedb</a>
<li><a accesskey="4" href="#Invoking-xargs">Invoking xargs</a>
</ul>

<div class="node">
<p><hr>
<a name="Invoking-find"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Invoking-locate">Invoking locate</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Reference">Reference</a>
<br>
</div>

<h3 class="section">7.1 Invoking <code>find</code></h3>

<pre class="example">     find <span class="roman">[-H] [-L] [-P]</span> <span class="roman">[</span><var>file</var>...<span class="roman">]</span> <span class="roman">[</span><var>expression</var><span class="roman">]</span>
</pre>
   <p><code>find</code> searches the directory tree rooted at each file name
<var>file</var> by evaluating the <var>expression</var> on each file it finds in
the tree.

   <p>The options <span class="samp">-H</span>, <span class="samp">-L</span> or <span class="samp">-P</span> may be specified at the
start of the command line (if none of these is specified, <span class="samp">-P</span> is
assumed).  The arguments after these are a list of files or
directories that should be searched.

   <p>This list of files to search is followed by a list of expressions
describing the files we wish to search for.  The first part of the
expression is recognised by the fact that it begins with <span class="samp">-</span>,
<span class="samp">(</span>, <span class="samp">)</span>, <span class="samp">,</span>, or <span class="samp">!</span>.  Any arguments after it are
the rest of the expression.  If no paths are given, the current
directory is used.  If no expression is given, the expression
<span class="samp">-print</span> is used.

   <p><code>find</code> exits with status 0 if all files are processed successfully,
greater than 0 if errors occur.

   <p>Three options can precede the list of path names.  They determine the
way that symbolic links are handled.

     <dl>
<dt><code>-P</code><dd>Never follow symbolic links (this is the default), except in the case
of the <span class="samp">-xtype</span> predicate. 
<br><dt><code>-L</code><dd>Always follow symbolic links, except in the case of the <span class="samp">-xtype</span>
predicate. 
<br><dt><code>-H</code><dd>Follow symbolic links specified in the list of paths to search, or
which are otherwise specified on the command line. 
</dl>

   <p>If <code>find</code> would follow a symbolic link, but cannot for any reason
(for example, because it has insufficient permissions or the link is
broken), it falls back on using the properties of the symbolic link
itself.  <a href="#Symbolic-Links">Symbolic Links</a> for a more complete description of how
symbolic links are handled.

   <p>See <a href="#Primary-Index">Primary Index</a>, for a summary of all of the tests, actions, and
options that the expression can contain.  If the expression is
missing, <span class="samp">-print</span> is assumed.

   <p><code>find</code> also recognizes two options for administrative use:

     <dl>
<dt><code>--help</code><dd>Print a summary of the command-line argument format and exit. 
<br><dt><code>--version</code><dd>Print the version number of <code>find</code> and exit. 
</dl>

<ul class="menu">
<li><a accesskey="1" href="#Warning-Messages">Warning Messages</a>
</ul>

<div class="node">
<p><hr>
<a name="Warning-Messages"></a>Up:&nbsp;<a rel="up" accesskey="u" href="#Invoking-find">Invoking find</a>
<br>
</div>

<h4 class="subsection">7.1.1 Warning Messages</h4>

<p>If there is an error on the <code>find</code> command line, an error message
is normally issued.  However, there are some usages that are
inadvisable but which <code>find</code> should still accept.  Under these
circumstances, <code>find</code> may issue a warning message.  By default,
warnings are enabled only if <code>find</code> is being run interactively
(specifically, if the standard input is a terminal).  Warning messages
can be controlled explicitly by the use of options on the command
line:

     <dl>
<dt><code>-warn</code><dd>Issue warning messages where appropriate. 
<br><dt><code>-nowarn</code><dd>Do not issue warning messages. 
</dl>

   <p>These options take effect at the point on the command line where they
are specified.  Therefore if you specify <span class="samp">-nowarn</span> at the end of
the command line, you will not see warning messages for any problems
occurring before that.  The warning messages affected by the above
options are triggered by:

     <ul>
<li>Use of the <span class="samp">-d</span> option which is deprecated; please use
<span class="samp">-depth</span> instead, since the latter is POSIX-compliant. 
<li>Use of the <span class="samp">-ipath</span> option which is deprecated; please use
<span class="samp">-iwholename</span> instead. 
<li>Specifying an option (for example <span class="samp">-mindepth</span>) after a non-option
(for example <span class="samp">-type</span> or <span class="samp">-print</span>) on the command line. 
</ul>

   <p>The default behaviour above is designed to work in that way so that
existing shell scripts which use such constructs don't generate
spurious errors, but people will be made aware of the problem.

   <p>Some warning messages are issued for less common or more serious
problems, and so cannot be turned off:

     <ul>
<li>Use of an unrecognised backslash escape sequence with <span class="samp">-fprintf</span>
<li>Use of an unrecognised formatting directive with <span class="samp">-fprintf</span>
</ul>

<div class="node">
<p><hr>
<a name="Invoking-locate"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Invoking-updatedb">Invoking updatedb</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Invoking-find">Invoking find</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Reference">Reference</a>
<br>
</div>

<h3 class="section">7.2 Invoking <code>locate</code></h3>

<pre class="example">     locate <span class="roman">[</span><var>option</var>...<span class="roman">]</span> <var>pattern</var>...
</pre>
     <dl>
<dt><code>--basename</code><dt><code>-b</code><dd>The specified pattern is matched against just the last component of
the name of the file in the locate database.  This last component is
also called the &ldquo;base name&rdquo;.  For example, the base name of
<span class="file">/tmp/mystuff/foo.old.c</span> is <span class="file">foo.old.c</span>.  If the pattern
contains metacharacters, it must match the base name exactly.  If not,
it must match part of the base name.

     <br><dt><code>--count</code><dt><code>-c</code><dd>Instead of printing the matched filenames, just print the total
number of matches we found.

     <br><dt><code>--database=</code><var>path</var><dt><code>-d </code><var>path</var><dd>Instead of searching the default file name database, search the file
name databases in <var>path</var>, which is a colon-separated list of
database file names.  You can also use the environment variable
<code>LOCATE_PATH</code> to set the list of database files to search.  The
option overrides the environment variable if both are used.  Empty
elements in <var>path</var> (that is, a leading or trailing colon, or two
colons in a row) are taken to stand for the default database.

     <br><dt><code>--existing</code><dt><code>-e</code><dd>Only print out such names which currently exist (instead of such names
which existed when the database was created).  Note that this may slow
down the program a lot, if there are many matches in the database. 
The way in which broken symbolic links are treated is affected by the
<span class="samp">-L</span>, <span class="samp">-P</span> and <span class="samp">-H</span> options.

     <br><dt><code>--follow</code><dt><code>-L</code><dd>If testing for the existence of files (with the <span class="samp">-e</span> option),
omit broken symbolic links.  This is the default.

     <br><dt><code>--nofollow</code><dt><code>-P</code><dt><code>-H</code><dd>If testing for the existence of files (with the <span class="samp">-e</span> option),
treat broken symbolic links count as if they were exiting files.  The
<span class="samp">-H</span> form of this option is provided purely for similarity with
<code>find</code>; the use of <span class="samp">-P</span> is recommended over <span class="samp">-H</span>.

     <br><dt><code>--ignore-case</code><dt><code>-i</code><dd>Ignore case distinctions in both the pattern and the file names.

     <br><dt><code>--limit=N</code><dt><code>-l N</code><dd>Limit the number of results printed to N.  If you use the
<span class="samp">--count</span> option, the value printed will never be larger than
this limit.

     <br><dt><code>--mmap</code><dt><code>-m</code><dd>Accepted but does nothing.  The option is supported only to provide
compatibility with BSD's <code>locate</code>.

     <br><dt><code>--null</code><dt><code>-0</code><dd>Results are separated with the ASCII NUL character rather than the
newline character.  To get the full benefit of the use of this option,
use the new locate database format (that is the default anyway).

     <br><dt><code>--wholename</code><dt><code>-w</code><dd>The specified pattern is matched against the whole name of the file in
the locate database.  If the pattern contains metacharacters, it must
match exactly.  If not, it must match part of the whole file name. 
This is the default behaviour.

     <br><dt><code>--regex</code><dt><code>-r</code><dd>Instead of using substring or shell glob matching, the pattern
specified on the command line is understood to be a POSIX extended
regular expression.  Filenames from the locate database which match
the specified regular expression are printed (or counted).  If the
<span class="samp">-i</span> flag is also given, matching is case-insensitive.  Matches
are performed against the whole path name, and so by default a
pathname will be matched if any part of it matches the specified
regular expression.  The regular expression may use <span class="samp">^</span> or
<span class="samp">$</span> to anchor a match at the beginning or end of a pathname.

     <br><dt><code>--stdio</code><dt><code>-s</code><dd>Accepted but does nothing.  The option is supported only to provide
compatibility with BSD's <code>locate</code>.

     <br><dt><code>--statistics</code><dt><code>-S</code><dd>Print some summary information for each locate database.  No search is
performed.

     <br><dt><code>--help</code><dd>Print a summary of the options to <code>locate</code> and exit.

     <br><dt><code>--version</code><dd>Print the version number of <code>locate</code> and exit. 
</dl>

<div class="node">
<p><hr>
<a name="Invoking-updatedb"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Invoking-xargs">Invoking xargs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Invoking-locate">Invoking locate</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Reference">Reference</a>
<br>
</div>

<h3 class="section">7.3 Invoking <code>updatedb</code></h3>

<pre class="example">     updatedb <span class="roman">[</span><var>option</var>...<span class="roman">]</span>
</pre>
     <dl>
<dt><code>--findoptions='</code><var>OPTION</var><code>...'</code><dd>Global options to pass on to <code>find</code>. 
The environment variable <code>FINDOPTIONS</code> also sets this value. 
Default is none.

     <br><dt><code>--localpaths='</code><var>path</var><code>...'</code><dd>Non-network directories to put in the database. 
Default is <span class="file">/</span>.

     <br><dt><code>--netpaths='</code><var>path</var><code>...'</code><dd>Network (NFS, AFS, RFS, etc.) directories to put in the database. 
The environment variable <code>NETPATHS</code> also sets this value. 
Default is none.

     <br><dt><code>--prunepaths='</code><var>path</var><code>...'</code><dd>Directories to omit from the database, which would otherwise be included. 
The environment variable <code>PRUNEPATHS</code> also sets this value. 
Default is <span class="file">/tmp /usr/tmp /var/tmp /afs</span>.

     <br><dt><code>--prunefs='</code><var>path</var><code>...'</code><dd>File systems to omit from the database, which would otherwise be included. 
Note that files are pruned when a file system is reached;
Any file system mounted under an undesired file system will be
ignored. 
The environment variable <code>PRUNEFS</code> also sets this value. 
Default is <span class="file">nfs NFS proc</span>.

     <br><dt><code>--output=</code><var>dbfile</var><dd>The database file to build. 
Default is system-dependent, but typically <span class="file">/usr/local/var/locatedb</span>.

     <br><dt><code>--localuser=</code><var>user</var><dd>The user to search the non-network directories as, using <code>su</code>. 
Default is to search the non-network directories as the current user. 
You can also use the environment variable <code>LOCALUSER</code> to set this user.

     <br><dt><code>--netuser=</code><var>user</var><dd>The user to search network directories as, using <code>su</code>. 
Default is <code>daemon</code>. 
You can also use the environment variable <code>NETUSER</code> to set this user.

     <br><dt><code>--old-format</code><dd>Generate a locate database in the old format, for compatibility with
versions of <code>locate</code> other than GNU <code>locate</code>.  Using this
option means that <code>locate</code> will not be able to properly handle
non-ASCII characters in filenames (that is, filenames containing
characters which have the eighth bit set, such as many of the
characters from the ISO-8859-1 character set). 
<br><dt><code>--help</code><dd>Print a summary of the command-line argument format and exit. 
<br><dt><code>--version</code><dd>Print the version number of <code>updatedb</code> and exit. 
</dl>

<div class="node">
<p><hr>
<a name="Invoking-xargs"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Invoking-updatedb">Invoking updatedb</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Reference">Reference</a>
<br>
</div>

<h3 class="section">7.4 Invoking <code>xargs</code></h3>

<pre class="example">     xargs <span class="roman">[</span><var>option</var>...<span class="roman">]</span> <span class="roman">[</span><var>command</var> <span class="roman">[</span><var>initial-arguments</var><span class="roman">]</span><span class="roman">]</span>
</pre>
   <p><code>xargs</code> exits with the following status:

     <dl>
<dt>0<dd>if it succeeds
<br><dt>123<dd>if any invocation of the command exited with status 1-125
<br><dt>124<dd>if the command exited with status 255
<br><dt>125<dd>if the command is killed by a signal
<br><dt>126<dd>if the command cannot be run
<br><dt>127<dd>if the command is not found
<br><dt>1<dd>if some other error occurred. 
</dl>

     <dl>
<dt><code>--arg-file</code><span class="roman">=</span><var>inputfile</var><dt><code>-a </code><span class="roman">=</span><var>inputfile</var><dd>Read names from the file <var>inputfile</var> instead of standard input.

     <br><dt><code>--null</code><dt><code>-0</code><dd>Input filenames are terminated by a null character instead of by
whitespace, and the quotes and backslash are not special (every
character is taken literally).  Disables the end of file string, which
is treated like any other argument.

     <br><dt><code>--eof</code><span class="roman">[</span><code>=</code><var>eof-str</var><span class="roman">]</span><dt><code>-e</code><span class="roman">[</span><var>eof-str</var><span class="roman">]</span><dd>Set the end of file string to <var>eof-str</var>.  If the end of file string
occurs as a line of input, the rest of the input is ignored.  If
<var>eof-str</var> is omitted, there is no end of file string.  If this
option is not given, the end of file string defaults to <span class="samp">_</span>.

     <br><dt><code>--help</code><dd>Print a summary of the options to <code>xargs</code> and exit.

     <br><dt><code>--replace</code><span class="roman">[</span><code>=</code><var>replace-str</var><span class="roman">]</span><dt><code>-i</code><span class="roman">[</span><var>replace-str</var><span class="roman">]</span><dd>Replace occurrences of <var>replace-str</var> in the initial arguments with
names read from standard input.  Also, unquoted blanks do not
terminate arguments; instead, the input is split at newlines only. 
If <var>replace-str</var> is omitted, it defaults to <span class="samp">{}</span>
(like for <span class="samp">find -exec</span>).  Implies <span class="samp">-x</span> and <span class="samp">-l 1</span>.

     <br><dt><code>--max-lines</code><span class="roman">[</span><code>=</code><var>max-lines</var><span class="roman">]</span><dt><code>-l</code><span class="roman">[</span><var>max-lines</var><span class="roman">]</span><dd>Use at most <var>max-lines</var> nonblank input lines per command line;
<var>max-lines</var> defaults to 1 if omitted.  Trailing blanks cause an
input line to be logically continued on the next input line, for the
purpose of counting the lines.  Implies <span class="samp">-x</span>.

     <br><dt><code>--max-args=</code><var>max-args</var><dt><code>-n </code><var>max-args</var><dd>Use at most <var>max-args</var> arguments per command line.  Fewer than
<var>max-args</var> arguments will be used if the size (see the <span class="samp">-s</span>
option) is exceeded, unless the <span class="samp">-x</span> option is given, in which case
<code>xargs</code> will exit.

     <br><dt><code>--interactive</code><dt><code>-p</code><dd>Prompt the user about whether to run each command line and read a line
from the terminal.  Only run the command line if the response starts
with <span class="samp">y</span> or <span class="samp">Y</span>.  Implies <span class="samp">-t</span>.

     <br><dt><code>--no-run-if-empty</code><dt><code>-r</code><dd>If the standard input does not contain any nonblanks, do not run the
command.  By default, the command is run once even if there is no input.

     <br><dt><code>--max-chars=</code><var>max-chars</var><dt><code>-s </code><var>max-chars</var><dd>Use at most <var>max-chars</var> characters per command line, including the
command and initial arguments and the terminating nulls at the ends of
the argument strings.

     <br><dt><code>--verbose</code><dt><code>-t</code><dd>Print the command line on the standard error output before executing
it.

     <br><dt><code>--version</code><dd>Print the version number of <code>xargs</code> and exit.

     <br><dt><code>--exit</code><dt><code>-x</code><dd>Exit if the size (see the <span class="samp">-s</span> option) is exceeded.

     <br><dt><code>--max-procs=</code><var>max-procs</var><dt><code>-P </code><var>max-procs</var><dd>Run up to <var>max-procs</var> processes at a time; the default is 1.  If
<var>max-procs</var> is 0, <code>xargs</code> will run as many processes as
possible at a time. 
</dl>

<div class="node">
<p><hr>
<a name="Security-Considerations"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Error-Messages">Error Messages</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Reference">Reference</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">8 Security Considerations</h2>

<p>Security considerations are important if you are using <code>find</code> or
<code>xargs</code> to search for or process files that don't belong to you
or over which other people have control.  Security considerations
relating to <code>locate</code> may also apply if you have files which you
may not want others to see.

   <p>In general, the most severe forms of security problems affecting
<code>find</code> and related programs are where third parties can bring
about a situation where those programs allow them to do something
they would normally not be able to do.  This is called <em>privilege
elevation</em>.  This might include deleting files they would not normally
be able to delete.  It is also common for the system to periodically
invoke <code>find</code> for housekeeping purposes.  These invocations of
<code>find</code> are particularly problematic from a security point of view
as these are often invoked by the superuser and search the whole file
system hierarchy.  The severity of any associated problem depends on
what the system is going to do with the output of <code>find</code>.

<ul class="menu">
<li><a accesskey="1" href="#Levels-of-Risk">Levels of Risk</a>:       What is your level of exposure to security problems? 
<li><a accesskey="2" href="#Security-Considerations-for-find">Security Considerations for find</a>:   Security problems with find
<li><a accesskey="3" href="#Security-Considerations-for-xargs">Security Considerations for xargs</a>:  Security problems with xargs
<li><a accesskey="4" href="#Security-Considerations-for-locate">Security Considerations for locate</a>:  Security problems with locate
<li><a accesskey="5" href="#Security-Summary">Security Summary</a>:  That was all very complex, what does it boil down to? 
</ul>

<div class="node">
<p><hr>
<a name="Levels-of-Risk"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Security-Considerations-for-find">Security Considerations for find</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Security-Considerations">Security Considerations</a>
<br>
</div>

<h3 class="section">8.1 Levels of Risk</h3>

<p>There are some security risks inherent in the use of <code>find</code>,
<code>xargs</code> and (to a lesser extent) <code>locate</code>.  The severity of
these risks depends on what sort of system you are using:

     <dl>
<dt><strong>High risk</strong><dd>Multi-user systems where you do not control (or trust) the other
users, and on which you execute <code>find</code>, including areas where
those other users can manipulate the filesystem (for example beneath
<span class="file">/home</span> or <span class="file">/tmp</span>).

     <br><dt><strong>Medium Risk</strong><dd>Systems where the actions of other users can create filenames chosen
by them, but to which they don't have access while <code>find</code> is
being run.  This access might include leaving programs running (shell
background jobs, <code>at</code> or <code>cron</code> tasks, for example).  On
these sorts of systems, carefully written commands (avoiding use of
<span class="samp">-print</span> for example) should not expose you to a high degree of
risk.  Most systems fall into this category.

     <br><dt><strong>Low Risk</strong><dd>Systems to which untrusted parties do not have access, cannot create
filenames of their own choice (even remotely) and which contain no
security flaws which might enable an untrusted third party to gain
access.  Most systems do not fall into this category because there are
many ways in which external parties can affect the names of files that
are created on your system.  The system on which I am writing this for
example automatically downloads software updates from the Internet;
the names of the files in which these updates exist are chosen by
third parties<a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a>. 
</dl>

   <p>In the discussion above, &ldquo;risk&rdquo; denotes the likelihood that someone
can cause <code>find</code>, <code>xargs</code>, <code>locate</code> or some other
program which is controlled by them to do something you did not
intend.  The levels of risk suggested do not take any account of the
consequences of this sort of event.  That is, if you operate a &ldquo;low
risk&rdquo; type system, but the consequences of a security problem are
disastrous, then you should still give serious thought to all the
possible security problems, many of which of course will not be
discussed here &ndash; this section of the manual is intended to be
informative but not comprehensive or exhaustive.

   <p>If you are responsible for the operation of a system where the
consequences of a security problem could be very important, you should
do two things:-

     <ol type=1 start=1>
<li>Define a security policy which defines who is allowed to do what
on your system
<li>Seek competent advice on how to enforce your policy, detect
breaches of that policy, and take account of any potential problems
that might fall outside the scope of your policy
        </ol>

<div class="node">
<p><hr>
<a name="Security-Considerations-for-find"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Security-Considerations-for-xargs">Security Considerations for xargs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Levels-of-Risk">Levels of Risk</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Security-Considerations">Security Considerations</a>
<br>
</div>

<h3 class="section">8.2 Security Considerations for find</h3>

<p>Some of the actions <code>find</code> might take have a direct effect;
these include <code>-exec</code> and <code>-delete</code>.  However, it is also
common to use <code>-print</code> explicitly or implicitly, and so if
<code>find</code> produces the wrong list of filenames, that can also be a
security problem; consider the case for example where <code>find</code> is
producing a list of files to be deleted.

   <p>We normally assume that the <code>find</code> command line expresses the
file selection criteria and actions that the user had in mind &ndash; that
is, the command line is &ldquo;trusted&rdquo; data.

   <p>From a security analysis point of view, the output of <code>find</code>
should be correct; that is, the output should contain only the names
of those files which meet the user's criteria specified on the command
line.  This applies for the <code>-exec</code> and <code>-delete</code> actions;
one can consider these to be part of the output.

   <p>On the other hand, the contents of the filesystem can be manipulated
by other people, and hence we regard this as &ldquo;untrusted&rdquo; data.  This
implies that the <code>find</code> command line is a filter which converts
the untrusted contents of the filesystem into a correct list of output
files.

   <p>The filesystem will in general change while <code>find</code> is searching
it; in fact, most of the potential security problems with <code>find</code>
relate to this issue in some way.

   <p>Race conditions are a general class of security problem where the
relative ordering of actions taken by <code>find</code> (for example) and
something else are important<a rel="footnote" href="#fn-2" name="fnd-2"><sup>2</sup></a> .

   <p>Typically, an attacker might move or rename files or directories in
the hope that an action might be taken against a a file which was not
normally intended to be affected.  Alternatively, this sort of attack
might be intended to persuade <code>find</code> to search part of the
filesystem which would not normally be included in the search
(defeating the <code>-prune</code> action for example).

<ul class="menu">
<li><a accesskey="1" href="#Changing-the-Current-Working-Directory">Changing the Current Working Directory</a>
<li><a accesskey="2" href="#Race-Conditions-with-_002dexec">Race Conditions with -exec</a>
<li><a accesskey="3" href="#Race-Conditions-with-_002dprint-and-_002dprint0">Race Conditions with -print and -print0</a>
</ul>

<div class="node">
<p><hr>
<a name="Changing-the-Current-Working-Directory"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Race-Conditions-with-_002dexec">Race Conditions with -exec</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Security-Considerations-for-find">Security Considerations for find</a>
<br>
</div>

<h4 class="subsection">8.2.1 Changing the Current Working Directory</h4>

<p>As find searches the file system, it finds subdirectories and then
searches within them by changing its working directory.  First,
<code>find</code> notices a subdirectory.  It then decides if that
subdirectory meets the criteria for being searched; that is, any
<span class="samp">-xdev</span> or <span class="samp">-prune</span> expressions are taken into account.  The
<code>find</code> program will then change working directory and proceed to
search the directory.

   <p>A race condition attack might take the form that once the checks
relevant to <span class="samp">-xdev</span> and <span class="samp">-prune</span> have been done, an attacker
might rename the directory that was being considered, and put in its
place a symbolic link that actually points somewhere else.

   <p>The idea behind this attack is to fool <code>find</code> into going into the
wrong directory.  This would leave <code>find</code> with a working
directory chosen by an attacker, bypassing any protection apparently
provided by <span class="samp">-xdev</span> and <span class="samp">-prune</span>, and any protection
provided by being able to <em>not</em> list particular directories on
the <code>find</code> command line.  This form of attack is particularly
problematic if the attacker can predict when the <code>find</code> command
will be run, as is the case with <code>cron</code> tasks for example.

   <p>GNU <code>find</code> has specific safeguards to prevent this general class
of problem.  The exact form of these safeguards depends on the
properties of your system.

<ul class="menu">
<li><a accesskey="1" href="#O_005fNOFOLLOW">O_NOFOLLOW</a>:                      Safely changing directory using fchdir(). 
<li><a accesskey="2" href="#Systems-without-O_005fNOFOLLOW">Systems without O_NOFOLLOW</a>:      Checking for symbolic links after chdir(). 
<li><a accesskey="3" href="#Working-with-automounters">Working with automounters</a>:       These can look like race condition exploits
<li><a accesskey="4" href="#Problems-with-dead-NFS-servers">Problems with dead NFS servers</a>:  If you don't have O_NOFOLLOW, this is a problem. 
</ul>

<div class="node">
<p><hr>
<a name="O_005fNOFOLLOW"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Systems-without-O_005fNOFOLLOW">Systems without O_NOFOLLOW</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Changing-the-Current-Working-Directory">Changing the Current Working Directory</a>
<br>
</div>

<h5 class="subsubsection">8.2.1.1 O_NOFOLLOW</h5>

<p>If your system supports the O_NOFOLLOW flag <a rel="footnote" href="#fn-3" name="fnd-3"><sup>3</sup></a> to the <code>open(2)</code> system call, <code>find</code> uses it
when safely changing directory.  The target directory is first opened
and then <code>find</code> changes working directory with the
<code>fchdir()</code> system call.  This ensures that symbolic links are not
followed, preventing the sort of race condition attack in which use
is made of symbolic links.

   <p>If for any reason this approach does not work, <code>find</code> will fall
back on the method which is normally used if O_NOFOLLOW is not
supported.

   <p>You can tell if your system supports O_NOFOLLOW by running

<pre class="example">     find --version
</pre>
   <p>This will tell you the version number and which features are enabled. 
For example, if I run this on my system now, this gives:
<pre class="example">     GNU find version 4.2.18-CVS
     Features enabled: D_TYPE O_NOFOLLOW(enabled)
</pre>
   <p>Here, you can see that I am running a version of find which was built
from the development (CVS) code prior to the release of
findutils-4.2.18, and that the D_TYPE and O_NOFOLLOW features are
present.  O_NOFOLLOW is qualified with &ldquo;enabled&rdquo;.  This simply means
that the current system seems to support O_NOFOLLOW.  This check is
needed because it is possible to build find on a system that defines
O_NOFOLLOW and then run it on a system that ignores the O_NOFOLLOW
flag.  We try to detect such cases at startup by checking the
operating system and version number; when this happens you will see
&ldquo;O_NOFOLLOW(disabled)&rdquo; instead.

<div class="node">
<p><hr>
<a name="Systems-without-O_005fNOFOLLOW"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Working-with-automounters">Working with automounters</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#O_005fNOFOLLOW">O_NOFOLLOW</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Changing-the-Current-Working-Directory">Changing the Current Working Directory</a>
<br>
</div>

<h5 class="subsubsection">8.2.1.2 Systems without O_NOFOLLOW</h5>

<p>The strategy for preventing this type of problem on systems that lack
support for the O_NOFOLLOW flag is more complex.  Each time
<code>find</code> changes directory, it examines the directory it is about
to move to, issues the <code>chdir()</code> system call, and then checks
that it has ended up in the subdirectory it expected.  If not, an
error message is issued and <code>find</code> exits immediately.  This
method prevents filesystem manipulation attacks from persuading
<code>find</code> to search parts of the filesystem it did not intend. 
However, we heve to take special steps in order not to unneccessarily
conclude that there is a problem with any &ldquo;automount&rdquo; mount points.

<div class="node">
<p><hr>
<a name="Working-with-automounters"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Problems-with-dead-NFS-servers">Problems with dead NFS servers</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Systems-without-O_005fNOFOLLOW">Systems without O_NOFOLLOW</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Changing-the-Current-Working-Directory">Changing the Current Working Directory</a>
<br>
</div>

<h5 class="subsubsection">8.2.1.3 Working with automounters</h5>

<p>Where an automounter is in use it can be the case that the use of the
<code>chdir()</code> system call can itself cause a new filesystem to be
mounted at that point.  On systems that do not support O_NOFOLLOW,
this will cause <code>find</code>'s security check to fail.

   <p>However, this does not normally represent a security problem (since
the automounter configuration is normally set up by the system
administrator).  Therefore, if the <code>chdir()</code> sanity check fails,
<code>find</code> will check to see if a new filesystem has been mounted at
the current directory; if so, <code>find</code> will issue a warning message
and continue.

   <p>To make this solution work, <code>find</code> reads the list of mounted
filesystems at startup, and again when the sanity check fails.  It
compares the two lists to find out if the directory it has moved into
has just been mounted.

<div class="node">
<p><hr>
<a name="Problems-with-dead-NFS-servers"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Working-with-automounters">Working with automounters</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Changing-the-Current-Working-Directory">Changing the Current Working Directory</a>
<br>
</div>

<h5 class="subsubsection">8.2.1.4 Problems with dead NFS servers</h5>

<p>Examining every mount point on the system has a downside too.  In
general, <code>find</code> will be used to search just part of the
filesystem.  However, <code>find</code> examines every mount point.  If the
system has a filesystem mounted on an unresponsive NFS server,
<code>find</code> will hang, waiting for the NFS server to respond.  Worse,
it does this even if the affected mount point is not within the
directory tree that find would have searched anyway.

   <p>This is very unfortunate.  However, this problem only affects systems
that have no support for O_NOFOLLOW.  As far as I can tell, it is not
possible on such systems to fix all three problems (the race
condition, the false-alarm at automount mount points, and the hang at
startup if there is a dead NFS server) at once.  If you have some
ideas about how <code>find</code> could do this better, please send email to
the <a href="mailto:bug-findutils@gnu.org">bug-findutils@gnu.org</a> mailing list.

<div class="node">
<p><hr>
<a name="Race-Conditions-with-_002dexec"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Race-Conditions-with-_002dprint-and-_002dprint0">Race Conditions with -print and -print0</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Changing-the-Current-Working-Directory">Changing the Current Working Directory</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Security-Considerations-for-find">Security Considerations for find</a>
<br>
</div>

<h4 class="subsection">8.2.2 Race Conditions with -exec</h4>

<p>The <span class="samp">-exec</span> action causes another program to be run.  It is
passed the name of the file which is being considered at the time. 
The invoked program will then - normally - perform some action on that
file.  Once again, there is a race condition which can be exploited
here.  We shall take as a specific example the command

<pre class="example">     find /tmp -path /tmp/umsp/passwd -exec /bin/rm
</pre>
   <p>In this simple example, we are identifying just one file to be deleted
and invoking <code>/bin/rm</code> to delete it.  A problem exists because
there is a time gap between the point where <code>find</code> decides that
it needs to process the <span class="samp">-exec</span> action and the point where the
<code>/bin/rm</code> command actually issues the <code>unlink()</code> system
call.  Within this time period, an attacker can rename the
<span class="file">/tmp/umsp</span> directory, replacing it with a symbolic link to
<span class="file">/etc</span>.   There is no way for <code>/bin/rm</code> to determine that it
is working on the same file that <code>find</code> had in mind.   Once the
symbolic link is in place, the attacker has persuaded <code>find</code> to
cause the deletion of the <span class="file">/etc/passwd</span> file, which is not the
effect intended by the command which was actually invoked.

   <p>One possible defence against this type of attack is to modify the
behaviour of <span class="samp">-exec</span> so that the <code>/bin/rm</code> command is run
with the argument <span class="file">./passwd</span> and a suitable choice of working
directory.  This would allow the normal sanity check that <code>find</code>
performs to protect against this form of attack too.  Unfortunately,
this strategy cannot be used as the POSIX standard specifies that the
current working directory for commands invoked via <span class="samp">-exec</span> must
be the same as the current working directory from which <code>find</code>
was invoked.   This means that the <span class="samp">-exec</span> action is inherently
insecure and can't be fixed.

   <p>GNU <code>find</code> implements a more secure variant of the <span class="samp">-exec</span>
action, <span class="samp">-execdir</span>.  The <span class="samp">-execdir</span> action
ensures that it is not necessary to dereference subdirectories to
process target files.  The current directory used to invoke programs
is the same as the directory in which the file to be processed exists
(<span class="file">/tmp/umsp</span> in our example, and only the basename of the file to
be processed is passed to the invoked command, with a <span class="samp">./</span>
prepended (giving <span class="file">./passwd</span> in our example).

   <p>The <span class="samp">-execdir</span> action refuses to do anything if the current
directory is included in the <var>$PATH</var> environment variable.  This
is necessary because <span class="samp">-execdir</span> runs programs in the same
directory in which it finds files &ndash; in general, such a directory
might be writable by untrusted users.  For similar reasons,
<span class="samp">-execdir</span> does not allow <span class="samp">{}</span> to appear in the name of
the command to be run.

<div class="node">
<p><hr>
<a name="Race-Conditions-with-_002dprint-and-_002dprint0"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Race-Conditions-with-_002dexec">Race Conditions with -exec</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Security-Considerations-for-find">Security Considerations for find</a>
<br>
</div>

<h4 class="subsection">8.2.3 Race Conditions with -print and -print0</h4>

<p>The <span class="samp">-print</span> and <span class="samp">-print0</span> actions can be used to produce a
list of files matching some criteria, which can then be used with some
other command, perhaps with <code>xargs</code>.   Unfortunately, this means
that there is an unavoidable time gap between <code>find</code> deciding
that one or more files meet its criteria and the relevant command
being executed.  For this reason, the <span class="samp">-print</span> and <span class="samp">-print0</span>
actions are just as insecure as <span class="samp">-exec</span>.

   <p>In fact, since the construction

<pre class="example">     find ....   -print | xargs ....
</pre>
   <p>does not cope correctly with newlines or other &ldquo;white space&rdquo; in
filenames, and copes poorly with filenames containing quotes, the
<span class="samp">-print</span> action is less secure even than <span class="samp">-print0</span>.

<!-- node-name,  next,  previous,  up -->
<!-- @node Security Considerations for xargs -->
<div class="node">
<p><hr>
<a name="Security-Considerations-for-xargs"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Security-Considerations-for-locate">Security Considerations for locate</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Security-Considerations-for-find">Security Considerations for find</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Security-Considerations">Security Considerations</a>
<br>
</div>

<h3 class="section">8.3 Security Considerations for <code>xargs</code></h3>

<p>The description of the race conditions affecting the <span class="samp">-print</span>
action of <code>find</code> shows that <code>xargs</code> cannot be secure if it
is possible for an attacker to modify a filesystem after <code>find</code>
has started but before <code>xargs</code> has completed all its actions.

   <p>However, there are other security issues that exist even if it is not
possible for an attacker to have access to the filesystem in real
time.  Firstly, if it is possible for an attacker to create files with
names of their own choice on the filesystem, then <code>xargs</code> is
insecure unless the <span class="samp">-0</span> option is used.  If a file with the name
<span class="file">/home/someuser/foo/bar\n/etc/passwd</span> exists (assume that
<span class="samp">\n</span> stands for a newline character), then <code>find ... -print</code>
can be persuaded to print three separate lines:

<pre class="example">     /home/someuser/foo/bar
     
     /etc/passwd
</pre>
   <p>If it finds a blank line in the input, <code>xargs</code> will ignore it. 
Therefore, if some action is to be taken on the basis of this list of
files, the <span class="file">/etc/passwd</span> file would be included even if this was
not the intent of the person running find.  There are circumstances in
which an attacker can use this to their advantage.  The same
consideration applies to filenames containing ordinary spaces rather
than newlines, except that of course the list of filenames will no
longer contain an &ldquo;extra&rdquo; newline.

   <p>This problem is an unavoidable consequence of the default behaviour of
the <code>xargs</code> command, which is specified by the POSIX standard. 
The only ways to avoid this problem are either to avoid all use of
<code>xargs</code> in favour for example of <span class="samp">find -exec</span> or (where
available) <span class="samp">find -execdir</span>, or to use the <span class="samp">-0</span> option, which
ensures that <code>xargs</code> considers filenames to be separated by ASCII
NUL characters rather than whitespace.   However, useful though this
option is, the POSIX standard does not make it mandatory.

<!-- node-name,  next,  previous,  up -->
<div class="node">
<p><hr>
<a name="Security-Considerations-for-locate"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Security-Summary">Security Summary</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Security-Considerations-for-xargs">Security Considerations for xargs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Security-Considerations">Security Considerations</a>
<br>
</div>

<h3 class="section">8.4 Security Considerations for <code>locate</code></h3>

<p>It is fairly unusual for the output of <code>locate</code> to be fed into
another command.  However, if this were to be done, this would raise
the same set of security issues as the use of <span class="samp">find ... -print</span>. 
Although the problems relating to whitespace in filenames can be
resolved by using <code>locate</code>'s <span class="samp">-0</span> option, this still leaves
the race condition problems associated with <span class="samp">find ... -print0</span>. 
There is no way to avoid these problems in the case of <code>locate</code>.

<div class="node">
<p><hr>
<a name="Security-Summary"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Security-Considerations-for-locate">Security Considerations for locate</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Security-Considerations">Security Considerations</a>
<br>
</div>

<h3 class="section">8.5 Summary</h3>

<p>Where untrusted parties can create files on the system, or affect the
names of files that are created, all uses for <code>find</code>,
<code>locate</code> and <code>xargs</code> have known security problems except the
following:

     <dl>
<dt>Informational use only<dd>Uses where the programs are used to prepare lists of filenames upon which no further action will ever be taken.

     <br><dt>-delete<dd>Use of the <span class="samp">-delete</span> action to delete files which meet
specified criteria

     <br><dt>-execdir<dd>Use of the <span class="samp">-execdir</span> action where the <span class="env">PATH</span>
environment variable contains directories which contain only trusted
programs. 
</dl>

<!-- node-name,  next,  previous,  up -->
<div class="node">
<p><hr>
<a name="Error-Messages"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Primary-Index">Primary Index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Security-Considerations">Security Considerations</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">9 Error Messages</h2>

<p>This section describes some of the error messages you might get from
<code>find</code>, <code>xargs</code>, or <code>locate</code>, explains them and in some
cases provides advice as to what you should do about this.

   <p>This manual is written in English.  The GNU findutils software
features translated error messages for many languages.  For this
reason where possible we try to make the error messages produced by
the programs self-explanatory.  This approach avoids asking people to
figure out which English-language error message the test they actually
saw might correspond to. Error messages which are self-explanatory
will not normally be described or discussed in this document.  For
those messages which are discussed in this document, only the
English-language version of the message will be listed.

<ul class="menu">
<li><a accesskey="1" href="#Error-Messages-From-find">Error Messages From find</a>
<li><a accesskey="2" href="#Error-Messages-From-xargs">Error Messages From xargs</a>
<li><a accesskey="3" href="#Error-Messages-From-locate">Error Messages From locate</a>
<li><a accesskey="4" href="#Error-Messages-From-updatedb">Error Messages From updatedb</a>
</ul>

<div class="node">
<p><hr>
<a name="Error-Messages-From-find"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Error-Messages-From-xargs">Error Messages From xargs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Error-Messages">Error Messages</a>
<br>
</div>

<h3 class="section">9.1 Error Messages From find</h3>

     <dl>
<dt><span class="samp">invalid predicate `-foo'</span><dd>This means that the <code>find</code> command line included something that
started with a dash or other special character.  The <code>find</code>
program tried to interpret this as a test, action or option, but
didn't recognise it.  If you intended it to be a test, check what you
specified against the documentation.  If, on the other hand, the
string is the name of a file which has been expanded from a wildcard
(for example because you have a <span class="samp">*</span> on the command line),
consider using <span class="samp">./*</span> or just <span class="samp">.</span> instead.

     <br><dt><span class="samp">unexpected extra predicate</span><dd>This usually happens if you have an extra bracket on the command line
(for example <span class="samp">find . -print \)</span>).

     <br><dt><span class="samp">Warning: filesystem /path/foo has recently been mounted</span><dt><span class="samp">Warning: filesystem /path/foo has recently been unmounted</span><dd>These messages might appear when <code>find</code> moves into a directory
and finds that the device number and inode are different to what it
expected them to be.  If the directory <code>find</code> has moved into is
on an NFS filesystem, it will not issue this message, because
<code>automount</code> frequently mounts new filesystems on directories as
you move into them (that is how it knows you want to use the
filesystem).  So, if you do see this message, be wary &ndash;
<code>automount</code> may not have been responsible.  Consider the
possibility that someone else is manipulating the filesystem while
<code>find</code> is running.  Some people might do this in order to mislead
<code>find</code> or persuade it to look at one set of files when it thought
it was looking at another set.

     <br><dt><span class="samp">/path/foo changed during execution of find (old device number 12345, new device number 6789, filesystem type is &lt;whatever&gt;) [ref XXX]</span><dd>This message is issued when <code>find</code> changes directory and ends up
somewhere it didn't expect to be.  This happens in one of two
circumstances.  Firstly this happens when &ldquo;automount&rdquo; does its thing
on a system where <code>find</code> doesn't know how to determine what the
current set of mounted filesystems is

     <p>Secondly, this can happen when the device number of a directory
appears to change during a change of current directory, but
<code>find</code> is moving up the filesystem hierarchy rather than down it. 
In order to prevent <code>find</code> wandering off into some unexpected
part of the filesystem, we stop it at this point.

     <br><dt><span class="samp">Don't know how to use getmntent() to read `/etc/mtab'.  This is a bug.</span><dd>This message is issued when a problem similar to the above occurs on a
system where <code>find</code> doesn't know how to figure out the current
list of mount points.  Ask for help on <a href="mailto:bug-findutils@gnu.org">bug-findutils@gnu.org</a>.

     <br><dt><span class="samp">/path/foo/bar changed during execution of find (old inode number 12345, new inode number 67893, filesystem type is &lt;whatever&gt;) [ref XXX]"),</span><dd>This message is issued when <code>find</code> changes directory and
discovers that the inode number of that directory once it's got there
is different to the inode number that it obtained when it examined the
directory some time previously.  This normally means that while
<code>find</code> has been deep in a directory hierarchy doing something
time consuming, somebody has moved the one of the parent directories
to another location in the same filesystem.  This may have been done
maliciously, or may not.  In any case, <code>find</code> stops at this point
in order to avoid traversing parts of the filesystem that it wasn't
intended to.  You can use <code>ls -li</code> or <code>find /path -inum
12345 -o -inum 67893</code> to find out more about what has happened.

     <br><dt><span class="samp">sanity check of the fnmatch() library function failed.</span><dd>Please submit a bug report.  You may well be asked questions about
your system, and if you compiled the <code>findutils</code> code yourself,
you should keep your copy of the build tree around.  The likely
explanation is that your system has a buggy implementation of
<code>fnmatch</code> that looks enough like the GNU version to fool
<code>configure</code>, but which doesn't work properly.

     <br><dt><span class="samp">cannot fork</span><dd>This normally happens if you use the <code>-exec</code> action or a
something similar (<code>-ok</code> and so forth) but the system has run out
of free process slots.  This is either because the system is very busy
and the system has reached its maximum process limit, or because you
have a resource limit in place and you've reached it.  Check the
system for runaway processes (if <code>ps</code> still works).  Some process
slots are normally reserved for use by <span class="samp">root</span>.

     <br><dt><span class="samp">some-program terminated by signal 99</span><dd>Some program which was launched via <code>-exec</code> or similar was killed
with a fatal signal.  This is just an advisory message. 
</dl>

<div class="node">
<p><hr>
<a name="Error-Messages-From-xargs"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Error-Messages-From-locate">Error Messages From locate</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Error-Messages-From-find">Error Messages From find</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Error-Messages">Error Messages</a>
<br>
</div>

<h3 class="section">9.2 Error Messages From xargs</h3>

     <dl>
<dt><span class="samp">environment is too large for exec</span><dd>This message means that you have so many environment variables set
(or such large values for them) that there is no room within the
system-imposed limits on program command-line argument length to
invoke any program.  I'm sure you did this deliberately.  Please try
unsetting some environment variables, or exiting the current shell.

     <br><dt><span class="samp">can not fit single argument within argument list size limit</span><dd>You are using the <span class="samp">-i</span> option and <code>xargs</code> doesn't have
enough space to build a command line because it has read in a really
large item and it doesn't fit.  You can probably work around this
problem with the <span class="samp">-s</span> option, but the default size is pretty
large.  You must be trying pretty hard to break <code>xargs</code>.

     <br><dt><span class="samp">cannot fork</span><dd>See the description of the similar message for <code>find</code>.

     <br><dt><span class="samp">&lt;program&gt;: exited with status 255; aborting</span><dd>When a command run by <code>xargs</code> exits with status 255, <code>xargs</code>
is supposed to stop.  If this is not what you intended, wrap the
program you are trying to invoke in a shell script which doesn't
return status 255.

     <br><dt><span class="samp">&lt;program&gt;: terminated by signal 99</span><dd>See the description of the similar message for <code>find</code>. 
</dl>

<div class="node">
<p><hr>
<a name="Error-Messages-From-locate"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Error-Messages-From-updatedb">Error Messages From updatedb</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Error-Messages-From-xargs">Error Messages From xargs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Error-Messages">Error Messages</a>
<br>
</div>

<h3 class="section">9.3 Error Messages From locate</h3>

     <dl>
<dt><span class="samp">warning: database `/usr/local/var/locatedb' is more than 8 days old</span><dd>The <code>locate</code> program relies on a database which is periodically
built by the <code>updatedb</code> program.  That hasn't happened in a long
time.  To fix this problem, run <code>updatedb</code> manually.  This can
often happen on systems that are generally not left on, so the periodic
&ldquo;cron&rdquo; task which normally does this doesn't get a chance to run.

     <br><dt><span class="samp">locate database `/usr/local/var/locatedb' is corrupt or invalid</span><dd>This should not happen.  Re-run <code>updatedb</code>.  If that works, but
<code>locate</code> still produces this error, run <code>locate --version</code>
and <code>updatedb --version</code>.  These should produce the same output. 
If not, you are using a mixed toolset; check your <span class="samp">$PATH</span>
environment variable and your shell aliases (if you have any).  If
both programs claim to be GNU versions, this is a bug; all versions of
these programs should interoperate without problem.  Ask for help on
<a href="mailto:bug-findutils@gnu.org">bug-findutils@gnu.org</a>. 
</dl>

<div class="node">
<p><hr>
<a name="Error-Messages-From-updatedb"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Error-Messages-From-locate">Error Messages From locate</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Error-Messages">Error Messages</a>
<br>
</div>

<h3 class="section">9.4 Error Messages From updatedb</h3>

<p>The <code>updatedb</code> program (and the programs it invokes) do issue
error messages, but none of them seem to me to be candidates for
guidance.  If you are having a problem understanding one of these, ask
for help on <a href="mailto:bug-findutils@gnu.org">bug-findutils@gnu.org</a>.

<div class="node">
<p><hr>
<a name="Primary-Index"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Error-Messages">Error Messages</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="unnumbered"><code>find</code> Primary Index</h2>

<p>This is a list of all of the primaries (tests, actions, and options)
that make up <code>find</code> expressions for selecting files.  See <a href="#find-Expressions">find Expressions</a>, for more information on expressions.

<ul class="index-fn" compact>
<li><a href="#index-_0021-51"><code>!</code></a>: <a href="#Combining-Primaries-With-Operators">Combining Primaries With Operators</a></li>
<li><a href="#index-_0028_0029-50"><code>()</code></a>: <a href="#Combining-Primaries-With-Operators">Combining Primaries With Operators</a></li>
<li><a href="#index-_002c-57"><code>,</code></a>: <a href="#Combining-Primaries-With-Operators">Combining Primaries With Operators</a></li>
<li><a href="#index-_002da-53"><code>-a</code></a>: <a href="#Combining-Primaries-With-Operators">Combining Primaries With Operators</a></li>
<li><a href="#index-_002damin-19"><code>-amin</code></a>: <a href="#Age-Ranges">Age Ranges</a></li>
<li><a href="#index-_002dand-54"><code>-and</code></a>: <a href="#Combining-Primaries-With-Operators">Combining Primaries With Operators</a></li>
<li><a href="#index-_002danewer-23"><code>-anewer</code></a>: <a href="#Comparing-Timestamps">Comparing Timestamps</a></li>
<li><a href="#index-_002datime-16"><code>-atime</code></a>: <a href="#Age-Ranges">Age Ranges</a></li>
<li><a href="#index-_002dcmin-20"><code>-cmin</code></a>: <a href="#Age-Ranges">Age Ranges</a></li>
<li><a href="#index-_002dcnewer-24"><code>-cnewer</code></a>: <a href="#Comparing-Timestamps">Comparing Timestamps</a></li>
<li><a href="#index-_002dctime-17"><code>-ctime</code></a>: <a href="#Age-Ranges">Age Ranges</a></li>
<li><a href="#index-_002dd-41"><code>-d</code></a>: <a href="#Directories">Directories</a></li>
<li><a href="#index-_002ddaystart-22"><code>-daystart</code></a>: <a href="#Age-Ranges">Age Ranges</a></li>
<li><a href="#index-_002ddelete-73"><code>-delete</code></a>: <a href="#Delete-Files">Delete Files</a></li>
<li><a href="#index-_002ddepth-40"><code>-depth</code></a>: <a href="#Directories">Directories</a></li>
<li><a href="#index-_002dempty-28"><code>-empty</code></a>: <a href="#Size">Size</a></li>
<li><a href="#index-_002dexec-67"><code>-exec</code></a>: <a href="#Single-File">Single File</a></li>
<li><a href="#index-_002dexec-69"><code>-exec</code></a>: <a href="#Multiple-Files">Multiple Files</a></li>
<li><a href="#index-_002dexecdir-68"><code>-execdir</code></a>: <a href="#Multiple-Files">Multiple Files</a></li>
<li><a href="#index-_002dexecdir-66"><code>-execdir</code></a>: <a href="#Single-File">Single File</a></li>
<li><a href="#index-_002dfalse-59"><code>-false</code></a>: <a href="#Combining-Primaries-With-Operators">Combining Primaries With Operators</a></li>
<li><a href="#index-_002dfls-63"><code>-fls</code></a>: <a href="#Print-File-Information">Print File Information</a></li>
<li><a href="#index-_002dfprint-61"><code>-fprint</code></a>: <a href="#Print-File-Name">Print File Name</a></li>
<li><a href="#index-_002dfprint0-71"><code>-fprint0</code></a>: <a href="#Safe-File-Name-Handling">Safe File Name Handling</a></li>
<li><a href="#index-_002dfprintf-65"><code>-fprintf</code></a>: <a href="#Print-File-Information">Print File Information</a></li>
<li><a href="#index-_002dfstype-49"><code>-fstype</code></a>: <a href="#Filesystems">Filesystems</a></li>
<li><a href="#index-_002dgid-34"><code>-gid</code></a>: <a href="#Owner">Owner</a></li>
<li><a href="#index-_002dgroup-32"><code>-group</code></a>: <a href="#Owner">Owner</a></li>
<li><a href="#index-_002dignore_005freaddir_005frace-45"><code>-ignore_readdir_race</code></a>: <a href="#Directories">Directories</a></li>
<li><a href="#index-_002dilname-10"><code>-ilname</code></a>: <a href="#Symbolic-Links">Symbolic Links</a></li>
<li><a href="#index-_002diname-2"><code>-iname</code></a>: <a href="#Base-Name-Patterns">Base Name Patterns</a></li>
<li><a href="#index-_002dinum-12"><code>-inum</code></a>: <a href="#Hard-Links">Hard Links</a></li>
<li><a href="#index-_002dipath-6"><code>-ipath</code></a>: <a href="#Full-Name-Patterns">Full Name Patterns</a></li>
<li><a href="#index-_002diregex-8"><code>-iregex</code></a>: <a href="#Full-Name-Patterns">Full Name Patterns</a></li>
<li><a href="#index-_002diwholename-4"><code>-iwholename</code></a>: <a href="#Full-Name-Patterns">Full Name Patterns</a></li>
<li><a href="#index-_002dlinks-15"><code>-links</code></a>: <a href="#Hard-Links">Hard Links</a></li>
<li><a href="#index-_002dlname-9"><code>-lname</code></a>: <a href="#Symbolic-Links">Symbolic Links</a></li>
<li><a href="#index-_002dls-62"><code>-ls</code></a>: <a href="#Print-File-Information">Print File Information</a></li>
<li><a href="#index-_002dmaxdepth-38"><code>-maxdepth</code></a>: <a href="#Directories">Directories</a></li>
<li><a href="#index-_002dmindepth-39"><code>-mindepth</code></a>: <a href="#Directories">Directories</a></li>
<li><a href="#index-_002dmmin-21"><code>-mmin</code></a>: <a href="#Age-Ranges">Age Ranges</a></li>
<li><a href="#index-_002dmount-48"><code>-mount</code></a>: <a href="#Filesystems">Filesystems</a></li>
<li><a href="#index-_002dmtime-18"><code>-mtime</code></a>: <a href="#Age-Ranges">Age Ranges</a></li>
<li><a href="#index-_002dname-1"><code>-name</code></a>: <a href="#Base-Name-Patterns">Base Name Patterns</a></li>
<li><a href="#index-_002dnewer-25"><code>-newer</code></a>: <a href="#Comparing-Timestamps">Comparing Timestamps</a></li>
<li><a href="#index-_002dnogroup-36"><code>-nogroup</code></a>: <a href="#Owner">Owner</a></li>
<li><a href="#index-_002dnoignore_005freaddir_005frace-46"><code>-noignore_readdir_race</code></a>: <a href="#Directories">Directories</a></li>
<li><a href="#index-_002dnoleaf-44"><code>-noleaf</code></a>: <a href="#Directories">Directories</a></li>
<li><a href="#index-_002dnot-52"><code>-not</code></a>: <a href="#Combining-Primaries-With-Operators">Combining Primaries With Operators</a></li>
<li><a href="#index-_002dnouser-35"><code>-nouser</code></a>: <a href="#Owner">Owner</a></li>
<li><a href="#index-_002do-55"><code>-o</code></a>: <a href="#Combining-Primaries-With-Operators">Combining Primaries With Operators</a></li>
<li><a href="#index-_002dok-72"><code>-ok</code></a>: <a href="#Querying">Querying</a></li>
<li><a href="#index-_002dor-56"><code>-or</code></a>: <a href="#Combining-Primaries-With-Operators">Combining Primaries With Operators</a></li>
<li><a href="#index-_002dpath-5"><code>-path</code></a>: <a href="#Full-Name-Patterns">Full Name Patterns</a></li>
<li><a href="#index-_002dperm-37"><code>-perm</code></a>: <a href="#Permissions">Permissions</a></li>
<li><a href="#index-_002dprint-60"><code>-print</code></a>: <a href="#Print-File-Name">Print File Name</a></li>
<li><a href="#index-_002dprint0-70"><code>-print0</code></a>: <a href="#Safe-File-Name-Handling">Safe File Name Handling</a></li>
<li><a href="#index-_002dprintf-64"><code>-printf</code></a>: <a href="#Print-File-Information">Print File Information</a></li>
<li><a href="#index-_002dprune-42"><code>-prune</code></a>: <a href="#Directories">Directories</a></li>
<li><a href="#index-_002dquit-43"><code>-quit</code></a>: <a href="#Directories">Directories</a></li>
<li><a href="#index-_002dregex-7"><code>-regex</code></a>: <a href="#Full-Name-Patterns">Full Name Patterns</a></li>
<li><a href="#index-_002dsamefile-11"><code>-samefile</code></a>: <a href="#Hard-Links">Hard Links</a></li>
<li><a href="#index-_002dsize-27"><code>-size</code></a>: <a href="#Size">Size</a></li>
<li><a href="#index-_002dtrue-58"><code>-true</code></a>: <a href="#Combining-Primaries-With-Operators">Combining Primaries With Operators</a></li>
<li><a href="#index-_002dtype-29"><code>-type</code></a>: <a href="#Type">Type</a></li>
<li><a href="#index-_002duid-33"><code>-uid</code></a>: <a href="#Owner">Owner</a></li>
<li><a href="#index-_002dused-26"><code>-used</code></a>: <a href="#Comparing-Timestamps">Comparing Timestamps</a></li>
<li><a href="#index-_002duser-31"><code>-user</code></a>: <a href="#Owner">Owner</a></li>
<li><a href="#index-_002dwholename-3"><code>-wholename</code></a>: <a href="#Full-Name-Patterns">Full Name Patterns</a></li>
<li><a href="#index-_002dxdev-47"><code>-xdev</code></a>: <a href="#Filesystems">Filesystems</a></li>
<li><a href="#index-_002dxtype-30"><code>-xtype</code></a>: <a href="#Type">Type</a></li>
   </ul>   <div class="footnote">
<hr>
<a name="texinfo-footnotes-in-document"></a><h4>Footnotes</h4><p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> Of course, I trust these parties to a large
extent anyway, because I install software provided by them; I choose
to trust them in this way, and that's a deliberate choice</p>

   <p class="footnote"><small>[<a name="fn-2" href="#fnd-2">2</a>]</small> This is more or less the
definition of the term &ldquo;race condition&rdquo;</p>

   <p class="footnote"><small>[<a name="fn-3" href="#fnd-3">3</a>]</small> GNU/Linux
(kernel version 2.1.126 and later) and FreeBSD (3.0-CURRENT and later)
support this</p>

   <p><hr></div>

</body></html>

