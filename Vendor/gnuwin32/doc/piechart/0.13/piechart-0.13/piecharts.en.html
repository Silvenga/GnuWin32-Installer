<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<!- use_include ->
























































<html>
<head>
<title>Bernhard Reiter: Piecharts with (GNU)plotutils</title>
</head>

<h1>Piecharts with (GNU)plotutils</h1>
An experimental C-program, which can create piecharts in 
various outputformats
using GNU plotutils.
E.g, you can postprocess the results with xfig, idraw,
<a href="http://www.skencil.org/">Skencil</a> 
or any other vector-drawing program that understands 
one of the output formats.
It is rudimentary and  
an example for programming the
libplot library. It can be useful, though.

<h2>Piecharts are usually a bad idea</h2>
In most cases they are not a good way to represent quantitative information.
A 
<strong><a href="warning.en.html">Warning</a></strong> is printed by
<tt>piechart</tt> since v0.10 for this reason.

<h2>Usage</h2>

<table>
<tr> <td>
An inputfile (named <tt>probe1.dat</tt>) like:
<pre>
# a comment, followed by an empty line

Bernhard 50.5
Berny   20.02
Joe Box 10
</pre>
will result into an output like this: 
</td><td>
<img src="probe1.png" align="top" alt="[ piechart image ]">
</td>
</tr>
</table>
<br>
Used command: <tt>piechart -T png -r0.5 -d0.05 -C skyblue2,green,aquamarine 
-t 'Hello World!' -fr &lt;probe1.dat &gt;probe1.png</tt>
and then cropped the image.
<br>
Plotutils' libplot supports different outputformats in addition to X11 onscreen,
e.g.: plot(meta), eps, hpgl, tek, ai, png, regis, svg, pnm, 
(uncompressed)gif and fig.
<p>
A <a href="probe1.X11.png">screenshot of an X11 output</a>.

<h2>About plotutils</h2>
<a href="http://www.gnu.org/software/plotutils/plotutils.html"
	>The <tt>plotutils</tt> package<img src="./images/leave-ffffee.png" border=0 alt="(leave)"></a>
 is GNU software and can be obtained from any GNU ftp site mirror.
<p>
<ul>
	<li><a href="http://gd.tuwien.ac.at:8050/D/1/PLOTUTILS.html"
	>SAL entry for plotutils<img src="./images/leave-ffffee.png" border=0 alt="(leave)"></a>
	(mirror in Austria)
	<li><a href="http://archiv.leo.org/pub/comp/os/unix/gnu/plotutils/"
	>http://archiv.leo.org/pub/comp/os/unix/gnu/plotutils/<img src="./images/leave-ffffee.png" border=0 alt="(leave)"></a>
	(in Germany)
	<li><a href="http://agnes.dida.physik.uni-essen.de/~gnu/order/ftp.html"
	>FTP Sites for GNU Software<img src="./images/leave-ffffee.png" border=0 alt="(leave)"></a> 
	(at the German mirror of www.gnu.org)
      </ul>

<h2>Links</h2>

<ul>
	<li> The 
	<a href="http://gnuwin32.sourceforge.net/"
	>gnuwin32 project<img src="./images/leave-ffffee.png" border=0 alt="(leave)"></a> has ported libplot and 
	<a href="http://gnuwin32.sourceforge.net/packages/piechart.htm"
	>piechart v0.11<img src="./images/leave-ffffee.png" border=0 alt="(leave)"></a>
	to MS-Windows.
	<li>
	Mike Miller has written a python version of piechart v0.6 to test
	his 
	<a href="http://php.iupui.edu/~mmiller3/python/#plotwrap"
	><tt>plot_wrap</tt>- 
	A SWIG wrapping of libplot<img src="./images/leave-ffffee.png" border=0 alt="(leave)"></a>.
	<!--
	<a href="http://www.npl.uiuc.edu/~miller/python/"
	><tt>plot_wrap</tt>- 
	A SWIG wrapping of libplot<img src="/images/leave-ffffee.png" border=0 alt="(leave)"></a>.
	<tt>plot_wrap</tt>- 
	A SWIG wrapping of libplot. 
	-->
	<em><small>(Thanks to Alexander Ulanovsky for finding and
	emailing me the new URL in July 2002.)
	</small></em>

	<li>Even a perl variant as example for 
	<a href="http://w3.man.torun.pl/~makler/prog/Plotter/"
	>Plotter.pm - perl module for 
	C++ libplotter (plotutils)<img src="./images/leave-ffffee.png" border=0 alt="(leave)"></a>
	is provided by Piotr Klaban. It is based on piechart v0.8 .

	<li>
	<a href="http://www.skencil.org/"
	>Skencil<img src="./images/leave-ffffee.png" border=0 alt="(leave)"></a>
	a powerful Free Software vector drawing application.

	<li>See
	<a href="http://duke.usask.ca/~macphed/soft/fig/"
	>XFIG, FIG and associated software<img src="./images/leave-ffffee.png" border=0 alt="(leave)"></a>
	about what you can do with the fig format.

	<li><a href="http://ftp.llp.fu-berlin.de/lsoft/E/2/DRAW_IVTOOLS.html"
	<!--<li><a href="http://ftp.llp.fu-berlin.de/lsoft/E/2/DRAW_IVTOOLS.html"-->
	<li><a href="http://gd.tuwien.ac.at:8050/E/2/DRAW_IVTOOLS.html"
	>SAL entry for idraw (and all ivtools)<img src="./images/leave-ffffee.png" border=0 alt="(leave)"></a>
        (mirror in Austria)

	<li>A <a href="http://biolpc22.york.ac.uk/linux/plotutils/"
	><strong>barchart</strong> version<img src="./images/leave-ffffee.png" border=0 alt="(leave)"></a> has 
	been created by Chris Elliot.

	<li>For other <em>barcharting needs</em> 
	<a href="http://www.usf.uni-osnabrueck.de/~breiter/tools/gnuplot/barchart.en.html"
	>Filled boxes with gnuplot</a> might be an option.
</ul>


<h2>download</h2>
Get the source -- compile the program. Unless you can find a
precompiled version for your system, of course. Check the link section.
You need to have the libplot library from the plotutils package
installed. 

<p>
Get one of the stable versions below or look in the 
<a href="development/index.html">development directory</a>
for contributions. There is also a 
<a href="http://intevation.de/cgi-bin/viewcvs-misc.cgi/piechart/"
>piechart CVS repository</a>


<h3>v0.13</h3>
New features: "-B" setting the size of the output bitmap; 
"-n" for specifying the fontsize. (Contributions of Alexander Pohoyda).
<br>
Bugfix: Compiles with gcc 3.3.x again.
<br>
Tested with plotutils-2.4.1. 
Check <tt>piechart -h</tt> for usage. 

<ul>
<li><a href="piechart.c">piechart.c<img src="./images/download-ffffee.png" border=0 alt="(download)"></a> v0.13
<li><a href="makefile">makefile<img src="./images/download-ffffee.png" border=0 alt="(download)"></a> (Rev:1.12)
<li><a href="COPYING">COPYING<img src="./images/download-ffffee.png" border=0 alt="(download)"></a> GPL v2
</ul>

<h3>v0.12</h3>
Bugfix release: Does not seqfault when using "-f". (Reported by Franck Aniere)
<br>
Tested with plotutils-2.4.1. 
<br>
<a href="v0.12/index.html">v0.12</a>

<h3>v0.11</h3>
Bugfix release: Does not seqfault when displaying without percentages.
(Thanks for Satish Alreja for reporting.) <br>
Added more available terminal options to the usage message. 
Tested with plotutils-2.4.1. <br>
Check <tt>piechart -h</tt> for usage. 
<br>
<a href="v0.11/index.html">v0.11</a>


<h3>v0.10</h3>
Issues a general warning now. Can display the percentage values now through
new option "-f". New option "-p" pulls a slice out of the pie.
Check <tt>piechart -h</tt> for usage.
<br>
<a href="v0.10/index.html">v0.10</a>



<h3>v0.9</h3>
Ready for plotutils-2.2 tested with plotutils-2.3.
Minor improvements over v0.8:
<a href="v0.9/index.html">v0.9</a>
<br>
See older versions for use with plotutils-2.0 or 2.1.x.


<h3>v0.8</h3>
A bugfix-release:
Label length is dynamic now.
Piechart terminates strings after
strncpy(), Bug reported by Martin J. Evans fixed.
<br>
<a href="v0.8/index.html">v0.8</a>

<h3>v0.7</h3>
Improvements: Added some options and structured the code a little bit.
<br>
<a href="v0.7/index.html">v0.7</a>
<p>

<kbd>piechart -h</kbd> gives:
<small><pre>
piechart version 0.7 (RCS-$Revision: 1.9 $)
Copyright (C) 1998 by Bernhard Reiter. 
The GNU GENERAL PUBLIC LICENSE applies. Absolutly No Warranty!
compiled with option: DEBUG
usage: /home/gis/breiter/hacking/piecharts/piechart [options]
	 the stdin is read once.
	 options are:
		-t Title	set "Title" as piechart title
		-T Display-Type	one of X, ps, fig, hpgl, tek, or meta
				(meta is the default)
		-r radius	float out of [0.1;1.2] default:0.8
		-d textdistance	float out of [-radius;1.2] default:0.0
		-C colornames	comma separated list of colornames
				(see valid names in color.txt of plotutils doc.)<br>
		-h		print this help and exit
		-V		print version and exit

</pre></small>

<h3>v0.6a</h3>
Adapted for plotutils-2.0. (Also tested with plotutils-2.1 .):
<a href="v0.6a/index.html">v0.6a</a>
	
<h3>v0.5a</h3>
For plotutils-1.3, you will need: <a href="v0.5a/index.html">v0.5a</a>

<h2>Intended Use</h2>
Though being an example program, this piechart creation mechanism might
be useful. If you have some script processing, e.g. you are like me and do 
most of your scientific calculations with AWK, the results need to be
visualised. You also need some graphics for illustration of numbers to 
be published. Most data can be plotted and printed with gnuplot 
(<small>a 99% free program</small>), but you have a problem
with displaying parts of an entity, like mass balances. This piechart program
can be used to produce a raw picture. Postprocess the fig format output
with xfig and you can get a nice eps file for inclusion into your documents.

<a href="N_in_water.better.eps">See this complicated example
which shows Phosphor entries in flowing waters. Estimated for Germany 1995
by the Umweltbundesamt <small>(click for .eps file)</small>: 
<img src="N_in_water.better.png" alt="[Example .eps file]"></a>
<small>(I only added the two brackets on the right and zoomed the headline a
bit with xfig.)</small>
<p>
The task of displaying charts and producing a nice vector format 
is a common "nice-to-have-feature" for all spreadsheets. It could be separated.
Expanding the idea of my little piechart program would produce a 
useful extension to other free software.

<h2>The Future?</h2>
There are no plans to further improve piechart.c. It will be kept available
with an occasional update if bugs or patches trigger one.
Bernhard will hand over maintenance to someone that demonstrates 
the necessary skills and interest to do so.
<p>
The development of the plotutils package has gone dormant since 2000.
Time will tell if it will get picked up again.
<p>
When writing piechart.c I originally though that:
<em>"
Someone should come up
with an textformat describing piecharts, which spreadsheets could export.
"</em>
<br>
Since then I have realised that using piecharts can only be used to hide data,
but I still believe that seperateing tasks between loosely couple components
is a good idea. The creation of charts in general could be an example for this.
<p>







<!- begin_footer ->
</td></tr>

<tr valign=bottom>
<td bgcolor="#c0c0c0" nowrap>

«<a href="http://www.usf.uos.de/~breiter/index.en.html">Bernhard`s Homepage</a>

</td>
</tr>

<tr valign=top>
<td bgcolor="#c0c0c0" nowrap>
<hr>
<font face="Arial,Helvetica">
<a href="http://www.usf.uos.de/internal/">Internal</a>

</font>
</td>

<td>
<hr>
last modified: September 2004
<br>
<address>
E-Mail: <a href="mailto:Bernhard.Reiter@usf.Uni-Osnabrueck.DE">Bernhard.Reiter@usf.Uni-Osnabrueck.DE</a>

</address>

</td>
</tr>

<tr valign=top>
<td bgcolor="#c0c0c0" nowrap colspan=2>


<p>
[ 
<a href="http://www.usf.uos.de/~breiter/index.de.html">Bernhards Heimatseite(&#187;German)</a>
 ]
[ 
<a href="http://www.gnu.org/software/plotutils/plotutils.html"
	>plotutils - GNU Project - FSF<img src="./images/leave-ffffee.png" border=0 alt="(leave)"></a>
 ]
[ 
<a href="http://www.npl.uiuc.edu/~miller/python/"
	><tt>plot_wrap</tt>- A SWIG wrapping of libplot<img src="./images/leave-ffffee.png" border=0 alt="(leave)"></a>
 ]
[ 
<a href="http://duke.usask.ca/~macphed/soft/fig/"
	>XFIG, FIG and associated software<img src="./images/leave-ffffee.png" border=0 alt="(leave)"></a>
 ]
[ 
<a href="http://biolpc22.york.ac.uk/linux/plotutils/"
	>program ascii_chart<img src="./images/leave-ffffee.png" border=0 alt="(leave)"></a>
 ]





</body>
</html>

