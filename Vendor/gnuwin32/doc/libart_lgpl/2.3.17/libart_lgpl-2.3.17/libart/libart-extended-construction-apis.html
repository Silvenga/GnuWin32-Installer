<HTML
><HEAD
><TITLE
>Extended Construction APIs</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.64
"><LINK
REL="HOME"
TITLE="The libart library"
HREF="libart.html"><LINK
REL="UP"
TITLE="Construction APIs"
HREF="basic-foo.html"><LINK
REL="PREVIOUS"
TITLE="Core Construction APIs"
HREF="libart-core-construction-apis.html"><LINK
REL="NEXT"
TITLE="Transformation operations"
HREF="libart-transformation-operations.html"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
BGCOLOR="#000000"
CELLPADDING="1"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
><FONT
COLOR="#FFFFFF"
SIZE="5"
>The libart library</FONT
></TH
></TR
><TR
><TD
WIDTH="25%"
BGCOLOR="#C00000"
ALIGN="left"
><A
HREF="libart-core-construction-apis.html"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
>&#60;&#60;&#60; Previous Page</B
></FONT
></A
></TD
><TD
WIDTH="25%"
BGCOLOR="#0000C0"
ALIGN="center"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
><A
HREF="libart.html"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
>Home</B
></FONT
></A
></B
></FONT
></TD
><TD
WIDTH="25%"
BGCOLOR="#00C000"
ALIGN="center"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
><A
HREF="basic-foo.html"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
>Up</B
></FONT
></A
></B
></FONT
></TD
><TD
WIDTH="25%"
BGCOLOR="#C00000"
ALIGN="right"
><A
HREF="libart-transformation-operations.html"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
>Next Page &#62;&#62;&#62;</B
></FONT
></A
></TD
></TR
></TABLE
></DIV
><H1
><A
NAME="LIBART-EXTENDED-CONSTRUCTION-APIS"
>Extended Construction APIs</A
></H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN934"
></A
><H2
>Name</H2
>Extended Construction APIs&nbsp;--&nbsp;Extended Construction API</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN937"
></A
><H2
>Synopsis</H2
><TABLE
BORDER="0"
BGCOLOR="#D6E8FF"
WIDTH="100%"
CELLPADDING="6"
><TR
><TD
><PRE
CLASS="SYNOPSIS"
>&#13;

struct      <A
HREF="libart-extended-construction-apis.html#ARTVPATHDASH"
>ArtVpathDash</A
>;
<A
HREF="libart-core-construction-apis.html#ARTVPATH"
>ArtVpath</A
>*   <A
HREF="libart-extended-construction-apis.html#ART-VPATH-DASH"
>art_vpath_dash</A
>                  (const <A
HREF="libart-core-construction-apis.html#ARTVPATH"
>ArtVpath</A
> *vpath,
                                             const <A
HREF="libart-extended-construction-apis.html#ARTVPATHDASH"
>ArtVpathDash</A
> *dash);
enum        <A
HREF="libart-extended-construction-apis.html#ARTPATHSTROKEJOINTYPE"
>ArtPathStrokeJoinType</A
>;
enum        <A
HREF="libart-extended-construction-apis.html#ARTPATHSTROKECAPTYPE"
>ArtPathStrokeCapType</A
>;
ArtSVP*     <A
HREF="libart-extended-construction-apis.html#ART-SVP-VPATH-STROKE"
>art_svp_vpath_stroke</A
>            (<A
HREF="libart-core-construction-apis.html#ARTVPATH"
>ArtVpath</A
> *vpath,
                                             <A
HREF="libart-extended-construction-apis.html#ARTPATHSTROKEJOINTYPE"
>ArtPathStrokeJoinType</A
> join,
                                             <A
HREF="libart-extended-construction-apis.html#ARTPATHSTROKECAPTYPE"
>ArtPathStrokeCapType</A
> cap,
                                             double line_width,
                                             double miter_limit,
                                             double flatness);
<A
HREF="libart-core-construction-apis.html#ARTVPATH"
>ArtVpath</A
>*   <A
HREF="libart-extended-construction-apis.html#ART-VPATH-NEW-CIRCLE"
>art_vpath_new_circle</A
>            (double x,
                                             double y,
                                             double r);</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN960"
></A
><H2
>Description</H2
><P
>The simple construction APIs we have described just before
allow you to build your own simple vector paths but it is often useful
to be able to create circles, ellipses, straight lines with a non-zero width
and such... To do so, we have the folowing functions available.
Sample code for these API functions (namely, <TT
CLASS="FUNCTION"
>art_svp_vpath_stroke</TT
>
and <TT
CLASS="FUNCTION"
>art_vpath_dash</TT
>) can be found <A
HREF="./art-dash.tar.gz"
TARGET="_top"
>there</A
>
in the function <TT
CLASS="FUNCTION"
>make_path</TT
>.</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN967"
></A
><H2
>Details</H2
><DIV
CLASS="REFSECT2"
><A
NAME="AEN969"
></A
><H3
><A
NAME="ARTVPATHDASH"
></A
>struct ArtVpathDash</H3
><TABLE
BORDER="0"
BGCOLOR="#D6E8FF"
WIDTH="100%"
CELLPADDING="6"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>struct ArtVpathDash {
  double offset;
  int n_dash;
  double *dash;
};</PRE
></TD
></TR
></TABLE
><P
>This structure describes the dashing style to be
applied with <TT
CLASS="FUNCTION"
>art_vpath_dash</TT
> 
to a vpath.
	<DIV
CLASS="FIGURE"
><A
NAME="AEN975"
></A
><P
><B
>Figure 1. Dashes</B
></P
><P
><IMG
SRC="art-dash-style.png"></P
></DIV
>
The folowing code examplifies how to use this structure: it creates the <TT
CLASS="FUNCTION"
>dash_style</TT
>
corresponding to the example represented in the figure above: the first dash (the black one) has a length 
of <TT
CLASS="FILENAME"
>dash_style.dash[0] - dash_style.offset</TT
>. The second dash has a length of 
<TT
CLASS="FILENAME"
>dash_style.dash[1]</TT
> and the third
dash has a length of <TT
CLASS="FILENAME"
>dash_style.dash[0]</TT
>...
<TABLE
BORDER="0"
BGCOLOR="#D6E8FF"
WIDTH="100%"
CELLPADDING="6"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>static ArtSVP *
  ArtVpathDash dash_style;

  dash_style.offset = 5;
  dash_style.n_dash = 3;
  dash_style.dash = art_new (double, 3);
  dash_style.dash[0] = 10;
  dash_style.dash[1] = 20;&#13;</PRE
></TD
></TR
></TABLE
></P
><DIV
CLASS="INFORMALTABLE"
><A
NAME="AEN983"
></A
><P
></P
><TABLE
BORDER="0"
WIDTH="100%"
BGCOLOR="#FFF0D0"
CELLSPACING="0"
CELLPADDING="4"
CLASS="CALSTABLE"
><TBODY
><TR
><TD
WIDTH="20%"
ALIGN="LEFT"
VALIGN="TOP"
>double <TT
CLASS="STRUCTFIELD"
><I
>offset</I
></TT
></TD
><TD
WIDTH="80%"
ALIGN="LEFT"
VALIGN="TOP"
>specifies the phase of the pattern. That is, how many pixels into the dash-list 
the pattern should actually begin.</TD
></TR
><TR
><TD
WIDTH="20%"
ALIGN="LEFT"
VALIGN="TOP"
>int <TT
CLASS="STRUCTFIELD"
><I
>n_dash</I
></TT
></TD
><TD
WIDTH="80%"
ALIGN="LEFT"
VALIGN="TOP"
>number of elements in <TT
CLASS="PARAMETER"
><I
>dash</I
></TT
>.</TD
></TR
><TR
><TD
WIDTH="20%"
ALIGN="LEFT"
VALIGN="TOP"
>double *<TT
CLASS="STRUCTFIELD"
><I
>dash</I
></TT
></TD
><TD
WIDTH="80%"
ALIGN="LEFT"
VALIGN="TOP"
>the initial and alternating elements (second, fourth, and so on) of the
dash_list are the even dashes, and the others are the odd
dashes.  Each element specifies a dash length. All of the elements must be nonzero.
Specifying an odd-length list is equivalent to
specifying the same list concatenated with itself to produce an even-length list&#13;</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><HR><DIV
CLASS="REFSECT2"
><A
NAME="AEN1003"
></A
><H3
><A
NAME="ART-VPATH-DASH"
></A
>art_vpath_dash ()</H3
><TABLE
BORDER="0"
BGCOLOR="#D6E8FF"
WIDTH="100%"
CELLPADDING="6"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
><A
HREF="libart-core-construction-apis.html#ARTVPATH"
>ArtVpath</A
>*   art_vpath_dash                  (const <A
HREF="libart-core-construction-apis.html#ARTVPATH"
>ArtVpath</A
> *vpath,
                                             const <A
HREF="libart-extended-construction-apis.html#ARTVPATHDASH"
>ArtVpathDash</A
> *dash);</PRE
></TD
></TR
></TABLE
><P
>Creates a new vpath that is the result of applying dash style <TT
CLASS="PARAMETER"
><I
>dash</I
></TT
>
to <TT
CLASS="PARAMETER"
><I
>vpath</I
></TT
>.</P
><P
>This implementation has two known flaws:</P
><P
>First, it adds a spurious break at the beginning of the vpath. The
only way I see to resolve this flaw is to run the state forward one
dash break at the beginning, and fix up by looping back to the
first dash break at the end. This is doable but of course adds some
complexity.</P
><P
>Second, it does not suppress output points that are within epsilon
of each other.</P
><P
></P
><DIV
CLASS="INFORMALTABLE"
><A
NAME="AEN1017"
></A
><P
></P
><TABLE
BORDER="0"
WIDTH="100%"
BGCOLOR="#FFD0D0"
CELLSPACING="0"
CELLPADDING="4"
CLASS="CALSTABLE"
><TBODY
><TR
><TD
WIDTH="20%"
ALIGN="RIGHT"
VALIGN="TOP"
><TT
CLASS="PARAMETER"
><I
>vpath</I
></TT
>&nbsp;:</TD
><TD
WIDTH="80%"
ALIGN="LEFT"
VALIGN="TOP"
> Original vpath.</TD
></TR
><TR
><TD
WIDTH="20%"
ALIGN="RIGHT"
VALIGN="TOP"
><TT
CLASS="PARAMETER"
><I
>dash</I
></TT
>&nbsp;:</TD
><TD
WIDTH="80%"
ALIGN="LEFT"
VALIGN="TOP"
> Dash style.</TD
></TR
><TR
><TD
WIDTH="20%"
ALIGN="RIGHT"
VALIGN="TOP"
><I
CLASS="EMPHASIS"
>Returns</I
> :</TD
><TD
WIDTH="80%"
ALIGN="LEFT"
VALIGN="TOP"
> Newly created vpath.</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><HR><DIV
CLASS="REFSECT2"
><A
NAME="AEN1034"
></A
><H3
><A
NAME="ARTPATHSTROKEJOINTYPE"
></A
>enum ArtPathStrokeJoinType</H3
><TABLE
BORDER="0"
BGCOLOR="#D6E8FF"
WIDTH="100%"
CELLPADDING="6"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>typedef enum {
  ART_PATH_STROKE_JOIN_MITER,
  ART_PATH_STROKE_JOIN_ROUND,
  ART_PATH_STROKE_JOIN_BEVEL
} ArtPathStrokeJoinType;</PRE
></TD
></TR
></TABLE
><P
></P
></DIV
><HR><DIV
CLASS="REFSECT2"
><A
NAME="AEN1039"
></A
><H3
><A
NAME="ARTPATHSTROKECAPTYPE"
></A
>enum ArtPathStrokeCapType</H3
><TABLE
BORDER="0"
BGCOLOR="#D6E8FF"
WIDTH="100%"
CELLPADDING="6"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>typedef enum {
  ART_PATH_STROKE_CAP_BUTT,
  ART_PATH_STROKE_CAP_ROUND,
  ART_PATH_STROKE_CAP_SQUARE
} ArtPathStrokeCapType;</PRE
></TD
></TR
></TABLE
><P
></P
></DIV
><HR><DIV
CLASS="REFSECT2"
><A
NAME="AEN1044"
></A
><H3
><A
NAME="ART-SVP-VPATH-STROKE"
></A
>art_svp_vpath_stroke ()</H3
><TABLE
BORDER="0"
BGCOLOR="#D6E8FF"
WIDTH="100%"
CELLPADDING="6"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>ArtSVP*     art_svp_vpath_stroke            (<A
HREF="libart-core-construction-apis.html#ARTVPATH"
>ArtVpath</A
> *vpath,
                                             <A
HREF="libart-extended-construction-apis.html#ARTPATHSTROKEJOINTYPE"
>ArtPathStrokeJoinType</A
> join,
                                             <A
HREF="libart-extended-construction-apis.html#ARTPATHSTROKECAPTYPE"
>ArtPathStrokeCapType</A
> cap,
                                             double line_width,
                                             double miter_limit,
                                             double flatness);</PRE
></TD
></TR
></TABLE
><P
>Computes an svp representing the stroked outline of <TT
CLASS="PARAMETER"
><I
>vpath</I
></TT
>. The
width of the stroked line is <TT
CLASS="PARAMETER"
><I
>line_width</I
></TT
>.</P
><P
>Lines are joined according to the <TT
CLASS="PARAMETER"
><I
>join</I
></TT
> rule. Possible values are
ART_PATH_STROKE_JOIN_MITER (for mitered joins),
ART_PATH_STROKE_JOIN_ROUND (for round joins), and
ART_PATH_STROKE_JOIN_BEVEL (for bevelled joins). The mitered join
is converted to a bevelled join if the miter would extend to a
distance of more than <TT
CLASS="PARAMETER"
><I
>miter_limit</I
></TT
> * <TT
CLASS="PARAMETER"
><I
>line_width</I
></TT
> from the actual
join point.</P
><P
>If there are open subpaths, the ends of these subpaths are capped
according to the <TT
CLASS="PARAMETER"
><I
>cap</I
></TT
> rule. Possible values are
ART_PATH_STROKE_CAP_BUTT (squared cap, extends exactly to end
point), ART_PATH_STROKE_CAP_ROUND (rounded half-circle centered at
the end point), and ART_PATH_STROKE_CAP_SQUARE (squared cap,
extending half <TT
CLASS="PARAMETER"
><I
>line_width</I
></TT
> past the end point).</P
><P
>The <TT
CLASS="PARAMETER"
><I
>flatness</I
></TT
> parameter controls the accuracy of the rendering. It
is most important for determining the number of points to use to
approximate circular arcs for round lines and joins. In general, the
resulting vector path will be within <TT
CLASS="PARAMETER"
><I
>flatness</I
></TT
> pixels of the "ideal"
path containing actual circular arcs. I reserve the right to use
the <TT
CLASS="PARAMETER"
><I
>flatness</I
></TT
> parameter to convert bevelled joins to miters for very
small turn angles, as this would reduce the number of points in the
resulting outline path.</P
><P
>The resulting path is "clean" with respect to self-intersections, i.e.
the winding number is 0 or 1 at each point.</P
><P
></P
><DIV
CLASS="INFORMALTABLE"
><A
NAME="AEN1071"
></A
><P
></P
><TABLE
BORDER="0"
WIDTH="100%"
BGCOLOR="#FFD0D0"
CELLSPACING="0"
CELLPADDING="4"
CLASS="CALSTABLE"
><TBODY
><TR
><TD
WIDTH="20%"
ALIGN="RIGHT"
VALIGN="TOP"
><TT
CLASS="PARAMETER"
><I
>vpath</I
></TT
>&nbsp;:</TD
><TD
WIDTH="80%"
ALIGN="LEFT"
VALIGN="TOP"
> <A
HREF="libart-core-construction-apis.html#ARTVPATH"
>ArtVPath</A
> to stroke.</TD
></TR
><TR
><TD
WIDTH="20%"
ALIGN="RIGHT"
VALIGN="TOP"
><TT
CLASS="PARAMETER"
><I
>join</I
></TT
>&nbsp;:</TD
><TD
WIDTH="80%"
ALIGN="LEFT"
VALIGN="TOP"
> Join style.</TD
></TR
><TR
><TD
WIDTH="20%"
ALIGN="RIGHT"
VALIGN="TOP"
><TT
CLASS="PARAMETER"
><I
>cap</I
></TT
>&nbsp;:</TD
><TD
WIDTH="80%"
ALIGN="LEFT"
VALIGN="TOP"
> Cap style.</TD
></TR
><TR
><TD
WIDTH="20%"
ALIGN="RIGHT"
VALIGN="TOP"
><TT
CLASS="PARAMETER"
><I
>line_width</I
></TT
>&nbsp;:</TD
><TD
WIDTH="80%"
ALIGN="LEFT"
VALIGN="TOP"
> Width of stroke.</TD
></TR
><TR
><TD
WIDTH="20%"
ALIGN="RIGHT"
VALIGN="TOP"
><TT
CLASS="PARAMETER"
><I
>miter_limit</I
></TT
>&nbsp;:</TD
><TD
WIDTH="80%"
ALIGN="LEFT"
VALIGN="TOP"
> Miter limit.</TD
></TR
><TR
><TD
WIDTH="20%"
ALIGN="RIGHT"
VALIGN="TOP"
><TT
CLASS="PARAMETER"
><I
>flatness</I
></TT
>&nbsp;:</TD
><TD
WIDTH="80%"
ALIGN="LEFT"
VALIGN="TOP"
> Flatness.</TD
></TR
><TR
><TD
WIDTH="20%"
ALIGN="RIGHT"
VALIGN="TOP"
><I
CLASS="EMPHASIS"
>Returns</I
> :</TD
><TD
WIDTH="80%"
ALIGN="LEFT"
VALIGN="TOP"
> Resulting stroked outline in svp format.</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><HR><DIV
CLASS="REFSECT2"
><A
NAME="AEN1105"
></A
><H3
><A
NAME="ART-VPATH-NEW-CIRCLE"
></A
>art_vpath_new_circle ()</H3
><TABLE
BORDER="0"
BGCOLOR="#D6E8FF"
WIDTH="100%"
CELLPADDING="6"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
><A
HREF="libart-core-construction-apis.html#ARTVPATH"
>ArtVpath</A
>*   art_vpath_new_circle            (double x,
                                             double y,
                                             double r);</PRE
></TD
></TR
></TABLE
><P
>Creates a new polygon closely approximating a circle with center
(<TT
CLASS="PARAMETER"
><I
>x</I
></TT
>, <TT
CLASS="PARAMETER"
><I
>y</I
></TT
>) and radius <TT
CLASS="PARAMETER"
><I
>r</I
></TT
>. Currently, the number of points used in the
approximation is fixed, but that will probably change.</P
><P
></P
><DIV
CLASS="INFORMALTABLE"
><A
NAME="AEN1118"
></A
><P
></P
><TABLE
BORDER="0"
WIDTH="100%"
BGCOLOR="#FFD0D0"
CELLSPACING="0"
CELLPADDING="4"
CLASS="CALSTABLE"
><TBODY
><TR
><TD
WIDTH="20%"
ALIGN="RIGHT"
VALIGN="TOP"
><TT
CLASS="PARAMETER"
><I
>x</I
></TT
>&nbsp;:</TD
><TD
WIDTH="80%"
ALIGN="LEFT"
VALIGN="TOP"
> X coordinate of center.</TD
></TR
><TR
><TD
WIDTH="20%"
ALIGN="RIGHT"
VALIGN="TOP"
><TT
CLASS="PARAMETER"
><I
>y</I
></TT
>&nbsp;:</TD
><TD
WIDTH="80%"
ALIGN="LEFT"
VALIGN="TOP"
> Y coordinate of center.</TD
></TR
><TR
><TD
WIDTH="20%"
ALIGN="RIGHT"
VALIGN="TOP"
><TT
CLASS="PARAMETER"
><I
>r</I
></TT
>&nbsp;:</TD
><TD
WIDTH="80%"
ALIGN="LEFT"
VALIGN="TOP"
> radius.</TD
></TR
><TR
><TD
WIDTH="20%"
ALIGN="RIGHT"
VALIGN="TOP"
><I
CLASS="EMPHASIS"
>Returns</I
> :</TD
><TD
WIDTH="80%"
ALIGN="LEFT"
VALIGN="TOP"
> The newly created <A
HREF="libart-core-construction-apis.html#ARTVPATH"
>ArtVpath</A
>.</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><BR
CLEAR="all"><BR><TABLE
WIDTH="100%"
BORDER="0"
BGCOLOR="#000000"
CELLPADDING="1"
CELLSPACING="0"
><TR
><TD
WIDTH="25%"
BGCOLOR="#C00000"
ALIGN="left"
><A
HREF="libart-core-construction-apis.html"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
>&#60;&#60;&#60; Previous Page</B
></FONT
></A
></TD
><TD
WIDTH="25%"
BGCOLOR="#0000C0"
ALIGN="center"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
><A
HREF="libart.html"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
>Home</B
></FONT
></A
></B
></FONT
></TD
><TD
WIDTH="25%"
BGCOLOR="#00C000"
ALIGN="center"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
><A
HREF="basic-foo.html"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
>Up</B
></FONT
></A
></B
></FONT
></TD
><TD
WIDTH="25%"
BGCOLOR="#C00000"
ALIGN="right"
><A
HREF="libart-transformation-operations.html"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
>Next Page &#62;&#62;&#62;</B
></FONT
></A
></TD
></TR
><TR
><TD
COLSPAN="2"
ALIGN="left"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
>Core Construction APIs</B
></FONT
></TD
><TD
COLSPAN="2"
ALIGN="right"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
>Transformation operations</B
></FONT
></TD
></TR
></TABLE
></DIV
></BODY
></HTML
>